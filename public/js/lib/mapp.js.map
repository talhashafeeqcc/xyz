{
  "version": 3,
  "sources": ["../../../node_modules/@webreflection/mapset/esm/index.js", "../../../node_modules/@webreflection/uparser/esm/index.js", "../../../node_modules/@webreflection/uwire/esm/index.js", "../../../node_modules/uarray/esm/index.js", "../../../node_modules/uhandlers/esm/index.js", "../../../node_modules/udomdiff/esm/index.js", "../../../node_modules/uhtml/esm/utils.js", "../../../node_modules/uhtml/esm/handlers.js", "../../../node_modules/uhtml/esm/rabbit.js", "../../../node_modules/uhtml/esm/index.js", "../../../lib/utils/clone.mjs", "../../../lib/utils/convert.mjs", "../../../lib/utils/copyToClipboard.mjs", "../../../lib/utils/dataURLtoBlob.mjs", "../../../lib/utils/here.mjs", "../../../lib/utils/hexa.mjs", "../../../lib/utils/loadPlugins.mjs", "../../../lib/utils/mapboxGeometryFunction.mjs", "../../../lib/utils/getCurrentPosition.mjs", "../../../lib/utils/merge.mjs", "../../../lib/utils/paramString.mjs", "../../../lib/utils/promiseAll.mjs", "../../../lib/utils/queryParams.mjs", "../../../lib/utils/style.mjs", "../../../lib/utils/svgSymbols.mjs", "../../../lib/utils/verticeGeoms.mjs", "../../../lib/utils/xhr.mjs", "../../../lib/utils/_utils.mjs", "../../../lib/hooks.mjs", "../../../lib/dictionaries/en.mjs", "../../../lib/dictionaries/de.mjs", "../../../lib/dictionaries/fr.mjs", "../../../lib/dictionaries/pl.mjs", "../../../lib/dictionaries/ja.mjs", "../../../lib/dictionaries/ko.mjs", "../../../lib/dictionaries/cn.mjs", "../../../lib/dictionaries/_dictionaries.mjs", "../../../lib/layer/format/mbtiles.mjs", "../../../lib/layer/format/mapboxgl.mjs", "../../../lib/layer/format/tiles.mjs", "../../../lib/layer/format/mvt.mjs", "../../../lib/layer/format/cluster.mjs", "../../../lib/layer/format/geojson.mjs", "../../../lib/layer/format/grid.mjs", "../../../lib/layer/format/googlemaps.mjs", "../../../lib/layer/format/_format.mjs", "../../../lib/layer/decorate.mjs", "../../../lib/layer/hover.mjs", "../../../lib/layer/featureFilter.mjs", "../../../lib/layer/Style.mjs", "../../../lib/layer/themes/categorized.mjs", "../../../lib/layer/themes/distributed.mjs", "../../../lib/layer/themes/graduated.mjs", "../../../lib/layer/_layer.mjs", "../../../lib/location/decorate.mjs", "../../../lib/location/get.mjs", "../../../lib/location/nnearest.mjs", "../../../lib/location/_location.mjs", "../../../lib/mapview/addLayer.mjs", "../../../lib/mapview/fitView.mjs", "../../../lib/mapview/getBounds.mjs", "../../../lib/mapview/geoJSON.mjs", "../../../lib/mapview/infotip.mjs", "../../../lib/mapview/locate.mjs", "../../../lib/mapview/popup.mjs", "../../../lib/mapview/interactions/highlight.mjs", "../../../lib/mapview/interactions/draw.mjs", "../../../lib/mapview/interactions/modify.mjs", "../../../lib/mapview/interactions/zoom.mjs", "../../../lib/mapview/interactions/snap.mjs", "../../../lib/mapview/_mapview.mjs", "../../../lib/mapp.mjs"],
  "sourcesContent": ["export class MapSet extends Map {\n  set(key, value) {\n    super.set(key, value);\n    return value;\n  }\n}\n\nexport class WeakMapSet extends WeakMap {\n  set(key, value) {\n    super.set(key, value);\n    return value;\n  }\n}\n", "/*! (c) Andrea Giammarchi - ISC */\nconst empty = /^(?:area|base|br|col|embed|hr|img|input|keygen|link|menuitem|meta|param|source|track|wbr)$/i;\nconst elements = /<([a-z]+[a-z0-9:._-]*)([^>]*?)(\\/?)>/g;\nconst attributes = /([^\\s\\\\>\"'=]+)\\s*=\\s*(['\"]?)\\x01/g;\nconst holes = /[\\x01\\x02]/g;\n\n// \\x01 Node.ELEMENT_NODE\n// \\x02 Node.ATTRIBUTE_NODE\n\n/**\n * Given a template, find holes as both nodes and attributes and\n * return a string with holes as either comment nodes or named attributes.\n * @param {string[]} template a template literal tag array\n * @param {string} prefix prefix to use per each comment/attribute\n * @param {boolean} svg enforces self-closing tags\n * @returns {string} X/HTML with prefixed comments or attributes\n */\nexport default (template, prefix, svg) => {\n  let i = 0;\n  return template\n          .join('\\x01')\n          .trim()\n          .replace(\n            elements,\n            (_, name, attrs, selfClosing) => {\n              let ml = name + attrs.replace(attributes, '\\x02=$2$1').trimEnd();\n              if (selfClosing.length)\n                ml += (svg || empty.test(name)) ? ' /' : ('></' + name);\n              return '<' + ml + '>';\n            }\n          )\n          .replace(\n            holes,\n            hole => hole === '\\x01' ?\n              ('<!--' + prefix + i++ + '-->') :\n              (prefix + i++)\n          );\n};\n", "const ELEMENT_NODE = 1;\nconst nodeType = 111;\n\nconst remove = ({firstChild, lastChild}) => {\n  const range = document.createRange();\n  range.setStartAfter(firstChild);\n  range.setEndAfter(lastChild);\n  range.deleteContents();\n  return firstChild;\n};\n\nexport const diffable = (node, operation) => node.nodeType === nodeType ?\n  ((1 / operation) < 0 ?\n    (operation ? remove(node) : node.lastChild) :\n    (operation ? node.valueOf() : node.firstChild)) :\n  node\n;\n\nexport const persistent = fragment => {\n  const {firstChild, lastChild} = fragment;\n  if (firstChild === lastChild)\n    return lastChild || fragment;\n  const {childNodes} = fragment;\n  const nodes = [...childNodes];\n  return {\n    ELEMENT_NODE,\n    nodeType,\n    firstChild,\n    lastChild,\n    valueOf() {\n      if (childNodes.length !== nodes.length)\n        fragment.append(...nodes);\n      return fragment;\n    }\n  };\n};\n", "const {isArray} = Array;\nconst {indexOf, slice} = [];\n\nexport {isArray, indexOf, slice};\n", "import {isArray} from 'uarray';\n\n// flag for foreign checks (slower path, fast by default)\nlet useForeign = false;\n\nexport class Foreign {\n  constructor(handler, value) {\n    useForeign = true;\n    this._ = (...args) => handler(...args, value);\n  }\n}\n\nexport const foreign = (handler, value) => new Foreign(handler, value);\n\nexport const aria = node => values => {\n  for (const key in values) {\n    const name = key === 'role' ? key : `aria-${key}`;\n    const value = values[key];\n    if (value == null)\n      node.removeAttribute(name);\n    else\n      node.setAttribute(name, value);\n  }\n};\n\nconst getValue = value => value == null ? value : value.valueOf();\n\nexport const attribute = (node, name) => {\n  let oldValue, orphan = true;\n  const attributeNode = document.createAttributeNS(null, name);\n  return newValue => {\n    const value = useForeign && (newValue instanceof Foreign) ?\n                  newValue._(node, name) : getValue(newValue);\n    if (oldValue !== value) {\n      if ((oldValue = value) == null) {\n        if (!orphan) {\n          node.removeAttributeNode(attributeNode);\n          orphan = true;\n        }\n      }\n      else {\n        attributeNode.value = value;\n        if (orphan) {\n          node.setAttributeNodeNS(attributeNode);\n          orphan = false;\n        }\n      }\n    }\n  };\n};\n\nexport const boolean = (node, key, oldValue) => newValue => {\n  const value = !!getValue(newValue);\n  if (oldValue !== value) {\n    // when IE won't be around anymore ...\n    // node.toggleAttribute(key, oldValue = !!value);\n    if ((oldValue = value))\n      node.setAttribute(key, '');\n    else\n      node.removeAttribute(key);\n  }\n};\n\nexport const data = ({dataset}) => values => {\n  for (const key in values) {\n    const value = values[key];\n    if (value == null)\n      delete dataset[key];\n    else\n      dataset[key] = value;\n  }\n};\n\nexport const event = (node, name) => {\n  let oldValue, lower, type = name.slice(2);\n  if (!(name in node) && (lower = name.toLowerCase()) in node)\n    type = lower.slice(2);\n  return newValue => {\n    const info = isArray(newValue) ? newValue : [newValue, false];\n    if (oldValue !== info[0]) {\n      if (oldValue)\n        node.removeEventListener(type, oldValue, info[1]);\n      if (oldValue = info[0])\n        node.addEventListener(type, oldValue, info[1]);\n    }\n  };\n};\n\nexport const ref = node => {\n  let oldValue;\n  return value => {\n    if (oldValue !== value) {\n      oldValue = value;\n      if (typeof value === 'function')\n        value(node);\n      else\n        value.current = node;\n    }\n  };\n};\n\nexport const setter = (node, key) => key === 'dataset' ?\n  data(node) :\n  value => {\n    node[key] = value;\n  };\n\nexport const text = node => {\n  let oldValue;\n  return newValue => {\n    const value = getValue(newValue);\n    if (oldValue != value) {\n      oldValue = value;\n      node.textContent = value == null ? '' : value;\n    }\n  };\n};\n", "/**\n * ISC License\n *\n * Copyright (c) 2020, Andrea Giammarchi, @WebReflection\n *\n * Permission to use, copy, modify, and/or distribute this software for any\n * purpose with or without fee is hereby granted, provided that the above\n * copyright notice and this permission notice appear in all copies.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\n * REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\n * AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\n * INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\n * LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE\n * OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\n * PERFORMANCE OF THIS SOFTWARE.\n */\n\n/**\n * @param {Node} parentNode The container where children live\n * @param {Node[]} a The list of current/live children\n * @param {Node[]} b The list of future children\n * @param {(entry: Node, action: number) => Node} get\n * The callback invoked per each entry related DOM operation.\n * @param {Node} [before] The optional node used as anchor to insert before.\n * @returns {Node[]} The same list of future children.\n */\nexport default (parentNode, a, b, get, before) => {\n  const bLength = b.length;\n  let aEnd = a.length;\n  let bEnd = bLength;\n  let aStart = 0;\n  let bStart = 0;\n  let map = null;\n  while (aStart < aEnd || bStart < bEnd) {\n    // append head, tail, or nodes in between: fast path\n    if (aEnd === aStart) {\n      // we could be in a situation where the rest of nodes that\n      // need to be added are not at the end, and in such case\n      // the node to `insertBefore`, if the index is more than 0\n      // must be retrieved, otherwise it's gonna be the first item.\n      const node = bEnd < bLength ?\n        (bStart ?\n          (get(b[bStart - 1], -0).nextSibling) :\n          get(b[bEnd - bStart], 0)) :\n        before;\n      while (bStart < bEnd)\n        parentNode.insertBefore(get(b[bStart++], 1), node);\n    }\n    // remove head or tail: fast path\n    else if (bEnd === bStart) {\n      while (aStart < aEnd) {\n        // remove the node only if it's unknown or not live\n        if (!map || !map.has(a[aStart]))\n          parentNode.removeChild(get(a[aStart], -1));\n        aStart++;\n      }\n    }\n    // same node: fast path\n    else if (a[aStart] === b[bStart]) {\n      aStart++;\n      bStart++;\n    }\n    // same tail: fast path\n    else if (a[aEnd - 1] === b[bEnd - 1]) {\n      aEnd--;\n      bEnd--;\n    }\n    // The once here single last swap \"fast path\" has been removed in v1.1.0\n    // https://github.com/WebReflection/udomdiff/blob/single-final-swap/esm/index.js#L69-L85\n    // reverse swap: also fast path\n    else if (\n      a[aStart] === b[bEnd - 1] &&\n      b[bStart] === a[aEnd - 1]\n    ) {\n      // this is a \"shrink\" operation that could happen in these cases:\n      // [1, 2, 3, 4, 5]\n      // [1, 4, 3, 2, 5]\n      // or asymmetric too\n      // [1, 2, 3, 4, 5]\n      // [1, 2, 3, 5, 6, 4]\n      const node = get(a[--aEnd], -1).nextSibling;\n      parentNode.insertBefore(\n        get(b[bStart++], 1),\n        get(a[aStart++], -1).nextSibling\n      );\n      parentNode.insertBefore(get(b[--bEnd], 1), node);\n      // mark the future index as identical (yeah, it's dirty, but cheap \uD83D\uDC4D)\n      // The main reason to do this, is that when a[aEnd] will be reached,\n      // the loop will likely be on the fast path, as identical to b[bEnd].\n      // In the best case scenario, the next loop will skip the tail,\n      // but in the worst one, this node will be considered as already\n      // processed, bailing out pretty quickly from the map index check\n      a[aEnd] = b[bEnd];\n    }\n    // map based fallback, \"slow\" path\n    else {\n      // the map requires an O(bEnd - bStart) operation once\n      // to store all future nodes indexes for later purposes.\n      // In the worst case scenario, this is a full O(N) cost,\n      // and such scenario happens at least when all nodes are different,\n      // but also if both first and last items of the lists are different\n      if (!map) {\n        map = new Map;\n        let i = bStart;\n        while (i < bEnd)\n          map.set(b[i], i++);\n      }\n      // if it's a future node, hence it needs some handling\n      if (map.has(a[aStart])) {\n        // grab the index of such node, 'cause it might have been processed\n        const index = map.get(a[aStart]);\n        // if it's not already processed, look on demand for the next LCS\n        if (bStart < index && index < bEnd) {\n          let i = aStart;\n          // counts the amount of nodes that are the same in the future\n          let sequence = 1;\n          while (++i < aEnd && i < bEnd && map.get(a[i]) === (index + sequence))\n            sequence++;\n          // effort decision here: if the sequence is longer than replaces\n          // needed to reach such sequence, which would brings again this loop\n          // to the fast path, prepend the difference before a sequence,\n          // and move only the future list index forward, so that aStart\n          // and bStart will be aligned again, hence on the fast path.\n          // An example considering aStart and bStart are both 0:\n          // a: [1, 2, 3, 4]\n          // b: [7, 1, 2, 3, 6]\n          // this would place 7 before 1 and, from that time on, 1, 2, and 3\n          // will be processed at zero cost\n          if (sequence > (index - bStart)) {\n            const node = get(a[aStart], 0);\n            while (bStart < index)\n              parentNode.insertBefore(get(b[bStart++], 1), node);\n          }\n          // if the effort wasn't good enough, fallback to a replace,\n          // moving both source and target indexes forward, hoping that some\n          // similar node will be found later on, to go back to the fast path\n          else {\n            parentNode.replaceChild(\n              get(b[bStart++], 1),\n              get(a[aStart++], -1)\n            );\n          }\n        }\n        // otherwise move the source forward, 'cause there's nothing to do\n        else\n          aStart++;\n      }\n      // this node has no meaning in the future list, so it's more than safe\n      // to remove it, and check the next live node out instead, meaning\n      // that only the live list index should be forwarded\n      else\n        parentNode.removeChild(get(a[aStart++], -1));\n    }\n  }\n  return b;\n};\n", "const {isArray, prototype} = Array;\nconst {indexOf} = prototype;\n\nexport {isArray, indexOf};\n\nconst {\n  createDocumentFragment,\n  createElement,\n  createElementNS,\n  createTextNode,\n  createTreeWalker,\n  importNode\n} = new Proxy(document, {\n  get: (target, method) => target[method].bind(target)\n});\n\nexport {createTextNode, createTreeWalker, importNode};\n\nconst createHTML = html => {\n  const template = createElement('template');\n  template.innerHTML = html;\n  return template.content;\n};\n\nlet xml;\nconst createSVG = svg => {\n  if (!xml) xml = createElementNS('http://www.w3.org/2000/svg', 'svg');\n  xml.innerHTML = svg;\n  const content = createDocumentFragment();\n  content.append(...xml.childNodes);\n  return content;\n};\n\nexport const createContent = (text, svg) => svg ?\n                              createSVG(text) : createHTML(text);\n", "import {diffable} from '@webreflection/uwire';\n\nimport {aria, attribute, boolean, event, ref, setter, text} from 'uhandlers';\nimport udomdiff from 'udomdiff';\n\nimport {isArray, createTextNode} from './utils.js';\n\n// from a generic path, retrieves the exact targeted node\nconst reducePath = ({childNodes}, i) => childNodes[i];\n\n// this helper avoid code bloat around handleAnything() callback\nconst diff = (comment, oldNodes, newNodes) => udomdiff(\n  comment.parentNode,\n  // TODO: there is a possible edge case where a node has been\n  //       removed manually, or it was a keyed one, attached\n  //       to a shared reference between renders.\n  //       In this case udomdiff might fail at removing such node\n  //       as its parent won't be the expected one.\n  //       The best way to avoid this issue is to filter oldNodes\n  //       in search of those not live, or not in the current parent\n  //       anymore, but this would require both a change to uwire,\n  //       exposing a parentNode from the firstChild, as example,\n  //       but also a filter per each diff that should exclude nodes\n  //       that are not in there, penalizing performance quite a lot.\n  //       As this has been also a potential issue with domdiff,\n  //       and both lighterhtml and hyperHTML might fail with this\n  //       very specific edge case, I might as well document this possible\n  //       \"diffing shenanigan\" and call it a day.\n  oldNodes,\n  newNodes,\n  diffable,\n  comment\n);\n\n// if an interpolation represents a comment, the whole\n// diffing will be related to such comment.\n// This helper is in charge of understanding how the new\n// content for such interpolation/hole should be updated\nconst handleAnything = comment => {\n  let oldValue, text, nodes = [];\n  const anyContent = newValue => {\n    switch (typeof newValue) {\n      // primitives are handled as text content\n      case 'string':\n      case 'number':\n      case 'boolean':\n        if (oldValue !== newValue) {\n          oldValue = newValue;\n          if (!text)\n            text = createTextNode('');\n          text.data = newValue;\n          nodes = diff(comment, nodes, [text]);\n        }\n        break;\n      // null, and undefined are used to cleanup previous content\n      case 'object':\n      case 'undefined':\n        if (newValue == null) {\n          if (oldValue != newValue) {\n            oldValue = newValue;\n            nodes = diff(comment, nodes, []);\n          }\n          break;\n        }\n        // arrays and nodes have a special treatment\n        if (isArray(newValue)) {\n          oldValue = newValue;\n          // arrays can be used to cleanup, if empty\n          if (newValue.length === 0)\n            nodes = diff(comment, nodes, []);\n          // or diffed, if these contains nodes or \"wires\"\n          else if (typeof newValue[0] === 'object')\n            nodes = diff(comment, nodes, newValue);\n          // in all other cases the content is stringified as is\n          else\n            anyContent(String(newValue));\n          break;\n        }\n        // if the new value is a DOM node, or a wire, and it's\n        // different from the one already live, then it's diffed.\n        // if the node is a fragment, it's appended once via its childNodes\n        // There is no `else` here, meaning if the content\n        // is not expected one, nothing happens, as easy as that.\n        if (oldValue !== newValue) {\n          if ('ELEMENT_NODE' in newValue) {\n            oldValue = newValue;\n            nodes = diff(\n              comment,\n              nodes,\n              newValue.nodeType === 11 ?\n                [...newValue.childNodes] :\n                [newValue]\n            );\n          }\n          else {\n            const value = newValue.valueOf();\n            if (value !== newValue)\n              anyContent(value);\n          }\n        }\n        break;\n      case 'function':\n        anyContent(newValue(comment));\n        break;\n    }\n  };\n  return anyContent;\n};\n\n// attributes can be:\n//  * ref=${...}      for hooks and other purposes\n//  * aria=${...}     for aria attributes\n//  * ?boolean=${...} for boolean attributes\n//  * .dataset=${...} for dataset related attributes\n//  * .setter=${...}  for Custom Elements setters or nodes with setters\n//                    such as buttons, details, options, select, etc\n//  * @event=${...}   to explicitly handle event listeners\n//  * onevent=${...}  to automatically handle event listeners\n//  * generic=${...}  to handle an attribute just like an attribute\nconst handleAttribute = (node, name/*, svg*/) => {\n  switch (name[0]) {\n    case '?': return boolean(node, name.slice(1), false);\n    case '.': return setter(node, name.slice(1));\n    case '@': return event(node, 'on' + name.slice(1));\n    case 'o': if (name[1] === 'n') return event(node, name);\n  }\n\n  switch (name) {\n    case 'ref': return ref(node);\n    case 'aria': return aria(node);\n  }\n\n  return attribute(node, name/*, svg*/);\n};\n\n// each mapped update carries the update type and its path\n// the type is either node, attribute, or text, while\n// the path is how to retrieve the related node to update.\n// In the attribute case, the attribute name is also carried along.\nexport function handlers(options) {\n  const {type, path} = options;\n  const node = path.reduceRight(reducePath, this);\n  return type === 'node' ?\n    handleAnything(node) :\n    (type === 'attr' ?\n      handleAttribute(node, options.name/*, options.svg*/) :\n      text(node));\n};\n", "import {WeakMapSet} from '@webreflection/mapset';\nimport instrument from '@webreflection/uparser';\nimport {persistent} from '@webreflection/uwire';\n\nimport {handlers} from './handlers.js';\nimport {isArray, indexOf, createContent, createTreeWalker, importNode} from './utils.js';\n\n// from a fragment container, create an array of indexes\n// related to its child nodes, so that it's possible\n// to retrieve later on exact node via reducePath\nconst createPath = node => {\n  const path = [];\n  let {parentNode} = node;\n  while (parentNode) {\n    path.push(indexOf.call(parentNode.childNodes, node));\n    node = parentNode;\n    ({parentNode} = node);\n  }\n  return path;\n};\n\n// the prefix is used to identify either comments, attributes, or nodes\n// that contain the related unique id. In the attribute cases\n// is\u00B5X=\"attribute-name\" will be used to map current X update to that\n// attribute name, while comments will be like <!--is\u00B5X-->, to map\n// the update to that specific comment node, hence its parent.\n// style and textarea will have <!--is\u00B5X--> text content, and are handled\n// directly through text-only updates.\nconst prefix = 'is\u00B5';\n\n// Template Literals are unique per scope and static, meaning a template\n// should be parsed once, and once only, as it will always represent the same\n// content, within the exact same amount of updates each time.\n// This cache relates each template to its unique content and updates.\nconst cache = new WeakMapSet;\n\n// a RegExp that helps checking nodes that cannot contain comments\nconst textOnly = /^(?:textarea|script|style|title|plaintext|xmp)$/;\n\nexport const createCache = () => ({\n  stack: [],    // each template gets a stack for each interpolation \"hole\"\n\n  entry: null,  // each entry contains details, such as:\n                //  * the template that is representing\n                //  * the type of node it represents (html or svg)\n                //  * the content fragment with all nodes\n                //  * the list of updates per each node (template holes)\n                //  * the \"wired\" node or fragment that will get updates\n                // if the template or type are different from the previous one\n                // the entry gets re-created each time\n\n  wire: null    // each rendered node represent some wired content and\n                // this reference to the latest one. If different, the node\n                // will be cleaned up and the new \"wire\" will be appended\n});\n\n// the entry stored in the rendered node cache, and per each \"hole\"\nconst createEntry = (type, template) => {\n  const {content, updates} = mapUpdates(type, template);\n  return {type, template, content, updates, wire: null};\n};\n\n// a template is instrumented to be able to retrieve where updates are needed.\n// Each unique template becomes a fragment, cloned once per each other\n// operation based on the same template, i.e. data => html`<p>${data}</p>`\nconst mapTemplate = (type, template) => {\n  const svg = type === 'svg';\n  const text = instrument(template, prefix, svg);\n  const content = createContent(text, svg);\n  // once instrumented and reproduced as fragment, it's crawled\n  // to find out where each update is in the fragment tree\n  const tw = createTreeWalker(content, 1 | 128);\n  const nodes = [];\n  const length = template.length - 1;\n  let i = 0;\n  // updates are searched via unique names, linearly increased across the tree\n  // <div is\u00B50=\"attr\" is\u00B51=\"other\"><!--is\u00B52--><style><!--is\u00B53--</style></div>\n  let search = `${prefix}${i}`;\n  while (i < length) {\n    const node = tw.nextNode();\n    // if not all updates are bound but there's nothing else to crawl\n    // it means that there is something wrong with the template.\n    if (!node)\n      throw `bad template: ${text}`;\n    // if the current node is a comment, and it contains is\u00B5X\n    // it means the update should take care of any content\n    if (node.nodeType === 8) {\n      // The only comments to be considered are those\n      // which content is exactly the same as the searched one.\n      if (node.data === search) {\n        nodes.push({type: 'node', path: createPath(node)});\n        search = `${prefix}${++i}`;\n      }\n    }\n    else {\n      // if the node is not a comment, loop through all its attributes\n      // named is\u00B5X and relate attribute updates to this node and the\n      // attribute name, retrieved through node.getAttribute(\"is\u00B5X\")\n      // the is\u00B5X attribute will be removed as irrelevant for the layout\n      // let svg = -1;\n      while (node.hasAttribute(search)) {\n        nodes.push({\n          type: 'attr',\n          path: createPath(node),\n          name: node.getAttribute(search)\n        });\n        node.removeAttribute(search);\n        search = `${prefix}${++i}`;\n      }\n      // if the node was a style, textarea, or others, check its content\n      // and if it is <!--is\u00B5X--> then update tex-only this node\n      if (\n        textOnly.test(node.localName) &&\n        node.textContent.trim() === `<!--${search}-->`\n      ){\n        node.textContent = '';\n        nodes.push({type: 'text', path: createPath(node)});\n        search = `${prefix}${++i}`;\n      }\n    }\n  }\n  // once all nodes to update, or their attributes, are known, the content\n  // will be cloned in the future to represent the template, and all updates\n  // related to such content retrieved right away without needing to re-crawl\n  // the exact same template, and its content, more than once.\n  return {content, nodes};\n};\n\n// if a template is unknown, perform the previous mapping, otherwise grab\n// its details such as the fragment with all nodes, and updates info.\nconst mapUpdates = (type, template) => {\n  const {content, nodes} = (\n    cache.get(template) ||\n    cache.set(template, mapTemplate(type, template))\n  );\n  // clone deeply the fragment\n  const fragment = importNode(content, true);\n  // and relate an update handler per each node that needs one\n  const updates = nodes.map(handlers, fragment);\n  // return the fragment and all updates to use within its nodes\n  return {content: fragment, updates};\n};\n\n// as html and svg can be nested calls, but no parent node is known\n// until rendered somewhere, the unroll operation is needed to\n// discover what to do with each interpolation, which will result\n// into an update operation.\nexport const unroll = (info, {type, template, values}) => {\n  // interpolations can contain holes and arrays, so these need\n  // to be recursively discovered\n  const length = unrollValues(info, values);\n  let {entry} = info;\n  // if the cache entry is either null or different from the template\n  // and the type this unroll should resolve, create a new entry\n  // assigning a new content fragment and the list of updates.\n  if (!entry || (entry.template !== template || entry.type !== type))\n    info.entry = (entry = createEntry(type, template));\n  const {content, updates, wire} = entry;\n  // even if the fragment and its nodes is not live yet,\n  // it is already possible to update via interpolations values.\n  for (let i = 0; i < length; i++)\n    updates[i](values[i]);\n  // if the entry was new, or representing a different template or type,\n  // create a new persistent entity to use during diffing.\n  // This is simply a DOM node, when the template has a single container,\n  // as in `<p></p>`, or a \"wire\" in `<p></p><p></p>` and similar cases.\n  return wire || (entry.wire = persistent(content));\n};\n\n// the stack retains, per each interpolation value, the cache\n// related to each interpolation value, or null, if the render\n// was conditional and the value is not special (Array or Hole)\nconst unrollValues = ({stack}, values) => {\n  const {length} = values;\n  for (let i = 0; i < length; i++) {\n    const hole = values[i];\n    // each Hole gets unrolled and re-assigned as value\n    // so that domdiff will deal with a node/wire, not with a hole\n    if (hole instanceof Hole)\n      values[i] = unroll(\n        stack[i] || (stack[i] = createCache()),\n        hole\n      );\n    // arrays are recursively resolved so that each entry will contain\n    // also a DOM node or a wire, hence it can be diffed if/when needed\n    else if (isArray(hole))\n      unrollValues(stack[i] || (stack[i] = createCache()), hole);\n    // if the value is nothing special, the stack doesn't need to retain data\n    // this is useful also to cleanup previously retained data, if the value\n    // was a Hole, or an Array, but not anymore, i.e.:\n    // const update = content => html`<div>${content}</div>`;\n    // update(listOfItems); update(null); update(html`hole`)\n    else\n      stack[i] = null;\n  }\n  if (length < stack.length)\n    stack.splice(length);\n  return length;\n};\n\n/**\n * Holds all details wrappers needed to render the content further on.\n * @constructor\n * @param {string} type The hole type, either `html` or `svg`.\n * @param {string[]} template The template literals used to the define the content.\n * @param {Array} values Zero, one, or more interpolated values to render.\n */\nexport class Hole {\n  constructor(type, template, values) {\n    this.type = type;\n    this.template = template;\n    this.values = values;\n  }\n};\n", "import {MapSet, WeakMapSet} from '@webreflection/mapset';\n\nimport {Hole, createCache, unroll} from './rabbit.js';\n\n// both `html` and `svg` template literal tags are polluted\n// with a `for(ref[, id])` and a `node` tag too\nconst tag = type => {\n  // both `html` and `svg` tags have their own cache\n  const keyed = new WeakMapSet;\n  // keyed operations always re-use the same cache and unroll\n  // the template and its interpolations right away\n  const fixed = cache => (template, ...values) => unroll(\n    cache,\n    {type, template, values}\n  );\n  return Object.assign(\n    // non keyed operations are recognized as instance of Hole\n    // during the \"unroll\", recursively resolved and updated\n    (template, ...values) => new Hole(type, template, values),\n    {\n      // keyed operations need a reference object, usually the parent node\n      // which is showing keyed results, and optionally a unique id per each\n      // related node, handy with JSON results and mutable list of objects\n      // that usually carry a unique identifier\n      for(ref, id) {\n        const memo = keyed.get(ref) || keyed.set(ref, new MapSet);\n        return memo.get(id) || memo.set(id, fixed(createCache()));\n      },\n      // it is possible to create one-off content out of the box via node tag\n      // this might return the single created node, or a fragment with all\n      // nodes present at the root level and, of course, their child nodes\n      node: (template, ...values) => unroll(createCache(), new Hole(type, template, values)).valueOf()\n    }\n  );\n};\n\n// each rendered node gets its own cache\nconst cache = new WeakMapSet;\n\n// rendering means understanding what `html` or `svg` tags returned\n// and it relates a specific node to its own unique cache.\n// Each time the content to render changes, the node is cleaned up\n// and the new new content is appended, and if such content is a Hole\n// then it's \"unrolled\" to resolve all its inner nodes.\nconst render = (where, what) => {\n  const hole = typeof what === 'function' ? what() : what;\n  const info = cache.get(where) || cache.set(where, createCache());\n  const wire = hole instanceof Hole ? unroll(info, hole) : hole;\n  if (wire !== info.wire) {\n    info.wire = wire;\n    // valueOf() simply returns the node itself, but in case it was a \"wire\"\n    // it will eventually re-append all nodes to its fragment so that such\n    // fragment can be re-appended many times in a meaningful way\n    // (wires are basically persistent fragments facades with special behavior)\n    where.replaceChildren(wire.valueOf());\n  }\n  return where;\n};\n\nconst html = tag('html');\nconst svg = tag('svg');\n\nexport {Hole, render, html, svg};\n", "export default function clone(target, map = new WeakMap()) {\n\n  // Return the value if target is not an object or null\n  if (target === null\n    || typeof target !== 'object'\n    || typeof target === 'function'\n    || target instanceof HTMLElement) {\n    return target\n  }\n\n  // Check whether target is an array.\n  let cloneTarget = Array.isArray(target) ? [] : {};\n\n  // Use WeakMap to prevent circular references.\n  if (map.get(target)) {\n    return map.get(target);\n  }\n  map.set(target, cloneTarget);\n\n  for (const key in target) {\n    cloneTarget[key] = clone(target[key], map);\n  }\n\n  return cloneTarget;\n};", "let promise, convert;\n\nasync function moduleImport() {\n\n  if (!promise) promise = new Promise(async resolve => {\n\n    import('https://cdn.skypack.dev/convert@4')\n      .then(mod => resolve(convert = mod.convert))\n\n  })\n\n  await promise\n}\n\nexport default async (value, params) => {\n\n  await moduleImport()\n\n  value = parseFloat(value)\n\n  if (params.units && params.convertTo) {\n\n    value = convert(value, params.units).to(params.convertTo);\n  }\n\n  value = value.toFixed(params.decimals || 0)\n\n  value = value.toLocaleString(params.locale || 'en-GB')\n\n  return `${params.prefix || ''}${value}${params.suffix || ''}`\n}", "// Create temporary textarea to copy string to clipboard.\nexport function copyToClipboard(str) {\n\n  let textArea = document.body.appendChild(mapp.utils.html.node`\n    <textarea style=\"visibility=none;\">`);\n  \n  textArea.value = str;\n  textArea.select();\n  document.execCommand('copy');\n  textArea.remove();\n\n}", "export function dataURLtoBlob(dataURL) {\n\n  if (dataURL.indexOf(';base64,') == -1) {\n    let\n      parts = dataURL.split(','),\n      contentType = parts[0].split(':')[1],\n      raw = parts[1];\n  \n    return new Blob([raw], { type: contentType });\n  }\n  \n  let\n    parts = dataURL.split(';base64,'),\n    contentType = parts[0].split(':')[1],\n    raw = window.atob(parts[1]),\n    uInt8Array = new Uint8Array(raw.length);\n  \n  for (let i = 0; i < raw.length; ++i) {\n    uInt8Array[i] = raw.charCodeAt(i);\n  }\n  \n  return new Blob([uInt8Array], { type: contentType });\n}", "/*\n * Copyright (C) 2019 HERE Europe B.V.\n * Licensed under MIT, see full license in LICENSE\n * SPDX-License-Identifier: MIT\n * License-Filename: LICENSE\n */\nconst DEFAULT_PRECISION = 5;\n\nconst ENCODING_TABLE = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_\";\n\nconst DECODING_TABLE = [\n    62, -1, -1, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, -1, -1, -1, -1, -1, -1, -1,\n    0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21,\n    22, 23, 24, 25, -1, -1, -1, -1, 63, -1, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,\n    36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51\n];\n\nconst FORMAT_VERSION = 1;\n\nconst ABSENT = 0;\nconst LEVEL = 1;\nconst ALTITUDE = 2;\nconst ELEVATION = 3;\n// Reserved values 4 and 5 should not be selectable\nconst CUSTOM1 = 6;\nconst CUSTOM2 = 7;\n\nconst Num = typeof BigInt !== \"undefined\" ? BigInt : Number;\n\nfunction decode(encoded) {\n    const decoder = decodeUnsignedValues(encoded);\n    const header = decodeHeader(decoder[0], decoder[1]);\n\n    const factorDegree = 10 ** header.precision;\n    const factorZ = 10 ** header.thirdDimPrecision;\n    const { thirdDim } = header;\n\n    let lastLat = 0;\n    let lastLng = 0;\n    let lastZ = 0;\n    const res = [];\n\n    let i = 2;\n    for (;i < decoder.length;) {\n        const deltaLat = toSigned(decoder[i]) / factorDegree;\n        const deltaLng = toSigned(decoder[i + 1]) / factorDegree;\n        lastLat += deltaLat;\n        lastLng += deltaLng;\n\n        if (thirdDim) {\n            const deltaZ = toSigned(decoder[i + 2]) / factorZ;\n            lastZ += deltaZ;\n            res.push([lastLat, lastLng, lastZ]);\n            i += 3;\n        } else {\n            res.push([lastLat, lastLng]);\n            i += 2;\n        }\n    }\n\n    if (i !== decoder.length) {\n        throw new Error('Invalid encoding. Premature ending reached');\n    }\n\n    return {\n        ...header,\n        polyline: res,\n    };\n}\n\nfunction decodeChar(char) {\n    const charCode = char.charCodeAt(0);\n    return DECODING_TABLE[charCode - 45];\n}\n\nfunction decodeUnsignedValues(encoded) {\n    let result = Num(0);\n    let shift = Num(0);\n    const resList = [];\n\n    encoded.split('').forEach((char) => {\n        const value = Num(decodeChar(char));\n        result |= (value & Num(0x1F)) << shift;\n        if ((value & Num(0x20)) === Num(0)) {\n            resList.push(result);\n            result = Num(0);\n            shift = Num(0);\n        } else {\n            shift += Num(5);\n        }\n    });\n\n    if (shift > 0) {\n        throw new Error('Invalid encoding');\n    }\n\n    return resList;\n}\n\nfunction decodeHeader(version, encodedHeader) {\n    if (+version.toString() !== FORMAT_VERSION) {\n        throw new Error('Invalid format version');\n    }\n    const headerNumber = +encodedHeader.toString();\n    const precision = headerNumber & 15;\n    const thirdDim = (headerNumber >> 4) & 7;\n    const thirdDimPrecision = (headerNumber >> 7) & 15;\n    return { precision, thirdDim, thirdDimPrecision };\n}\n\nfunction toSigned(val) {\n    // Decode the sign from an unsigned value\n    let res = val;\n    if (res & Num(1)) {\n        res = ~res;\n    }\n    res >>= Num(1);\n    return +res.toString();\n}\n\nfunction encode({ precision = DEFAULT_PRECISION, thirdDim = ABSENT, thirdDimPrecision = 0, polyline }) {\n    // Encode a sequence of lat,lng or lat,lng(,{third_dim}). Note that values should be of type BigNumber\n    //   `precision`: how many decimal digits of precision to store the latitude and longitude.\n    //   `third_dim`: type of the third dimension if present in the input.\n    //   `third_dim_precision`: how many decimal digits of precision to store the third dimension.\n\n    const multiplierDegree = 10 ** precision;\n    const multiplierZ = 10 ** thirdDimPrecision;\n    const encodedHeaderList = encodeHeader(precision, thirdDim, thirdDimPrecision);\n    const encodedCoords = [];\n\n    let lastLat = Num(0);\n    let lastLng = Num(0);\n    let lastZ = Num(0);\n    polyline.forEach((location) => {\n        const lat = Num(Math.round(location[0] * multiplierDegree));\n        encodedCoords.push(encodeScaledValue(lat - lastLat));\n        lastLat = lat;\n\n        const lng = Num(Math.round(location[1] * multiplierDegree));\n        encodedCoords.push(encodeScaledValue(lng - lastLng));\n        lastLng = lng;\n\n        if (thirdDim) {\n            const z = Num(Math.round(location[2] * multiplierZ));\n            encodedCoords.push(encodeScaledValue(z - lastZ));\n            lastZ = z;\n        }\n    });\n\n    return [...encodedHeaderList, ...encodedCoords].join('');\n}\n\nfunction encodeHeader(precision, thirdDim, thirdDimPrecision) {\n    // Encode the `precision`, `third_dim` and `third_dim_precision` into one encoded char\n    if (precision < 0 || precision > 15) {\n        throw new Error('precision out of range. Should be between 0 and 15');\n    }\n    if (thirdDimPrecision < 0 || thirdDimPrecision > 15) {\n        throw new Error('thirdDimPrecision out of range. Should be between 0 and 15');\n    }\n    if (thirdDim < 0 || thirdDim > 7 || thirdDim === 4 || thirdDim === 5) {\n        throw new Error('thirdDim should be between 0, 1, 2, 3, 6 or 7');\n    }\n\n    const res = (thirdDimPrecision << 7) | (thirdDim << 4) | precision;\n    return encodeUnsignedNumber(FORMAT_VERSION) + encodeUnsignedNumber(res);\n}\n\nfunction encodeUnsignedNumber(val) {\n    // Uses variable integer encoding to encode an unsigned integer. Returns the encoded string.\n    let res = '';\n    let numVal = Num(val);\n    while (numVal > 0x1F) {\n        const pos = (numVal & Num(0x1F)) | Num(0x20);\n        res += ENCODING_TABLE[pos];\n        numVal >>= Num(5);\n    }\n    return res + ENCODING_TABLE[numVal];\n}\n\nfunction encodeScaledValue(value) {\n    // Transform a integer `value` into a variable length sequence of characters.\n    //   `appender` is a callable where the produced chars will land to\n    let numVal = Num(value);\n    const negative = numVal < 0;\n    numVal <<= Num(1);\n    if (negative) {\n        numVal = ~numVal;\n    }\n\n    return encodeUnsignedNumber(numVal);\n}\n\nexport default {\n  decodeIsoline: decode,\n  geometryFunction\n}\n\nfunction geometryFunction(coordinates, layer, params) {\n\n  const geometry = new ol.geom.Circle(coordinates, params.range * 1000)\n\n  const origin = ol.proj.transform(coordinates, `EPSG:${layer.mapview.srid}`, 'EPSG:4326')\n\n  const _params = {\n    'range[type]': params['range[type]'],\n    'range[values]': params.range * 60,\n    transportMode: params.transportMode,\n    optimizeFor: params.optimizeFor,\n    origin: `${origin[1]},${origin[0]}`\n  }\n\n  params.lat = origin[1]\n  params.lon = origin[0]\n\n  if (params.dateISO) {\n    _params[params.reverseDirection && 'arrivalTime' || 'departureTime'] = new Date(params.dateISO).toISOString()\n  }\n\n  mapp.utils\n    .xhr(`${layer.mapview.host}/api/proxy?url=${encodeURIComponent(`https://isoline.router.hereapi.com/v8/isolines?${mapp.utils.paramString(_params)}&{HERE}`)}`)\n    .then(response => {\n\n      if (!response.isolines) {\n        console.log(response)\n        return alert('Query failed.')\n      }\n\n      const _coordinates = decode(response.isolines[0].polygons[0].outer)\n\n      _coordinates.polyline.forEach(p => p.reverse())\n\n      _coordinates.polyline.push(_coordinates.polyline[0])\n\n      const feature = layer.mapview.interaction.format.readFeature({\n        type: 'Feature',\n        geometry: {\n          type: 'Polygon',\n          coordinates: [_coordinates.polyline]\n        }\n      }, {\n        dataProjection: 'EPSG:4326',\n        featureProjection: 'EPSG:' + layer.mapview.srid\n      })\n\n      layer.mapview.interaction.source.clear();\n\n      layer.mapview.interaction.source.addFeature(feature);\n\n    })\n\n  return geometry\n}", "export default (hex, transparency) => {\n  if (isNaN(transparency)) return hex;\n\n  if (hex.length === 7) return hex + (transparency && parseInt(transparency * 255).toString(16) || '00');\n\n  if (hex.length === 4) return hex + parseInt(transparency * 15).toString(16);\n\n  return hex;\n}\n", "export default plugins => {\n\n  if (!Array.isArray(plugins)) return;\n  \n  return new Promise(resolveAll=>{\n\n    const promises = plugins.map(\n      plugin => \n        new Promise((resolve, reject) => \n          import(plugin)\n          .then(mod=> {\n            resolve(mod)\n          })\n          .catch(err=> {\n            console.error(err)\n            reject()\n          })))\n\n    Promise\n      .all(promises)\n      .then(mods=>{\n        resolveAll(mods)\n      })\n      .catch(resolveAll)\n\n  })\n}", "export default (coordinates, layer, params) => {\n\n  const geometry = new ol.geom.Circle(coordinates, params.minutes * 1000)\n\n  const origin = ol.proj.transform(coordinates, `EPSG:${layer.mapview.srid}`, 'EPSG:4326')\n\n  mapp.utils\n    .xhr(`https://api.mapbox.com/isochrone/v1/mapbox/${params.profile}/${origin.join(',')}?${mapp.utils.paramString({\n        contours_minutes: params.minutes,\n        //generalize: params.minutes,\n        polygons: true,\n        access_token: params.access_token\n      })}`)\n    .then(response => {\n\n      if (!response.features) return;\n\n      const feature = layer.mapview.interaction.format.readFeature({\n        type: 'Feature',\n        geometry: response.features[0].geometry\n      }, {\n        dataProjection: 'EPSG:4326',\n        featureProjection: 'EPSG:' + layer.mapview.srid\n      })\n\n      layer.mapview.interaction.source.clear();\n\n      layer.mapview.interaction.source.addFeature(feature);\n\n    })\n\n  return geometry\n\n}", "export default function (callback, options = {\n  //enableHighAccuracy: false,\n  //timeout: 3000,\n  //maximumAge: 0\n}) {\n\n  navigator.geolocation.getCurrentPosition(\n    callback,\n    err => console.error(err),\n    options)\n\n}", "export default function mergeDeep(target, ...sources) {\n\n  // No sources to merge.\n  if (!sources.length) {\n    return target;\n  }\n\n  const source = sources.shift();\n\n  if (isObject(target) && isObject(source)) {\n\n    // Iterate over object keys in source.\n    for (const key in source) {\n\n      if (isObject(source[key])) {\n\n        // Assign empty object on key.\n        if (!target[key]) Object.assign(target, { [key]: {} });\n\n        // Call recursive merge for target key object.\n        mergeDeep(target[key], source[key]);\n\n      } else {\n\n        // Assign key if not an object itself.\n        Object.assign(target, { [key]: source[key] });\n      }\n    }\n  }\n\n  return mergeDeep(target, ...sources);\n}\n\nfunction isObject(item) {\n  return (item && typeof item === 'object' && !Array.isArray(item));\n}", "// Create param string for XHR request.\nexport default params => Object.entries(params)\n  .filter(entry => entry[1] === 0 || !!entry[1])\n  .filter(entry => entry[1] !== '{}')\n\n  // Filter out zero length array and objects with empty object values.\n  .filter(entry => typeof entry[1] !== 'object'\n    || entry[1].length\n    || Object.values(entry[1]).some(val => typeof val === 'object' && Object.keys(val).length))\n\n  .map(entry => {\n\n    // if (Array.isArray(entry[1])) {\n\n    //   return entry[1].map(val => `${entry[0]}=${val}`).join('&')\n    // }\n\n    // Stringify non array objects.\n    if (typeof entry[1] === 'object' && !Array.isArray(entry[1])) {\n\n      entry[1] = JSON.stringify(entry[1])\n\n    }\n\n    return encodeURI(`${entry[0]}=${entry[1]}`)\n\n  }).join('&')", "export default promises => new Promise((resolveAll, rejectAll) => {\n\n  Promise\n    .all(promises)\n    .then(resolveAll)\n    .catch(error => {\n      console.error(error)\n      rejectAll(error)\n    })\n\n})", "export default _this => {\n  \n  // Assign empty object if not defined.\n  _this.queryparams = _this.queryparams || {}\n\n  // The layer queryparam must be true to support viewport params.\n  _this.queryparams.layer = _this.queryparams.layer || _this.viewport\n\n  // Assign fieldValues from the location to queryparams.\n  if (Array.isArray(_this.queryparams.fieldValues) && _this.location) {\n\n    // Iterate through the fieldValues array.\n    _this.queryparams.fieldValues.forEach(field => {\n\n      // Find entry in location infoj matching the field.\n      let entry = _this.location.infoj.find(entry => entry.field === field)\n\n      // Assign entry value as field value in queryparams.\n      _this.queryparams[field] = entry.value\n    })\n  }\n\n  // Get bounds from mapview.\n  const bounds = _this.viewport && _this.layer.mapview.getBounds();\n\n  // Get center from mapview.\n  const center = _this.queryparams.center && ol.proj.transform(\n    _this.layer.mapview.Map.getView().getCenter(),\n    `EPSG:${_this.layer.mapview.srid}`,\n    `EPSG:4326`)\n\n\n  return Object.assign({}, _this.queryparams, {\n\n    // Queries will fail if the template can not be accessed in workspace.\n    template: encodeURIComponent(_this.query),\n\n    // Layer filter can only be applied if the layer is provided as reference to a layer object in the layers list.\n    filter: _this.queryparams.filter && _this.layer.filter?.current,\n\n    // Locale param is only required for layer lookups.\n    locale: _this.queryparams.layer && _this.layer.mapview.locale.key,\n\n    // Locale param is only required for layer lookups.\n    layer: _this.queryparams.layer && _this.layer.key,\n\n    // ID will be taken if a location object is provided with the params.\n    id: _this.queryparams?.id && _this.location?.id,\n\n    // lat lng must be explicit or the the center flag param must be set.\n    lat: center && center[1],\n    lng: center && center[0],\n\n    // z will generated if the z flag is set in the params.\n    z: _this.queryparams?.z && _this.layer.mapview.Map.getView().getZoom(),\n\n    // Viewport will onlcy be generated if the viewport flag is set on the params.\n    viewport: bounds && [bounds.west, bounds.south, bounds.east, bounds.north, _this.layer.mapview.srid],\n\n    // The fieldValues array entries should not be part of the url params.\n    fieldValues: undefined\n\n  })\n}", "export default (style, feature) => {\n\n  if (!style) return;\n\n  // Iterate through icon layers\n  // This will be removed in the future in favour of the SVGsymbols.\n  if (Array.isArray(style.icon?.layers)) {\n\n    // Map array of styles to the style object.\n    style = style.icon.layers.map(layer => {\n\n      // Clone the style for each layer.\n      let styleClone = mapp.utils.clone(style)\n\n      // Assign the layer style to the cloned icon style.\n      Object.assign(styleClone.icon, layer)\n\n      // Return the cloned style to the style array.\n      return styleClone\n    })\n  }\n\n  // Create an OL style (or array of).\n  const olStyle = Array.isArray(style)\n    && style.map(style => getOlStyle(style, feature))\n    || getOlStyle(style, feature)\n  \n  return olStyle\n}\n\nfunction getOlStyle (style, feature) {\n\n  // Create OL fill\n  style.fill = style.fillColor && new ol.style.Fill({\n    color: mapp.utils.hexa(style.fillColor, style.fillOpacity)\n  })\n\n  // Create OL stroke\n  style.stroke = style.strokeColor && new ol.style.Stroke({\n    color: mapp.utils.hexa(style.strokeColor, style.strokeOpacity),\n    width: parseFloat(style.strokeWidth || 1)\n  })\n\n  // Create OL image\n  if (style.icon) {\n\n    // Assign feature properties for memoization\n    Object.assign(style.icon, feature && feature.getProperties())\n\n    // Calculate scale for icon render\n    let scale = style.icon.scale || 1\n    scale *= style.icon.clusterScale || 1\n    scale *= style.icon.zoomInScale || 1\n    scale *= style.icon.zoomOutScale || 1\n    scale *= style.icon.highlightScale || 1\n\n    // Create icon url from svgSymbols method if not defined as url or svg source\n    style.icon.url = style.icon.url || style.icon.svg || mapp.utils.svgSymbols[style.icon.type](style.icon, feature)\n\n    // Create OL icon\n    style.image = new ol.style.Icon({\n      src: style.icon.url,\n      crossOrigin: 'anonymous',\n      scale: scale,\n      anchor: style.icon.anchor || [0.5, 0.5],\n    })\n  }\n\n  // commented until we know what this does.\n  // if (style.image === null) return;\n\n  // Assign ol text style if label text is not undefined.\n  if (typeof style.label?.text !== 'undefined') {\n\n    style.text = new ol.style.Text({\n      font: style.label.font || '12px sans-serif',\n      text: String(style.label.text),\n      overflow: style.label.overflow,\n      stroke: style.label.strokeColor && new ol.style.Stroke({\n        color: style.label.strokeColor,\n        width: style.label.strokeWidth || 1\n      }),\n      fill: new ol.style.Fill({\n        color: style.label.fillColor || '#000'\n      })\n    })\n  }\n\n  return new ol.style.Style(style)\n}", "import { svg } from 'uhtml'\n\nconst xmlSerializer = new XMLSerializer()\n\nconst memoizedIcons = {\n  dot: new Map()\n}\n\nexport function dot(style) {\n\n  let lookup = Object.values({\n    fillColor: style.fillColor\n  }).reduce((a, b) => a + b)\n  \n  if (memoizedIcons.dot.has(lookup)) return memoizedIcons.dot.get(lookup)\n\n  let icon = svg.node`\n    <svg width=24 height=24 viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>\n      <circle cx=13 cy=13 r=10 fill='#333'></circle>\n      <circle cx=12 cy=12 r=10 fill=${style.fillColor || '#fff'}></circle>`\n\n  icon = `data:image/svg+xml,${encodeURIComponent(xmlSerializer.serializeToString(icon))}`\n\n  memoizedIcons.dot.set(lookup, icon)\n\n  return icon\n}\n\nexport function target(style) {\n\n  const icon = svg.node`\n    <svg width=24 height=24 viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>\n      <circle cx=13 cy=13 fill='#333' r=10 opacity=0.4></circle>\n      <circle cx=12 cy=12 r=10 fill=${style.fillColor || '#FFF'}>`\n\n  style.layers && Object.entries(style.layers).forEach(layer => {\n\n    icon.appendChild(svg.node`<circle cx=12 cy=12 r=${parseFloat(layer[0]) * 10} fill=${layer[1]}>`)\n  })\n\n  return `data:image/svg+xml,${encodeURIComponent(xmlSerializer.serializeToString(icon))}`\n}\n\nexport function triangle(style) {\n\n  const icon = svg.node`\n    <svg width=24 height=24 viewBox='${`0 0 24 24`}' xmlns='http://www.w3.org/2000/svg'>\n      <polygon\n        points=\"12,4.68 2,22 22,22\" \n        fill=\"#333\" stroke=\"#333\" opacity=0.4 stroke-opacity=0.4 stroke-width=3\n        stroke-linejoin=\"round\"/>`\n\n  icon.appendChild(svg.node`\n    <polygon\n      fill=${style.fillColor || '#FFF'} stroke=${style.fillColor || '#FFF'} stroke-width=2\n      points=\"12,4.68 2,22 22,22\"  stroke-linejoin=\"round\"/>`)\n\n  style.layers && Object.entries(style.layers).forEach(layer => {\n\n    function x(val, scale) {\n      return 12 + (val - 12) * scale\n    }\n\n    function y(val, scale) {\n      return 16 + (val - 16) * scale\n    }\n\n    let points = `${x(12, layer[0])},${y(4.68, layer[0])} ${x(2, layer[0])}, ${y(22, layer[0])} ${x(22, layer[0])}, ${y(22, layer[0])}`\n\n    icon.appendChild(svg.node`\n      <polygon\n        points=\"${points}\"\n        fill=${layer[1]}\n        stroke=${layer[1] || '#FFF'}\n        stroke-width=1\n        stroke-linejoin=\"round\"/>`)\n  })\n\n  return `data:image/svg+xml,${encodeURIComponent(xmlSerializer.serializeToString(icon))}`\n}\n\nexport function square(style) {\n\n  const icon = svg.node`\n    <svg width=24 height=24 viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>\n      <rect fill='#333' opacity=0.3 width=20 height=20 x=2 y=2 rx=1></rect>\n      <rect fill=${style.fillColor || '#FFF'} width=20 height=20 x=0 y=0 rx=1></rect>`\n\n  style.layers && Object.entries(style.layers).forEach(layer => {\n\n    icon.appendChild(svg.node`\n      <rect fill=${layer[1]}\n        width=${parseFloat(layer[0]) * 20}\n        height=${parseFloat(layer[0]) * 20}\n        x=${10*(1-parseFloat(layer[0]))}\n        y=${10*(1-parseFloat(layer[0]))} rx=${parseFloat(layer[0])}></rect>`)\n  })\n\n  return `data:image/svg+xml,${encodeURIComponent(xmlSerializer.serializeToString(icon))}`\n}\n\nexport function diamond(style) {\n\n  const icon = svg.node`\n    <svg width=24 height=24 viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>\n      <polygon\n        fill='#333'\n        opacity=0.3\n        points=\"12 0, 24 12, 12 24, 0 12\"></polygon>\n      <polygon\n        fill=${style.fillColor || '#FFF'}\n        points=\"12 0, 24 12, 12 24, 0 12\"></polygon>`\n\n  function s(val, scale) {\n    return 12 + (val - 12) * scale\n  }\n\n  style.layers && Object.entries(style.layers).forEach(layer => {\n    \n    let points = `${s(12, layer[0])} ${s(0, layer[0])},${s(24, layer[0])} ${s(12, layer[0])},${s(12, layer[0])} ${s(24, layer[0])}, ${s(0, layer[0])} ${s(12, layer[0])}`\n\n    icon.appendChild(svg.node`\n      <polygon\n        fill=${layer[1] || '#FFF'}\n        points=\"${points}\"></polygon>`)\n  })\n\n  return `data:image/svg+xml,${encodeURIComponent(xmlSerializer.serializeToString(icon))}`\n}\n\nexport function semiCircle(style) {\n\n  const icon = svg.node`\n    <svg width=30 height=30 viewBox='0 0 20 24' xmlns='http://www.w3.org/2000/svg'>\n      <defs>\n        <clipPath id=\"cut-off-shade\">\n          <rect x=\"0\" y=\"0\" width=\"24\" height=\"11\"/>\n        </clipPath>\n        <clipPath id=\"cut-off\">\n          <rect x=\"0\" y=\"0\" width=\"24\" height=\"10\"/>\n        </clipPath>\n      </defs>\n      <circle cx=\"11\" cy=\"10\" r=\"10\" clip-path=\"url(#cut-off-shade)\" fill=\"#333\" opacity=0.4></circle>\n      <circle cx=10 cy=10 r=10 fill=${style.fillColor || '#FFF'} clip-path=\"url(#cut-off-shade)\">`\n\n  style.layers && Object.entries(style.layers).forEach(layer => {\n    \n    icon.appendChild(svg.node`\n      <circle cx=10 cy=10 r=${parseFloat(layer[0]) * 10} fill=${layer[1]} clip-path=\"url(#cut-off-shade)\">`)\n\n  })\n\n  return `data:image/svg+xml,${encodeURIComponent(xmlSerializer.serializeToString(icon))}`\n}\n\nexport function markerLetter(style) {\n\n  const icon = svg.node`\n    <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path fill=\"${style.color}\"\n        d=\"M 12 1.969 C 7.878 1.969 4.813 5.239 4.813 9.328 C 4.813 10.554 5.222 12.189 6.244 14.028 C 8.289 17.504 12 22 12 22 C 12 22 16.055 17.504 18.099 14.028 C 19.122 12.189 19.341 10.963 19.341 9.328 C 19.341 5.239 16.054 1.969 12 1.969 Z\"/>\n      <circle cx=\"12.17192400568182\" cy=\"8.918683238636365\" r=\"5.109789772727275\" fill=\"rgb(255, 255, 255)\"/>\n      <text x=\"12\" y=\"12\" style=\"text-anchor: middle; font-weight: 600; font-size: 9px; font-family: sans-serif; fill: rgb(85, 85, 85);\">\n      ${style.letter}`\n\n  return `data:image/svg+xml,${encodeURIComponent(xmlSerializer.serializeToString(icon))}`\n}\n\nexport function markerColor(style) {\n\n  const icon = svg.node`\n    <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path style=\"opacity: 0.5;\" fill=\"${style.colorMarker}\"\n        d=\"M 10.797 1.238 C 6.308 1.238 2.716 4.83 2.716 9.32 C 2.716 11.116 3.165 12.463 4.287 14.483 C 6.532 18.3 9.952 23.234 9.952 23.234 C 9.952 23.234 15.063 18.3 17.308 14.483 C 18.43 12.463 18.879 11.116 18.879 9.32 C 18.879 4.83 15.287 1.238 10.797 1.238 Z\"/>\n      <path fill=\"${style.colorMarker}\"\n        d=\"M 10 1.238 C 5.51 1.238 2.144 4.83 2.144 9.32 C 2.144 10.667 2.593 12.463 3.716 14.483 C 5.961 18.3 10 23.238 10 23.238 C 10 23.238 14.491 18.3 16.736 14.483 C 17.859 12.463 18.1 11.116 18.1 9.32 C 18.1 4.83 14.49 1.238 10 1.238 Z\"/>\n      <circle cx=\"10.226\" cy=\"8.871\" r=\"5.612\" opacity=\"0.8\" fill=\"rgb(255, 255, 255)\"/>\n      <circle cx=\"10.226\" cy=\"8.871\" r=\"2.806\" opacity=\"0.8\" fill=\"${style.colorDot}\"/>`\n\n  return `data:image/svg+xml,${encodeURIComponent(xmlSerializer.serializeToString(icon))}`\n}\n\nexport function circle(style) {\n\n  const icon = svg.node`\n    <svg width=24 height=24 viewBox='0 0 30 30' xmlns='http://www.w3.org/2000/svg'>\n      <circle cx=16 cy=16 r=10\n        stroke=\"${style.strokeColor || '#333'}\"\n        stroke-width=\"${style.strokeWidth || 1}\"\n        fill=\"#ffffff33\">`\n\n  return `data:image/svg+xml,${encodeURIComponent(xmlSerializer.serializeToString(icon))}`\n}\n\nexport function template(icon, feature) {\n\n  const params = Object.assign({}, icon.params, feature.getProperties())\n\n  let template = icon.template\n\n  for (const entry of Object.entries(params)) {\n    template = template.replaceAll(entry[0], entry[1]);\n  }\n\n  return `data:image/svg+xml,${encodeURIComponent(template)}`\n}", "export default feature => {\n\n  const geometry = feature.getGeometry()\n\n  const coords = geometry.getCoordinates()\n\n  const type = geometry.getType()\n\n  if (!coords) return;\n\n  if (type === 'Point') return new ol.geom.Point(geometry.getCoordinates())\n\n  if (type === 'LineString') return new ol.geom.MultiPoint(geometry.getCoordinates())\n\n  var coordinates = type === 'MultiPolygon' && geometry.getCoordinates()[0] || geometry.getCoordinates()\n\n  var mp = new ol.geom.MultiPoint(coordinates[0])\n\n  return mp\n}", "const requestMap = new Map()\n\nexport default params => new Promise((resolve, reject) => {\n\n  if (!params) return reject()\n\n  params = typeof params === 'string' ? { url: params } : params\n\n  // Check whether a request with the same params has already been resolved.\n  if (params.cache && requestMap.has(params)) return resolve(requestMap.get(params))\n\n  const xhr = new XMLHttpRequest()\n\n  xhr.open(params.method || 'GET', params.url)\n\n  const requestHeader = {\n    'Content-Type': 'application/json'\n  }\n\n  Object.assign(requestHeader, params.requestHeader || {})\n\n  Object.entries(requestHeader).forEach(entry=>xhr.setRequestHeader(...entry))\n\n  xhr.responseType = params.responseType || 'json'\n\n  xhr.onload = e => {\n\n    if (e.target.status >= 300) {\n      reject(new Error(e.target.status))\n      return;\n    }\n\n    // Cache the response in the requestMap\n    params.cache && requestMap.set(params, e.target.response)\n\n    resolve(e.target.response)\n  }\n\n  // xhr.onerror = err => {\n  //   console.error(err)\n  //   reject(err);\n  // };\n\n  xhr.send(params.body)\n\n})", "// import from node modules\nimport {render, html, svg} from 'uhtml'\n\nconst areSetsEqual = (a, b) => a.size === b.size && [...a].every(value => b.has(value))\n\n// local import\nimport clone from './clone.mjs'\n\nconst compose = (...fns) => {\n  return arg => fns.reduce((acc, fn) => {\n    return fn(acc);\n  }, arg)\n}\n\n// Import ol script through scrit tag in promise.\nconst olScript = async() => await new Promise(async resolve => {\n\n  const script = document.createElement(\"script\")\n\n  script.type = 'application/javascript'\n\n  script.src = 'https://cdn.jsdelivr.net/npm/ol@v7.1.0/dist/ol.js'\n\n  script.onload = resolve\n\n  document.head.append(script)\n})\n\nimport convert from './convert.mjs'\n\nimport {copyToClipboard} from './copyToClipboard.mjs'\n\nimport {dataURLtoBlob} from './dataURLtoBlob.mjs'\n\nimport here from './here.mjs'\n\nimport {default as hexa} from './hexa.mjs'\n\nimport loadPlugins from './loadPlugins.mjs'\n\nimport mapboxGeometryFunction from './mapboxGeometryFunction.mjs'\n\nimport getCurrentPosition from './getCurrentPosition.mjs'\n\nimport merge from './merge.mjs'\n\nimport paramString from './paramString.mjs'\n\nimport promiseAll from './promiseAll.mjs'\n\nimport queryParams from './queryParams.mjs'\n\nimport style from './style.mjs'\n\nimport * as svgSymbols from './svgSymbols.mjs'\n\nimport {default as verticeGeoms} from './verticeGeoms.mjs'\n\nimport xhr from './xhr.mjs'\n\nexport default {\n  render,\n  html,\n  svg,\n  convert,\n  areSetsEqual,\n  clone,\n  compose,\n  copyToClipboard,\n  dataURLtoBlob,\n  getCurrentPosition,\n  here,\n  hexa,\n  loadPlugins,\n  mapboxGeometryFunction,\n  merge,\n  olScript,\n  paramString,\n  promiseAll,\n  queryParams,\n  style,\n  svgSymbols,\n  verticeGeoms,\n  xhr,\n}", "const hooks = {\n  current: {\n    layers: [],\n    locations: [],\n  },\n  set,\n  parse,\n  remove,\n  removeAll,\n  push,\n  filter,\n}\n\nexport default hooks\n\nfunction parse() {\n\n  // Take hooks from URL and store as current hooks.\n  window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, (match, key, value) => {\n\n    // string 'false' should be boolean false\n    if (value === 'false') {\n\n      hooks.current[key] = false\n      return;\n    }\n\n    // string 'true' should be boolean true\n    if (value === 'true') {\n\n      hooks.current[key] = true\n      return;\n    }\n\n    // layers and locations should always be arrays\n    if (key === 'locations' || key === 'layers') {\n\n      hooks.current[key] = decodeURI(value).split(',')\n      return;\n    }\n    \n    hooks.current[key] = value.includes(',') && decodeURI(value).split(',') || value\n  })\n\n  // Strip token from url.\n  if (hooks.current.token) {\n    window.history.replaceState(\n      {},\n      document.title,\n      window.location.href.replace(new RegExp(`token=${hooks.current.token}`), ''))\n    delete hooks.current.token\n  }\n}\n\n// Add kvp hook to mapp.hooks.current and URI.\nfunction set(_hooks) {\n\n  Object.assign(hooks.current, _hooks)\n\n  pushState()\n}\n\n// Remove hook from mapp.hooks.current and URI.\nfunction remove(key) {\n\n  if (Array.isArray(hooks.current[key])) {\n\n    hooks.current[key].length = 0\n\n  } else {\n\n    delete hooks.current[key]\n  }\n\n  pushState()\n}\n\n// Remove all hooks.\nfunction removeAll() {\n\n  Object.keys(hooks.current).forEach(key => remove(key))\n\n  pushState()\n}\n\n// Push key into an array hook.\nfunction push(key, val) {\n\n  if (hooks.current[key]) {\n\n    if (hooks.current[key].indexOf(val) < 0) hooks.current[key].push(val)\n\n  } else {\n\n    hooks.current[key] = [val]\n  }\n\n  pushState()\n}\n\n// Filter key from an array hook.\nfunction filter(key, val) {\n\n  hooks.current[key] = hooks.current[key].filter(el => el !== val)\n\n  pushState()\n}\n\n// Pushes changes to the url parameter.\nfunction pushState() {\n\n  try {\n    window.history.pushState({},\n      document.title,\n      `?${mapp.utils.paramString(hooks.current)}`)\n\n  } catch (me) {\n    console.log(me)\n  }\n}", "export default {\n  save: \"Save\",\n  cancel: \"Cancel\",\n  confirm_delete: \"Are you sure you want to delete this feature? This cannot be undone.\",\n  invalid_geometry: \"Invalid geometry\",\n  no_results: \"No results for this search\",\n}", "export default {\n  save: \"Speichern\",\n  cancel: \"Abbrechen\",\n  invalid_geometry: \"Ung\u00FCltige Geometrie\",\n  confirm_delete: \"Best\u00E4tigung des L\u00F6schvorgang\",\n}", "export default {\n  save: \"Enregister\",\n  cancel: \"Annuler\",\n  no_results: \"Aucun resultat pour cette recherche\",\n}", "export default {\n  save: \"Zapisz\",\n  cancel: \"Anuluj\",\n  no_results: \"Nic nie znaleziono\",\n}", "export default {\n  save: \"\u4FDD\u5B58\",\n  cancel: \"\u30AD\u30E3\u30F3\u30BB\u30EB\",\n  no_results: \"\u7D50\u679C\u306A\u3057\",\n}", "export default {\n  save: \"\uC800\uC7A5\",\n  cancel: \"\uCDE8\uC18C\",\n  no_results: \"\uAC80\uC0C9\uACB0\uACFC \uC5C6\uC74C\",\n}", "export default {\n  save: \"\u4FDD\u5B58\",\n  cancel: \"\u53D6\u6D88\",\n  no_results: \"\u672A\u627E\u5230\u76F8\u5173\u5730\u70B9\", \n}", "import en from './en.mjs'\n\nimport de from './de.mjs'\n\nimport fr from './fr.mjs'\n\nimport pl from './pl.mjs'\n\nimport ja from './ja.mjs'\n\nimport ko from './ko.mjs'\n\nimport zh from './cn.mjs'\n\nexport default {\n  en: en,\n  de: de,\n  fr: fr,\n  pl: pl,\n  ja: ja,\n  ko: ko,\n  zh: zh,\n}", "let promise, maplibregl = null\n\nasync function MaplibreGL() {\n\n  if (maplibregl) return new maplibregl.Map(...arguments);\n\n  if (!promise) promise = new Promise(async resolve => {\n\n    if (window.maplibregl) {\n\n      maplibregl = window.maplibregl\n\n      resolve()\n  \n      return\n    }\n\n    Promise\n      .all([\n        import('https://cdn.skypack.dev/pin/maplibre-gl@v1.15.3-OFxGDsJNZ70P0Qa7CzNE/mode=imports,min/optimized/maplibre-gl.js')\n      ])\n      .then(imports => {\n  \n        maplibregl = imports[0]\n\n        resolve()\n      })\n      .catch(error => {\n        console.error(error.message)\n        alert('Failed to load MaplibreGL library. Please reload the browser.')\n      })\n  \n  })\n\n  await promise\n\n  return new maplibregl.Map(...arguments);\n}\n\nexport default async layer => {\n\n  const container = mapp.utils.html.node`\n    <div style=\"position: absolute; width: 100%; height: 100%;\">`\n\n  layer.mbMap = await MaplibreGL({\n    container: container,\n    style: layer.mbStyle,\n    accessToken: layer.accessToken,\n    attributionControl: false,\n    boxZoom: false,\n    doubleClickZoom: false,\n    dragPan: false,\n    dragRotate: false,\n    interactive: false,\n    keyboard: false,\n    pitchWithRotate: false,\n    scrollZoom: false,\n    touchZoomRotate: false,\n    preserveDrawingBuffer: layer.preserveDrawingBuffer\n  });\n\n  layer.L =  new ol.layer.Layer({\n    zIndex: layer.zIndex || 0,\n    render: frameState => {\n\n      if (!layer.display) return\n      \n      // adjust view parameters in mapbox\n      layer.mbMap.jumpTo({\n        center: ol.proj.toLonLat(frameState.viewState.center),\n        zoom: frameState.viewState.zoom - 1,\n        bearing: (-frameState.viewState.rotation * 180) / Math.PI,\n        animate: false\n      })\n\n      // cancel the scheduled update & trigger synchronous redraw\n      if (layer.mbMap._frame) {\n        layer.mbMap._frame.cancel()\n        layer.mbMap._frame = null\n      }\n\n      layer.mbMap._render()\n\n      if (!layer.resized) {\n        layer.resized = true\n        window.setTimeout(()=>layer.mbMap.resize(), 500)\n      }\n\n      return layer.mbMap.getContainer();\n    }\n  })\n\n}", "let promise, mapboxgl = null\n\nasync function MapboxGL() {\n\n  if (mapboxgl) return new mapboxgl.Map(...arguments);\n\n  if (!promise) promise = new Promise(async resolve => {\n\n    if (window.mapboxgl) {\n\n      mapboxgl = window.mapboxgl\n\n      resolve()\n  \n      return\n    }\n\n    Promise\n      .all([\n        import('https://cdn.skypack.dev/pin/mapbox-gl@v2.8.2-2X0QssQ9YYqMIe57RkqH/mode=imports,min/optimized/mapbox-gl.js')\n      ])\n      .then(imports => {\n  \n        mapboxgl = imports[0]\n\n        resolve()\n      })\n      .catch(error => {\n        console.error(error.message)\n        alert('Failed to load MapboxGL library. Please reload the browser.')\n      })\n  \n  })\n\n  await promise\n\n  return new mapboxgl.Map(...arguments);\n}\n\nexport default async layer => {\n\n  const container = mapp.utils.html.node`\n    <div style=\"position: absolute; width: 100%; height: 100%;\">`\n\n  layer.mbMap = await MapboxGL({\n    accessToken: layer.accessToken,\n    container: container,\n    style: layer.mbStyle,\n  });\n\n  layer.L =  new ol.layer.Layer({\n    zIndex: layer.zIndex || 0,\n    render: frameState => {\n\n      if (!layer.display) return\n      \n      // adjust view parameters in mapbox\n      layer.mbMap.jumpTo({\n        center: ol.proj.toLonLat(frameState.viewState.center),\n        zoom: frameState.viewState.zoom - 1,\n        bearing: (-frameState.viewState.rotation * 180) / Math.PI,\n        animate: false\n      })\n\n      // cancel the scheduled update & trigger synchronous redraw\n      if (layer.mbMap._frame) {\n        layer.mbMap._frame.cancel()\n        layer.mbMap._frame = null\n      }\n\n      layer.mbMap._render()\n\n      if (!layer.resized) {\n        layer.resized = true\n        window.setTimeout(()=>layer.mbMap.resize(), 500)\n      }\n\n      return layer.mbMap.getContainer();\n    }\n  })\n\n}", "export default layer => {\n\n  const url = layer.proxy\n    && `${layer.mapview.host}/api/proxy?url=${layer.URI}`\n    || layer.URI\n\n  const source = new ol.source.OSM({\n    url: decodeURIComponent(url),\n    opaque: false,\n    transition: 0,\n  })\n\n  layer.L = new ol.layer.Tile({\n    source: source,\n    layer: layer,\n    zIndex: layer.style.zIndex || 0\n  })\n\n}", "export default layer => {\n\n  layer.reload = () => {\n\n    //source.clear()\n    source.refresh()\n  }\n\n  layer.clones = new Set()\n\n  // The snapSource is required for snap interactions on vector tile layer.\n  // The featureClasss is detrimental to the render performance.\n  layer.snapSource = new ol.source.VectorTile({\n    format: new ol.format.MVT({\n      featureClass: ol.Feature,\n      //idProperty: 'id'\n    }),\n    transition: 0,\n    cacheSize: 0,\n    tileUrlFunction\n  })\n  \n  // Define source for mvt layer.\n  const source = new ol.source.VectorTile({\n    format: new ol.format.MVT(),\n    transition: 0,\n    cacheSize: 0,\n    tileUrlFunction\n  })\n\n  function tileUrlFunction(tileCoord) {\n\n    const tableZ = layer.tableCurrent()\n\n    if ((!tableZ || !layer.display) && !layer.clones?.size) return source.clear()\n\n    const url = `${layer.mapview.host}/api/layer/mvt/${tileCoord[0]}/${tileCoord[1]}/${tileCoord[2]}?` + mapp.utils.paramString({\n      locale: layer.mapview.locale.key,\n      layer: layer.key,\n      srid: layer.mapview.srid,\n      table: tableZ,\n      filter: layer.filter && layer.filter.current\n    })\n\n    return url\n  }\n\n  layer.L = new ol.layer.VectorTile({\n    key: layer.key,\n    source: source,\n    renderBuffer: 200,\n    //renderMode: 'vector',\n    zIndex: layer.style.zIndex || 1,\n    style: mapp.layer.Style(layer)\n  })\n\n}", "export default layer => {\n\n  layer.highlight = true\n\n  layer.reload = loader\n\n  function loader () {\n\n    if (!layer.display) return;\n\n    layer.mapview.popup(null)\n\n    if (layer.xhr) layer.xhr.abort()\n\n    const tableZ = layer.tableCurrent()\n\n    if (!tableZ) {\n      layer.L.getSource().clear()\n      return;\n    }\n\n    const extent = ol.proj.transformExtent(\n      layer.mapview.Map.getView().calculateExtent(layer.mapview.Map.getSize()),\n      `EPSG:${layer.mapview.srid}`,\n      `EPSG:${layer.srid}`)\n\n    layer.xhr = new XMLHttpRequest()\n\n    layer.xhr.open(\n      \"GET\",\n      `${layer.mapview.host}/api/layer/cluster/${layer.mapview.Map.getView().getZoom()}?` +\n        mapp.utils.paramString({\n          locale: layer.mapview.locale.key,\n          layer: layer.key,\n          table: tableZ,\n          kmeans: layer.cluster_kmeans || undefined,\n          dbscan: layer.cluster_dbscan || undefined,\n          resolution: layer.cluster_resolution || undefined,\n          hexgrid: layer.cluster_hexgrid,\n          theme: layer.style.theme?.type,\n          size: layer.style.theme?.size,\n          cat: layer.style.theme?.fieldfx || layer.style.theme?.field,\n          cat_template: layer.style.theme?.cat_template,\n          aggregate: layer.style.theme?.aggregate,\n          label: layer.style.label?.field,\n          label_template: layer.style.label?.template,\n          filter: layer.filter?.current,\n          viewport: [extent[0], extent[1], extent[2], extent[3]],\n        })\n    );\n\n    layer.xhr.setRequestHeader('Content-Type', 'application/json')\n    layer.xhr.responseType = 'json'\n\n    // Draw layer on load event.\n    layer.xhr.onload = e => {\n  \n      if (e.target.status !== 200) return;\n\n      layer.max_size = e.target.response.reduce((max_size, f) => Math.max(max_size, f.properties.size || f.properties.count), 0)\n        \n      const features = e.target.response.map((f,i) => new ol.Feature(Object.assign({\n        id: `_${i+1}`,\n        geometry: new ol.geom.Point(\n          layer.srid == 4326 && ol.proj.fromLonLat([f.geometry.x, f.geometry.y]) || [f.geometry.x, f.geometry.y]\n        ),\n      },f.properties)))\n\n      layer.renderCount = 0\n\n      layer.L.setSource(new ol.source.Vector({\n        useSpatialIndex: false,\n        features: features,\n      }))\n    }\n\n    layer.xhr.send()\n  }\n   \n  layer.L = new ol.layer.Vector({\n    key: layer.key,\n    layer: layer,\n    zIndex: layer.style.zIndex || 10,\n    style: mapp.layer.Style(layer)\n  })\n\n  if (layer.debug) {\n\n    layer.L.on('prerender',()=>{\n      console.log(`${layer.key} - prerender ${layer.renderCount++}`)\n    })\n  \n    layer.L.on('postrender',()=>{\n      console.log(`${layer.key} - postrender ${layer.renderCount++}`)\n    })\n  }\n\n  layer.mapview.Map.getTargetElement().addEventListener('changeEnd', loader)\n}", "export default layer => {\n\n  layer.format = new ol.format.GeoJSON();\n\n  layer.reload = loader;\n  \n  function loader () {\n\n    mapp.utils.xhr(\n      `${layer.mapview.host}/api/layer/geojson?${mapp.utils.paramString({\n          locale: layer.mapview.locale.key,\n          layer: layer.key,\n          table: layer.table,\n          filter: layer.filter && layer.filter.current,\n        })}`)\n        .then(response => {\n\n          if (response === null) return;\n\n          const features = response.map((f) =>\n            new ol.Feature({\n              id: f.id,\n              geometry: layer.format.readGeometry(f.geometry, {\n                dataProjection: \"EPSG:\" + layer.srid,\n                featureProjection: \"EPSG:\" + layer.mapview.srid,\n              }),\n              properties: f.properties\n            }))\n\n          let source = new ol.source.Vector({\n            features: features\n          })\n\n          if (layer.clusterSource) {\n\n            source = new ol.source.Cluster({\n              distance: layer.clusterSource.distance || 50,\n              source\n            })\n          }\n          \n          layer.L.setSource(source)\n\n        })\n\n  }\n\n  layer.L = new ol.layer[layer.vectorImage && 'VectorImage' || 'Vector']({\n    key: layer.key,\n    zIndex: layer.zIndex || 1,\n    style: layer.styleFunction || mapp.layer.Style(layer)\n  })\n\n}", "export default layer => {\n\n  layer.grid_size = Object.values(layer.grid_fields)[0];\n\n  layer.grid_color = Object.values(layer.grid_fields)[1];\n\n  layer.grid_ratio = false;\n\n  layer.reload = loader\n\n  function loader () {\n\n    if (!layer.display) return;\n\n    if (layer.xhr) layer.xhr.abort();\n\n    const tableZ = layer.tableCurrent();\n\n    if (!tableZ) {\n      layer.L.getSource().clear()\n      return;\n    }\n\n    const extent = ol.proj.transformExtent(\n      layer.mapview.Map.getView().calculateExtent(layer.mapview.Map.getSize()),\n      `EPSG:${layer.mapview.srid}`,\n      `EPSG:${layer.srid}`)\n\n    layer.xhr = new XMLHttpRequest()\n\n    layer.xhr.open(\n      \"GET\",\n      `${layer.mapview.host}/api/layer/grid?` +\n        mapp.utils.paramString({\n          locale: layer.mapview.locale.key,\n          layer: layer.key,\n          table: tableZ,\n          size: layer.grid_size,\n          color: layer.grid_color,\n          viewport: [extent[0], extent[1], extent[2], extent[3]],\n        })\n    );\n\n    layer.xhr.setRequestHeader('Content-Type', 'application/json');\n    layer.xhr.responseType = 'json';\n\n    // Draw layer on load event.\n    layer.xhr.onload = e => {\n\n      if (e.target.status !== 200) return;\n\n      const data = e.target.response;\n    \n      layer.sizeAvg = 0;\n      layer.colorAvg = 0;\n    \n      const dots = data.map(record => {\n    \n        // 0 lat\n        // 1 lon\n        // 2 size\n        // 3 color\n        if (parseFloat(record[2]) > 0) {\n          record[2] = isNaN(record[2]) ? record[2] : parseFloat(record[2]);\n          record[3] = isNaN(record[3]) ? record[3] : parseFloat(record[3]);\n    \n          // Check for grid_ratio\n          if (layer.grid_ratio && record[3] > 0) {\n\n            //console.log(`${record[3]} / ${record[2]}`)\n            record[3] /= record[2]\n          }\n    \n          layer.sizeAvg += parseFloat(record[2]);\n          layer.colorAvg += isNaN(record[3]) ? 0 : parseFloat(record[3]);\n    \n          return new ol.Feature({\n            geometry: new ol.geom.Point(\n              ol.proj.fromLonLat([record[0], record[1]])),\n            properties: {\n              size: parseFloat(record[2]),\n              color: isNaN(record[3]) ? record[3] : parseFloat(record[3])\n            }\n          });\n    \n        }\n      });\n    \n      // Apply maths function to a column in a two dimensional array of numbers.\n      function getMath(arr, idx, type) {\n    \n        // Filter numbers from array column idx.\n        const numbers = arr.filter(n => isFinite(n[idx]));\n    \n        // Apply math function to the filtered numbers array.\n        return Math[type].apply(null, numbers.map(val => val[idx]));\n      }\n    \n      layer.sizeMin = getMath(data, 2, 'min');\n      layer.sizeAvg /= dots.length;\n      layer.sizeMax = getMath(data, 2, 'max');\n    \n      layer.colorMin = getMath(data, 3, 'min');\n      layer.colorAvg /= dots.length;\n      layer.colorMax = getMath(data, 3, 'max');\n    \n      layer.colorBins = [];\n    \n      let n = layer.style.range.length;\n    \n      for (var i = 1; i < n; i++) {\n    \n        if (i < (n / 2)) {\n          layer.colorBins.push(layer.colorMin + ((layer.colorAvg - layer.colorMin) / (n / 2) * i));\n        }\n    \n        if (i === (n / 2)) {\n          layer.colorBins.push(layer.colorAvg);\n        }\n    \n        if (i > (n / 2)) {\n          layer.colorBins.push(layer.colorAvg + ((layer.colorMax - layer.colorAvg) / (n / 2) * (i - (n / 2))));\n        }\n    \n      }\n\n      // source.addFeatures(dots);\n      layer.L.setSource(new ol.source.Vector({\n        useSpatialIndex: false,\n        features: dots,\n      }))\n\n      layer.style.legend?.dispatchEvent(new Event('update'))\n    }\n\n    layer.xhr.send()\n\n  }\n\n  layer.L = new ol.layer.Vector({\n    zIndex: layer.style.zIndex || 1,\n    style: feature => {\n\n      const properties = feature.getProperties().properties;\n\n      // Distribute size between min, avg and max.\n      const size = properties.size <= layer.sizeAvg ?\n        7 + 7 / layer.sizeAvg * properties.size :\n        14 + 7 / (layer.sizeMax - layer.sizeAvg) * (properties.size - layer.sizeAvg);\n\n        // set to no value colour.\n      properties.hxcolor = layer.style.hxcolor || '#C0C0C0';\n\n      if (parseFloat(properties.color)) {\n\n        // set to min colour.\n        properties.hxcolor = layer.style.range[0];\n\n        for (let i = 0; i < layer.colorBins.length; i++) {\n\n          // Break iteration is cat value is below current cat array value.\n          if (properties.color < layer.colorBins[i]) break;\n\n          // Set cat_style to current cat style after value check.\n          properties.hxcolor = layer.style.range[i + 1];\n        }\n\n      }\n\n      return mapp.utils.style({\n        icon: {\n          type: 'dot',\n          fillColor: properties.hxcolor,\n          scale: size / 30\n        }\n      })\n    }\n  })\n\n  layer.mapview.Map.getTargetElement().addEventListener('changeEnd', loader)\n}", "let promise\n\nexport default async layer => {\n\n  if (!promise) promise = new Promise(async resolve => {\n\n    const loader = new google.maps.plugins.loader.Loader({\n      apiKey: layer.apiKey,\n      version: \"weekly\",\n    });\n\n    await loader.load()\n\n    resolve()\n  \n  })\n\n  await promise\n\n  const container = mapp.utils.html.node`\n    <div style=\"position: absolute; width: 100%; height: 100%; transition: opacity .25s ease-in-out;\">`\n\n  layer.gmap = new google.maps.Map(container, {\n    disableDefaultUI: true,\n    keyboardShortcuts: false,\n    draggable: false,\n    disableDoubleClickZoom: true,\n    scrollwheel: false,\n    streetViewControl: false,\n  });\n\n  let timeout, zoom;\n\n  layer.L =  new ol.layer.Layer({\n    zIndex: 0,\n    render: frameState => {\n\n      if (!layer.display) return\n\n      if (zoom !== frameState.viewState.zoom) container.style.opacity = 0;\n\n      zoom = frameState.viewState.zoom\n\n      var center = ol.proj.toLonLat(frameState.viewState.center);\n\n      layer.gmap.setCenter({lat: center[1], lng: center[0]})\n      layer.gmap.setZoom(frameState.viewState.zoom);\n\n      timeout && clearTimeout(timeout)\n\n      timeout = setTimeout(()=>{container.style.opacity = 1;}, 400)\n\n      return container\n    }\n  })\n\n}", "import mbtiles from './mbtiles.mjs'\n\nimport mapboxgl from './mapboxgl.mjs'\n\nimport tiles from './tiles.mjs'\n\nimport mvt from './mvt.mjs'\n\nimport cluster from './cluster.mjs'\n\nimport geojson from './geojson.mjs'\n\nimport grid from './grid.mjs'\n\nimport googlemaps from './googlemaps.mjs'\n\nexport default {\n  mbtiles,\n  mapboxgl,\n  tiles,\n  mvt,\n  cluster,\n  geojson,\n  grid,\n  googlemaps\n}", "import format from './format/_format.mjs'\n\nexport default async layer => {\n  \n  // Assign layer render.\n  format[layer.format] && await format[layer.format](layer)\n  \n  Object.assign(layer, {\n    show,\n    showCallbacks: [],\n    hide,\n    hideCallbacks: [],\n    tableCurrent,\n    tableMax,\n    tableMin,\n    zoomToExtent,\n  })\n\n  // Set layer filter.\n  layer.filter = Object.assign({\n    current: {}\n  }, layer.filter)\n\n  layer.style.opacity && layer.L.setOpacity(layer.style.opacity)\n\n  // Set the first theme from themes array as layer.style.theme\n  if (layer.style && layer.style.themes) {\n\n    layer.style.theme = layer.style.theme\n      || layer.style.themes[Object.keys(layer.style.themes)[0]];\n  }\n\n  // Go through the layer keys to check for plugins.\n  Object.keys(layer).forEach((key) => {\n    mapp.layer[key] && mapp.layer[key](layer)\n    mapp.plugins[key] && mapp.plugins[key](layer);\n  });\n\n  return layer\n}\n\nfunction show() {\n\n  this.display = true\n\n  // Remove OL layer from mapview.\n  this.mapview.Map.removeLayer(this.L)\n\n  // Add OL layer to mapview.\n  this.mapview.Map.addLayer(this.L)\n\n  // Reload layer data if available.\n  typeof this.reload === 'function' && this.reload()\n\n  // Add layer attribution to mapview attribution.\n  this.mapview.attribution?.check()\n\n  // Push the layer into the layers hook array.\n  this.mapview.hooks && mapp.hooks.push('layers', this.key)\n\n  // Execute showCallbacks\n  this.showCallbacks?.forEach(fn => typeof fn === 'function' && fn(this))\n}\n\nfunction hide() {\n\n  this.display = false\n\n  // Remove OL layer from mapview.\n  this.mapview.Map.removeLayer(this.L)\n\n  // Remove layer attribution from mapview attribution.\n  this.mapview.attribution?.check()\n\n  // Filter the layer from the layers hook array.\n  this.mapview.hooks && mapp.hooks.filter('layers', this.key)\n\n  // Execute hideCallbacks\n  this.hideCallbacks?.forEach(fn => typeof fn === 'function' && fn(this))\n}\n\nfunction tableCurrent() {\n\n  // A layer must have either a table or tables configuration.\n  if (!this.tables) return this.table\n\n  let\n    table,\n\n    // Get current zoom level from mapview.\n    zoom = parseInt(this.mapview.Map.getView().getZoom()),\n\n\n    // Get zoom level keys from layer.tables object.\n    zoomKeys = Object.keys(this.tables),\n\n    // Get first zoom level key from array.\n    minZoomKey = parseInt(zoomKeys[0]),\n    maxZoomKey = parseInt(zoomKeys[zoomKeys.length - 1])\n     \n  // Get the table for the current zoom level.\n  table = this.tables[zoom]\n\n  // Get the first table if the current zoom level is smaller than the min.\n  table = zoom < minZoomKey ? this.tables[minZoomKey] : table\n\n  // Get the last table if the current zoom level is larger than the max.\n  table = zoom > maxZoomKey ? this.tables[maxZoomKey] : table\n\n  return table\n}\n\nfunction tableMax() {\n\n  // A layer must have either a table or tables configuration.\n  if (!this.tables) return this.table\n\n  // Return first value from (reversed) tables object which is not null.\n  return Object.values(this.tables).reverse().find(val => !!val)\n}\n\nfunction tableMin() {\n\n  // A layer must have either a table or tables configuration.\n  if (!this.tables) return this.table\n\n  // Return first value from tables object which is not null.\n  return Object.values(this.tables).find(val => !!val)\n}\n\nasync function zoomToExtent(params) {\n  \n  let response = await mapp.utils.xhr(`${this.mapview.host}/api/query/layer_extent?`+\n    mapp.utils.paramString({\n      dbs: this.dbs,\n      locale: this.mapview.locale.key,\n      layer: this.key,\n      table: this.table || Object.values(this.tables)[0] || Object.values(this.tables)[1],\n      geom: this.geom,\n      proj: this.srid,\n      srid: this.mapview.srid,\n      filter: this.filter.current\n    }))\n\n  if (!response) {\n    return false;\n  }\n\n  const bounds = /\\((.*?)\\)/.exec(response.box2d)[1].replace(/ /g, ',')\n\n  this.mapview\n    .fitView(bounds.split(',')\n    .map(coords => parseFloat(coords)), params)\n\n  return true;\n}", "export default layer => {\n\n  layer.hover.show = feature => {\n\n    if (!layer.mapview.interaction.current) return;\n\n    // Store current highlight key.\n    let key = layer.mapview.interaction.current.key.toString()\n\n    let paramString = mapp.utils.paramString({\n      dbs: layer.dbs,\n      locale: layer.mapview.locale.key,\n      layer: layer.key,\n      filter: layer.filter?.current,\n      template: layer.hover.query || 'infotip',\n      qID: layer.qID,\n      id: layer.highlight,\n      table: layer.tableCurrent(),\n      geom: layer.geom,\n      field: layer.hover.field,\n      coords: layer.format === 'cluster'\n        && ol.proj.transform(\n          feature.getGeometry().getCoordinates(),\n          `EPSG:${layer.mapview.srid}`,\n          `EPSG:${layer.srid}`)\n    })\n\n    mapp.utils.xhr(`${layer.mapview.host}/api/query?${paramString}`)\n      .then(response => {\n\n        // Check whether highlight feature is still current.\n        if(layer.mapview.interaction?.current?.key !== key) return;\n\n        // Check whether cursor has position (in map).\n        if (!layer.mapview.position) return;\n\n        // Check whether there is a response to display.\n        if (!response) return;\n\n        // Check whether the response label field has a value.\n        if (response.label == '') return;\n\n        // Display the response label as infotip.\n        layer.mapview.infotip(response.label)\n      })\n  }\n\n}", "const filter = {\n  ni\n}\n\nexport default function(filters, feature) {\n\n  // check whether at least one filter catches feature.\n  return Object.keys(filters).some(key => {\n\n    // get feature type from first key.\n    let type = Object.keys(filters[key])[0]\n\n    // return filter method if exists.\n    return filter[type] && filter[type](key, filters[key][type], feature)\n  })\n}\n\nfunction ni(key, ni, feature) {\n\n  // check whether feature properties key is in ni set.\n  return new Set(ni).has(feature.properties[key])\n}", "export default layer => feature => {\n\n  feature.properties = feature.getProperties()\n\n  // Geojson features have a properties property\n  if (feature.properties.properties) {\n\n    Object.assign(feature.properties, feature.properties.properties)\n    delete feature.properties.properties\n  }\n\n  // A filter flag is set either in the layer styles object or in the theme.\n  if ((layer.style.filter || layer.style.theme?.filter)\n\n    // The current filter contains field keys.\n    && layer.filter.current && Object.keys(layer.filter.current).length\n    \n    // Check whether the feature should be caught by layer feature filter.\n    && mapp.layer.featureFilter(layer.filter.current, feature)) {\n\n      // The feature will not be visible.\n      return null\n  }\n\n  // Assign properties.count from length of cluster layer features array.\n  if (layer.type === 'cluster') {\n\n    feature.properties.count = feature.get('features').length\n  }\n\n  // The featureLookup is an array of features\n  if (layer.featureLookup) {\n\n    // Find feature with matching ID property in the featureLookup\n    const lookupFeature = layer.featureLookup.find(f=> f[layer.featureLookupId || 'id'] === feature.properties.id)\n\n    // Do not style features not found in the lookup array.\n    if (!lookupFeature) return;\n\n    // Assign feature.properties from the lookupFeature for subsequent styling\n    Object.assign(feature.properties, lookupFeature)\n  }\n  \n  // Assign feature style\n  feature.style =  Object.assign({},\n    layer.style.default,\n\n    // Assign cluster style\n    feature.properties.count && feature.properties.count > 1 && layer.style.cluster || {},\n\n    // Assign theme style\n    layer.style.theme?.style || {})\n\n  feature.geometryType = feature.getGeometry().getType()\n\n  // Point features must have a style.icon\n  if (feature.geometryType === 'Point') {\n\n    // WARN!\n    feature.style.marker && console.warn('style.marker will be removed in v4 release. please use style.icon')\n\n    // The style must be cloned as icon if not otherwise defined to prevent circular reference\n    feature.style.icon = Object.assign({}, feature.style.icon || mapp.utils.clone(feature.style))\n\n  } else {\n\n    // Other geometry types must not have a style.icon.\n    delete feature.style.icon\n  }\n\n  // Scale are only valid within style.icon\n  delete feature.style.scale\n  delete feature.style.clusterScale\n\n  // Apply theme style to style object.\n  mapp.layer.themes[layer.style.theme?.type] && mapp.layer.themes[layer.style.theme.type](layer.style.theme, feature)\n\n  // Cluster icons will NOT scale different to single locations if the clusterScale is not set in the cluster style.\n  if (feature.style.icon?.clusterScale) {\n\n    // The clusterScale will be added to the icon scale.\n    feature.style.icon.clusterScale = layer.style.logScale ?\n\n      // A natural log will be applied to the cluster scaling.\n      Math.log(feature.style.icon.clusterScale) / Math.log(layer.max_size) * Math.log(feature.properties.size || feature.properties.count) :\n\n      // A fraction of the icon clusterScale will be added to the items scale for all but the biggest cluster location.\n      1 + (feature.style.icon.clusterScale / layer.max_size * (feature.properties.size || feature.properties.count))\n  }\n\n  // Setting a zoomInScale will INCREASE the scale of icons on higher zoom levels.\n  if (feature.style.icon?.zoomInScale) {\n\n    feature.style.icon.zoomInScale *= layer.mapview.Map.getView().getZoom()\n  }\n\n  // Setting a zoomOutScale will DECREASE the scale of icons on higher zoom levels.\n  if (feature.style.icon?.zoomOutScale) {\n\n    feature.style.icon.zoomOutScale /= layer.mapview.Map.getView().getZoom()\n  }\n\n  const featureID = feature.get('id') || feature.getId()\n\n  // Apply highlight style to features which are highlighted.\n  if (layer.highlight && layer.highlight === featureID){\n\n    const highlightStyle = mapp.utils.clone(layer.style.highlight)\n\n    if (feature.geometryType === 'Point') {\n\n      // The highlightStyle must be cloned as icon if not otherwise defined to prevent circular reference\n      highlightStyle.icon = highlightStyle.icon || highlightStyle.marker || mapp.utils.clone(highlightStyle)\n\n      highlightStyle.icon.highlightScale = highlightStyle.icon.scale || 1\n\n      // Remove scales to prevent assignment of highlight scale to the icon's base scale\n      delete highlightStyle.icon.scale\n      delete highlightStyle.scale\n    } else {\n\n      // Delete icon from highlight style if feature is not a point.\n      delete highlightStyle.icon\n    }\n\n    mapp.utils.merge(feature.style, highlightStyle)\n  }\n\n  // Assign label style.\n  if (layer.style.label?.display) {\n\n    // Merge layer label style into feature.style.\n    mapp.utils.merge(feature.style, {label: layer.style.label})\n\n    // Assign count value as text if label.count is truthy.\n    feature.style.label.text = feature.style.label.count && feature.properties.count > 1 && feature.properties.count || undefined\n\n    // Assign field property value as label if text is undefined.\n    if (typeof feature.style.label.text === 'undefined') {\n      feature.style.label.text = feature.properties[feature.style.label.field];\n    }      \n\n    // Assign label property value as label if text is undefined.\n    if (typeof feature.style.label.text === 'undefined') {\n      feature.style.label.text = feature.properties.label;\n    }\n\n    // Delete style.label if minZoom exceeds current zoom.\n    feature.style.label?.minZoom > layer.mapview.Map.getView().getZoom() && delete feature.style.label;\n\n    // Delere style.label if current zoom exceeds maxZoom.\n    feature.style.label?.maxZoom < layer.mapview.Map.getView().getZoom() && delete feature.style.label;\n  }\n\n  // Check whether the feature referenced in mapview.locations\n  if (layer.mapview?.locations[`${layer.key}!${feature.properties.id}`]) {\n\n    layer.style.selected &&\n      mapp.utils.merge(feature.style, layer.style.selected, {\n        zIndex: Infinity,\n      });\n\n    if (layer.style.selected === null) return;\n  }\n\n  return mapp.utils.style(feature.style, feature)\n}", "export default function(theme, feature) {\n\n  var catValue = feature.properties.cat || feature.properties[theme.field]\n\n  var catStyle = theme.cat && (theme.cat[catValue]?.style || theme.cat[catValue])\n\n  if (catValue && typeof catStyle === 'undefined') {\n\n    var entry = Object.values(theme.cat)\n      .filter(entry => Array.isArray(entry.keys))\n      .find(entry => entry.keys.includes(catValue))\n\n    var catStyle = mapp.utils.clone(entry?.style || entry)\n\n    catStyle && delete catStyle.label\n  }\n\n  if (typeof catStyle !== 'undefined') {\n\n    // WARN!\n    catStyle.marker && console.warn('style.marker will be removed in v4 release. please use style.icon')\n\n    // Assign icon style from the marker value or the clone the style object as icon if no marker or icon has been defined.\n    catStyle.icon = feature.geometryType === 'Point' && mapp.utils.clone(catStyle.icon || catStyle)\n\n    delete catStyle.label\n\n    mapp.utils.merge(feature.style, catStyle)\n  }\n}", "export default function(theme, feature) {\n\n  if (!theme.lookup) {\n\n    theme.lookup = {}\n    theme.boxes = []\n    theme.index = 0\n  }\n\n  // The feature field property value already has a style assigned.\n  if (theme.lookup[feature.properties[theme.field]]) {\n\n    // Assign style from lookup object.\n    var catStyle = theme.lookup[feature.properties[theme.field]]\n    mapp.utils.merge(feature.style, catStyle)\n    return;\n  }\n\n  // Get feature bounding box from geometry extent.\n  let bbox = {\n    extent: feature.getGeometry().getExtent()\n  }\n\n  // add box to visual check layer.\n  // theme.source.addFeature(new ol.Feature(new ol.geom.Polygon.fromExtent(bbox.extent)))\n\n  // Find intersecting bounding boxes with their assigned cat index.\n  let intersects = theme.boxes.filter(b => !(bbox.extent[0] > b.extent[2]\n    || bbox.extent[2] < b.extent[0]\n    || bbox.extent[1] > b.extent[3]\n    || bbox.extent[3] < b.extent[1]))\n\n  // Push the current bbox into the array.\n  theme.boxes.push(bbox)\n\n  // Create a set of cat indices from intersecting bounding boxes.\n  let set = new Set(intersects.map(b => b.themeIdx))\n\n  // Increase the cat indix.\n  theme.index++\n\n  // Reset cat index to 0 if the index reaches the length of the cat array.\n  if (theme.index === theme.cat_arr.length) theme.index = 0\n\n  // Check whether the set of intersecting bounding boxes has NOT the cat index.\n  let i = !(set.has(theme.index)) && parseInt(theme.index)\n\n  // Index is not available.\n  if (i === false) {\n\n    // Iterate through the cat array.\n    for (let free = 0; free < theme.cat_arr.length; free++) {\n\n      if (!set.has(free)) {\n\n        // Assign free index and break loop.\n        i = free;\n        break;\n      }\n    }\n  }\n\n  // No index is available.\n  if (i === false) {\n\n    // Assign cat index.\n    i = parseInt(theme.index)\n  }\n\n  // Assign index to the bounding box which is stored in the array of bounding boxes.\n  bbox.themeIdx = i\n\n  // Get the JSON style from cat array via index.\n  var catStyle = theme.cat_arr[i]\n\n  // Assign the JSON style to the lookup object for the feature field property value.\n  theme.lookup[feature.properties[theme.field]] = catStyle\n\n  // Merge the cat style with the feature style.\n  mapp.utils.merge(feature.style, catStyle)\n}", "export default function(theme, feature) {\n\n  var catValue = parseFloat(feature.properties.cat || feature.properties[theme.field])\n\n  if (!isNaN(catValue)) {\n\n    // Iterate through cat array.\n    for (let i = 0; i < theme.cat_arr.length; i++) {\n\n      // Break iteration is cat value is below current cat array value.\n      if (catValue < parseFloat(theme.cat_arr[i].value)) break;\n\n      // Set cat_style to current cat style after value check.\n      var catStyle = mapp.utils.clone(theme.cat_arr[i].style || theme.cat_arr[i])\n\n      delete catStyle.label\n    }\n\n    if (catStyle) {\n\n      // WARN!\n      catStyle.marker && console.warn('style.marker will be removed in v4 release. please use style.icon')\n\n      // Assign icon style from thparams.fillOpacity || 1e marker value or the clone the style object as icon if no marker or icon has been defined.\n      catStyle.icon = feature.geometryType === 'Point' && mapp.utils.clone(catStyle.icon || catStyle)\n\n      delete catStyle.label\n\n      mapp.utils.merge(feature.style, catStyle)\n    }\n  }\n}", "import decorate from './decorate.mjs'\n\nimport hover from './hover.mjs'\n\nimport featureFilter from './featureFilter.mjs'\n\nimport Style from './Style.mjs'\n\nimport categorized from './themes/categorized.mjs'\n\nimport distributed from './themes/distributed.mjs'\n\nimport graduated from './themes/graduated.mjs'\n\nexport default {\n  decorate,\n  hover,\n  featureFilter,\n  Style,\n  themes: {\n    categorized,\n    distributed,\n    graduated\n  }\n}", "export default location => {\n\n  Object.assign(location, {\n    flyTo,\n    Layers: [],\n    remove,\n    removeCallbacks: [],\n    trash,\n    update,\n    updateCallbacks: [],\n  })\n\n  return location;\n}\n\nfunction remove() {\n\n  // Checks may be performed after async oprations\n  // whether a location has already been removed.\n  delete this.remove\n\n  this.layer.mapview.hooks && mapp.hooks.filter('locations', this.hook)\n\n  delete this.layer.mapview.locations[this.hook]\n\n  this.view instanceof HTMLElement && this.view.remove()\n\n  this.Layers?.forEach(\n    L => this.layer.mapview.Map.removeLayer(L))\n\n  this.layer.mapview.interaction.type !== 'highlight'\n    && this.layer.mapview.interactions.highlight()\n\n  if (this.layer.format === 'mvt') {\n\n    this.layer.L.changed()\n  } else {\n\n    this.layer.reload && this.layer.reload()\n  } \n\n  this.removeCallbacks?.forEach(\n    fn => typeof fn === 'function' && fn(this))\n}\n\nasync function update() {\n\n  const newValues = {}\n\n  this.infoj\n    .filter(entry => typeof entry.newValue !== 'undefined')\n    .forEach(entry => {\n\n      if(entry.type === 'integer') entry\n        .newValue = !isNaN(parseInt(entry.newValue)) ? entry.newValue : null;\n\n      if(entry.type === 'numeric') entry\n        .newValue = !isNaN(parseFloat(entry.newValue)) ? entry.newValue : null;\n           \n      Object.assign(newValues, { [entry.field] : entry.newValue })\n    })\n\n  if (!Object.keys(newValues).length) return;\n\n  await mapp.utils.xhr({\n    method: \"POST\",\n    url:\n      `${this.layer.mapview.host}/api/location/update?` +\n      mapp.utils.paramString({\n        locale: this.layer.mapview.locale.key,\n        layer: this.layer.key,\n        table: this.table,\n        id: this.id,\n      }),\n    body: JSON.stringify(newValues),\n  });\n   \n  let dependents = this.infoj\n    .filter(entry => typeof entry.newValue !== 'undefined')\n    .filter(entry => entry.dependents && entry.dependents.length)\n    .map(entry => entry.dependents)\n    .flat()\n\n  this.infoj\n    .filter(entry => typeof entry.newValue !== 'undefined')\n    .forEach(entry => {\n\n      entry.value = entry.newValue;\n      delete entry.newValue;\n\n    })\n\n  if (dependents.length) {\n\n    const response = await mapp.utils.xhr(\n      `${this.layer.mapview.host}/api/location/get?` +\n        mapp.utils.paramString({\n          locale: this.layer.mapview.locale.key,\n          layer: this.layer.key,\n          table: this.table,\n          id: this.id,\n          fields: [...new Set(dependents)].join(),\n        })\n    );\n\n    this.infoj\n      .filter(entry => typeof response[entry.field] !== 'undefined')\n      .forEach(entry => {\n        entry.value = response[entry.field];\n      })\n  \n  }\n\n  // Reload layer.\n  this.layer.reload()\n\n  this.updateCallbacks?.forEach(\n    fn => typeof fn === 'function' && fn(this))\n}\n\nfunction flyTo () {\n\n  const sourceVector = new ol.source.Vector();\n\n  this.Layers.forEach(layer => {\n\n    const source = layer.getSource()\n\n    typeof source.getFeatures === 'function'\n      && sourceVector.addFeatures(source.getFeatures())\n  })\n\n  this.layer.mapview.fitView(sourceVector.getExtent());\n}\n\nasync function trash() {\n\n  if(!confirm(mapp.dictionary.confirm_delete)) return;\n\n  await mapp.utils.xhr(`${this.layer.mapview.host}/api/location/delete?` +\n    mapp.utils.paramString({\n      locale: this.layer.mapview.locale.key,\n      layer: this.layer.key,\n      table: this.table,\n      id: this.id\n    }))\n\n  this.layer.reload()\n\n  this.remove()\n}", "export default async function (location, list = location.layer.mapview.locations) {\n\n  if (!location.layer || !location.id) return;\n\n  // Create location hook.\n  location.hook = `${location.layer.key}!${location.id}`;\n\n  // Return if hook exists in mapview.interaction.locations set.\n  if (location.layer.mapview.interaction?.locations?.has(location.hook)) return;\n\n  // Add hook to mapview.interaction.locations set.\n  location.layer.mapview.interaction?.locations?.add(location.hook)\n\n  // Remove location if already in list.\n  if (list[location.hook]) {\n    list[location.hook].remove()\n    delete list[location.hook]\n\n    // Remove hook to mapview.interaction.locations set.\n    location.layer.mapview.interaction?.locations?.delete(location.hook)\n    return;\n  }\n\n  // Get dbs table from layer.\n  location.table = location.table\n    || location.layer.table\n    || Object.values(location.layer.tables).find(table => !!table)\n\n  // Get data from location api.\n  const response = await mapp.utils.xhr(\n    `${location.layer.mapview.host}/api/location/get?` +\n    mapp.utils.paramString({\n      locale: location.layer.mapview.locale.key,\n      layer: location.layer.key,\n      table: location.table,\n      id: location.id,\n    })\n  );\n\n  if (!response) {\n\n    console.log('No data returned from location get request')\n    mapp.hooks.filter('locations', location.hook)\n    return;\n  }\n\n  const infoj = location.layer.infoj.map(_entry => {\n\n    const entry = mapp.utils.clone(_entry)\n\n    Object.assign(entry, {\n      title: response[entry.field + '_label'] || entry.title,\n      value: response[entry.field],\n      location\n    })\n\n    return entry\n  })\n\n  mapp.location.decorate(Object.assign(location, { infoj }))\n\n  // Assign location to mapview.\n  list[location.hook] = location\n\n  // Remove hook to mapview.interaction.locations set.\n  location.layer.mapview.interaction?.locations?.delete(location.hook)\n\n  // Push location hook to URL if hooks are enabled for the mapview.\n  location.layer.mapview.hooks && mapp.hooks.push('locations', location.hook)\n\n  return location\n}", "export default async function (params) {\n\n  let\n    properties = params.feature.getProperties(),\n    geom = params.feature.getGeometry(),\n    _coords = geom.getCoordinates(),\n    coords = ol.proj.transform(\n      _coords,\n      'EPSG:' + params.mapview.srid,\n      'EPSG:' + params.layer.srid)\n\n  const response = await mapp.utils.xhr(\n    `${params.mapview.host}/api/query/get_nnearest?` +\n      mapp.utils.paramString({\n        locale: params.mapview.locale.key,\n        layer: params.layer.key,\n        geom: params.layer.geom,\n        qID: params.layer.qID,\n        cluster_label: params.layer.cluster_label || params.layer.qID,\n        table: params.table,\n        filter: params.layer.filter?.current,\n        n: properties.count > (params.max || 99) ? (params.max || 99) : properties.count,\n        x: coords[0],\n        y: coords[1],\n        coords: coords,\n      })\n  );\n\n  const list = mapp.utils.html.node`\n    <div style=\"max-width: 66vw; max-height: 300px; overflow-x: hidden;\">\n      <ul>\n      ${response.map(li => mapp.utils.html.node`\n        <li\n          onclick=${e => {\n            params.mapview.popup(null)\n            mapp.location.get({\n              //mapview: params.mapview,\n              layer: params.layer,\n              table: params.table,\n              id: li.id,\n              marker: ol.proj.transform(\n                li.coords,\n                'EPSG:' + params.layer.srid,\n                'EPSG:' + params.mapview.srid),\n            })\n          }}>${li.label || '\"' + params.layer.cluster_label + '\"'}`)}`;\n\n  params.mapview.popup({\n    coords: ol.proj.transform(\n      coords,\n      \"EPSG:\" + params.layer.srid,\n      \"EPSG:\" + params.mapview.srid\n    ),\n    content: list,\n    autoPan: true,\n  });\n\n}", "import decorate from './decorate.mjs'\n\nimport get from './get.mjs'\n\nimport nnearest from './nnearest.mjs'\n\nexport default {\n  decorate,\n  get,\n  nnearest,\n}", "export default async function (layers) {\n\n  if (!Array.isArray(layers)) return;\n\n  let hooks = (this.hooks && mapp.hooks.current.layers.length)\n\n  for (let _layer of layers) {\n\n    let layer = mapp.utils.clone(_layer);\n\n    layer.mapview = this\n\n    if (hooks) {\n      layer.display = !!~mapp.hooks.current.layers.indexOf(layer.key)\n    }\n\n    await mapp.layer.decorate(layer)\n\n    this.layers[layer.key] = layer\n\n    layer.display && layer.show()\n  }\n\n  return layers\n}", "export default function (extent, opt_options = {}){\n  this.Map.getView().fit(\n    extent,\n    Object.assign(\n      {\n        padding: [50, 50, 50, 50],\n        duration: 1000\n      },\n      opt_options)\n  )\n}", "export default function(srid){\n\n  const extent = this.Map.getView().calculateExtent();\n\n  if (!srid) return {\n    south: extent[1],\n    west: extent[0],\n    north: extent[3],\n    east: extent[2],\n  };\n\n  const extent_transformed = ol.proj.transformExtent(\n    extent,\n    `EPSG:${this.srid}`,\n    `EPSG:${srid}`);\n\n  return {\n    south: extent_transformed[1],\n    west: extent_transformed[0],\n    north: extent_transformed[3],\n    east: extent_transformed[2],\n  }\n}", "export default function (params){\n\n  const geoJSON = new ol.format.GeoJSON();\n\n  const feature = params.geometry && geoJSON.readFeature({\n    type: 'Feature',\n    geometry: params.geometry\n  },{ \n    dataProjection: `EPSG:${params.dataProjection || this.srid}`,\n    featureProjection:`EPSG:${this.srid}`\n  });\n\n  const sourceVector = new ol.source.Vector()\n\n  feature && sourceVector.addFeature(feature)\n  \n  const layerVector = new ol.layer.Vector({\n    source: sourceVector,\n    zIndex: params.zIndex,\n    style: params.Style\n  })\n  \n  this.Map.addLayer(layerVector)\n  \n  return layerVector\n}", "const infotip = {}\n\nexport default function(content) {\n\n  const mapview = this;\n\n  // Remove infotip node element\n  infotip.node?.remove()\n\n  // Remove infotip positioning event from mapview Map.\n  mapview.Map.un('pointermove', position)\n\n  // Just clears the infotip.\n  if (!content) return;\n\n  // Creates the infotip node.\n  infotip.node = mapp.utils.html.node`<div class=\"infotip box-shadow\">`\n\n  // Assigns the infotip content.\n  infotip.node.innerHTML = content\n\n  // Appends the infotip to the mapview.Map.\n  mapview.Map.getTargetElement().appendChild(infotip.node)\n\n  // Assign infotip positioning event to mapview.Map.\n  mapview.Map.on('pointermove', position)\n\n  // Set the position of the infotip.\n  position()\n\n  function position() {\n\n    // The infotip class has a default opacity of 0, with transition effect.\n    infotip.node.style.opacity = 1;\n\n    // Set the infotip position from mapview pointerLocation.\n    infotip.node.style.left = mapview.pointerLocation.x - infotip.node.offsetWidth / 2 + 'px'\n    infotip.node.style.top = mapview.pointerLocation.y - infotip.node.offsetHeight - 15 + 'px'\n  }\n\n}", "export default function (params) {\n\n  this._locate = this._locate || Object.assign({\n    icon: {\n      svg: `${this.host}/icons/locator.svg`,\n      scale: 0.05\n    },\n    feature: new ol.Feature({\n      geometry: new ol.geom.Point([0, 0])\n    }),\n  }, params || {})\n\n  this._locate.active = !this._locate.active\n\n  // Create the geolocation marker if it doesn't exist yet.\n  if (!this._locate.L) {\n\n    this._locate.L = new ol.layer.Vector({\n      source: new ol.source.Vector({\n        features: [this._locate.feature]\n      }),\n      zIndex: 999,\n      style: mapp.utils.style({\n        icon: this._locate.icon\n      })\n    })\n  }\n\n  // Remove the geolocation marker if locate is not active.\n  if (!this._locate.active) {\n    this.Map.removeLayer(this._locate.L)\n    return;\n  }\n\n  this.Map.addLayer(this._locate.L)\n\n  mapp.utils.getCurrentPosition((pos) => {\n\n    const coords = ol.proj.fromLonLat([\n      parseFloat(pos.coords.longitude),\n      parseFloat(pos.coords.latitude)\n    ])\n\n    this._locate.feature.getGeometry().setCoordinates(coords)\n\n    // Fly to pos_ll and set flyTo to false to prevent map tracking.\n    this.Map.getView().animate({\n      center: coords,\n      zoom: this.locale.maxZoom\n    })\n  })\n\n}", "const popup = {}\n\nexport default function(params) {\n\n  const mapview = this;\n\n  // Remove infotip node element\n  popup.node?.remove()\n\n  // Just clears the infotip.\n  if (!params) return;\n\n  popup.node = mapp.utils.html.node `<div class=\"popup box-shadow\">`\n\n  popup.node.appendChild(params.content)\n  \n  popup.overlay && mapview.Map.removeOverlay(popup.overlay)\n\n  popup.overlay = new ol.Overlay({\n    element: popup.node,\n    position: params.coords || mapview.position,\n    positioning: 'bottom-center',\n    autoPan: params.autoPan,\n    insertFirst: true,\n    autoPanAnimation: {\n      duration: 250\n    }\n  })\n\n  mapview.Map.addOverlay(popup.overlay)\n\n}", "let _this;\n\nexport default function(params){\n\n  // Finish the current interaction.\n  this.interaction?.finish()  \n\n  _this = Object.assign({\n\n    mapview: this,\n\n    type: 'highlight',\n\n    finish,\n\n    clear,\n\n    highlight,\n\n    getLocation,\n\n    hitTolerance: 5,\n\n    candidates: {},\n\n    candidateKeys: new Set(),\n\n    locations: new Set(),\n\n    // Filter for layers which have a highlight style.\n    layerFilter: L => Object.values(this.layers)\n\n      // layer L matching the feature layer L must have a qID defined\n      .some(layer => layer.qID && layer.L === L)\n\n  }, params)\n\n  // Set _this to be the current mapview _this.\n  _this.mapview.interaction = _this\n\n  // pointerMove will highlight features.\n  _this.mapview.Map.on('pointermove', pointerMove)\n\n  // click will select the highlighted feature.\n  _this.mapview.Map.on('click', click)\n\n  let shortCircuit\n\n  function pointerMove(e) {\n\n    // Method should short circuit if still processing.\n    if (shortCircuit) return;\n\n    // Set shortCircuit flag.\n    shortCircuit = true;\n\n    let candidates = {};\n\n    _this.mapview.Map.forEachFeatureAtPixel(e.pixel,\n      (F, L) => {\n\n        // Create candidate object.\n        let candidate = {\n          key: `${L.get('key') || ol.util.getUid(L)}!${F.get('id') || F.getId() || ol.util.getUid(F)}`,\n          F, L\n        }\n\n        // Assign to key in candidates object.\n        candidates[candidate.key] = candidate\n      },\n      {\n        layerFilter: _this.layerFilter,\n        hitTolerance: _this.hitTolerance,\n      })\n\n    // No features at pixel.\n    if (!Object.keys(candidates).length) {\n\n      // Reset candidateKeys\n      _this.candidateKeys = new Set();\n\n      // Remove shortCircuit flag.\n      shortCircuit = false;\n\n      // Clear highlight.\n      clear();\n\n      // There is nothing to highlight.\n      return;\n    }\n\n    // Check whether set of candidate keys is equal to _this.candidateKeys\n    if (mapp.utils.areSetsEqual(_this.candidateKeys, new Set(Object.keys(candidates)))) {\n\n      // Remove shortCircuit flag\n      shortCircuit = false;\n\n      // The highlight hasn't changed.\n      return;\n    }\n\n    // Find candidate from key which is not in candidates set.\n    let candidate = candidates[Object.keys(candidates).find(key => !_this.candidateKeys.has(key))]\n\n    // Assign candidate from first key if candidate is falsy.\n    candidate = candidate\n      || _this.current?.key && candidates[_this.current?.key]\n      || candidates[Object.keys(candidates)[0]]\n\n    // Assign new Set of candidate keys to _this.\n    _this.candidateKeys = new Set(Object.keys(candidates))\n\n    // Remove shortCircuit flag.\n    shortCircuit = false;\n\n    // Call highlight method.\n    _this.highlight(candidate, e)\n  }\n\n  function highlight(feature, e) {\n\n    // Highlight method should only be called if the highlight has changed.\n    clear()\n\n    // Assign the layer and ID to the candidate object.\n    _this.current = Object.assign(feature, {\n      layer: _this.mapview.layers[feature.L.get('key')],\n      id: feature.F.get('id') || feature.F.getId()\n    })\n\n    // Assign the id to the layer highlight key.\n    // Required to determine in the style function whether the current feature should be styled as highlighted.\n    _this.current.layer.highlight = feature.id\n\n    // Touch events should not highlight features since there is no cursor.\n    if (e.originalEvent.pointerType !== 'mouse') {\n\n      // Don't get location from touch pan or zoom pinch event.\n      e.type !== 'pointermove' && _this.getLocation(_this.current)\n\n      // Clear touch highlight.\n      clear()\n\n      return;\n    }\n\n    // Change cursor if the highlight is selectable.\n    if (_this.current.layer.infoj) _this.mapview.Map.getTargetElement().style.cursor = 'pointer'\n\n    // Execute any hover method assigned to the current feature layer.\n    typeof _this.current.layer.hover?.show === 'function' && _this.current.layer.hover.show(feature.F)\n\n    // Style the feature itself if possible.\n    if (_this.current.layer.format !== 'mvt'\n      && typeof _this.current.F.setStyle === 'function') {\n\n      feature.F.set('highlight', true)\n      _this.current.F.setStyle()\n\n    } else if (_this.current.layer.style.highlight) {\n\n      // Render unto canvas those things that are canvas'\n      _this.current.layer.L.changed()\n    }\n  }\n\n  let clicked;\n\n  // Select the current highlighted feature.\n  function click(e) {\n\n    // Limit click event to 600ms\n    if (clicked) return;\n\n    clicked = setTimeout(() => { clicked = null }, 600);\n\n    // There is no current highlighted feature without pointerMove.\n    // Simulate pointermove on the touch click coordinates.\n    if (e.originalEvent.pointerType === 'touch') {\n\n      _this.candidateKeys = new Set();\n      e.type = 'touchClick'\n      pointerMove(e)\n      return\n    }\n    \n    // Remove any existing popup. e.g. Cluster select dialogue.\n    _this.mapview.popup(null)\n\n    // Return if there is no current highlight to select.\n    if (_this.current) {\n      _this.getLocation(_this.current);\n      return;\n    }\n\n    // Execute the noLocationClick method\n    if (typeof _this.noLocationClick === 'function') {\n      _this.noLocationClick(e)\n    }\n  }\n\n  function clear() {\n\n    // Highlight has already been cleared.\n    if (!_this.current) return;\n\n    // Remove any infotip.\n    _this.mapview.infotip(null)\n\n    // Reset cursor.\n    _this.mapview.Map.getTargetElement().style.cursor = 'auto'\n\n    // Delete the highlight id from current layer.\n    delete _this.current.layer.highlight\n\n    // Style the feature itself if possible.\n    if (_this.current.layer.format !== 'mvt'\n      && typeof _this.current.F.setStyle === 'function') {\n\n      _this.current.F.set('highlight', false)\n      _this.current.F.setStyle()\n\n    } else if (_this.current.layer.style.highlight) {\n\n      // Render unto canvas those things that are canvas'\n      _this.current.layer.L.changed()\n    }\n\n    // Delete the current highlight object.\n    delete _this.current\n  }\n\n  function getLocation(feature) {\n\n    if (!feature.layer.infoj) return;\n\n    // Get the properties of the current highlight feature.\n    const properties = feature.F.getProperties()\n\n    // Return with a select dialogue for cluster feature.\n    if (properties.count > 1) {\n      mapp.location.nnearest({\n        mapview: _this.mapview,\n        layer: feature.layer,\n        table: feature.layer.table || feature.layer.tableCurrent(),\n        feature: feature.F\n      })\n      return;\n    }\n\n    // Select the current highlight feature.\n    mapp.location.get({\n      layer: feature.layer,\n      table: feature.layer.table || feature.layer.tableCurrent(),\n      id: feature.layer.highlight\n    })\n  }\n\n  // Finished the highlight _this.\n  function finish() {\n\n    // Set the current interaction to null.\n    _this.mapview.interaction = null\n\n    clear()\n\n    // Remove popup from mapview.\n    _this.mapview.popup(null)\n\n    // Remove event listener from mapview.\n    _this.mapview.Map.un('pointermove', pointerMove)\n    _this.mapview.Map.un('click', click)\n  }\n}", "let _this;\n\nexport default function(params){\n\n  // Finish the current interaction.\n  this.interaction?.finish()\n\n  // The callback method from the previous call might have assigned another interaction.\n  this.interaction?.finish()\n\n  // Assign params onto the defaults as _this.\n  _this = Object.assign({\n\n    // Interactions are bound to the mapview as this.\n    mapview: this,\n\n    type: 'draw',\n\n    finish,\n\n    getFeature,\n  \n    format: new ol.format.GeoJSON(),\n\n    source: new ol.source.Vector(),\n  \n    // The Layer is required for generated features such as isolines.\n    Layer: new ol.layer.Vector(),\n\n    // Bind context menu from mapp ui elements.\n    contextMenu: mapp.ui?.elements.contextMenu.draw.bind(this),\n\n    vertices: [],\n\n    // Whether the draw interaction event should be handled.\n    condition: e => {\n\n      // Right click\n      if (e.originalEvent.buttons === 2) {\n\n        // Remove last vertex.\n        _this.interaction.removeLastPoint()\n        _this.vertices.pop()\n\n        const moveEvent = new ol.MapBrowserEvent('pointermove', _this.mapview.Map, e.originalEvent)\n        _this.interaction.handleEvent(moveEvent)\n        _this.interaction.handleEvent(moveEvent)\n        return false;\n      }\n\n      // Left click.\n      if (e.originalEvent.buttons === 1) {\n\n        _this.vertices.push(e.coordinate);\n        _this.mapview.popup(null);\n        \n        _this.conditions?.forEach(fn => typeof fn === 'function' && fn(e))\n        return true;\n      }\n    },\n  \n    // OL Style for sketch feature.\n    style: [\n      new ol.style.Style({\n        stroke: new ol.style.Stroke({\n          color: '#3399CC',\n          width: 1.25\n        })\n      }),\n      new ol.style.Style({\n        image: new ol.style.Circle({\n          radius: 5,\n          fill: new ol.style.Fill({\n            color: '#eee',\n          }),\n          stroke: new ol.style.Stroke({\n            color: '#3399CC',\n            width: 1.25\n          })\n        }),\n        geometry: mapp.utils.verticeGeoms\n      })\n    ]\n  }, params)\n\n  // Set _this to be the current mapview interaction.\n  _this.mapview.interaction = _this  \n  \n  // Change cursor style over mapview element.\n  _this.mapview.Map.getTargetElement().style.cursor = 'crosshair'\n\n  // Set _this.Layer source.\n  _this.Layer.setSource(_this.source)\n  \n  // Add _this.Layer to mapview.\n  _this.mapview.Map.addLayer(_this.Layer)\n  \n  // Create OL draw interaction.\n  _this.interaction = new ol.interaction.Draw(_this)\n\n  // Set drawstart event method.\n  _this.interaction.on('drawstart', e => {\n\n    // Get the draw feature geometry.\n    const geometry = e.feature.getGeometry()\n\n    async function onChange() {\n      _this.mapview.popup({\n        content: mapp.utils.html.node`\n          <div style=\"padding: 5px\">${await mapp.utils.convert(_this.mapview.metrics[_this.tooltip.metric](geometry), _this.tooltip)}`\n      })\n    }\n\n    // Assign an onchange method to the geometry for the tooltip.\n    _this.tooltip && geometry.on('change', _this.tooltip.onChange || onChange)\n\n    // Clear the source\n    _this.source.clear()\n\n    // Remove the popup.\n    _this.mapview.popup(null)\n  })\n  \n  _this.interaction.on('drawend', () => {\n\n    // Return with custom drawend function.\n    if (typeof _this.drawend === 'function') {\n\n      // A drawend method can be assigned to prevent the contextMenu.\n      _this.drawend()\n      return;\n    }\n\n    // Call contextMenu if defined as function.\n    if (typeof _this.contextMenu === 'function') {\n      _this.contextMenu()\n    }\n  })\n  \n  // Add OL interaction to mapview.Map\n  _this.mapview.Map.addInteraction(_this.interaction)\n\n  // Initiate snap for _this interaction.\n  _this.snap && _this.mapview.interactions.snap(_this)\n \n  // Get first feature from _this.source as GeoJSON.\n  function getFeature() {\n      \n    // Return feature as geojson.\n    return JSON.parse(\n      _this.format.writeFeature(\n        // Get first OL feature from source.\n        _this.source.getFeatures()[0],\n        { \n          // Use _this.srid as dataProjection if defined in params.\n          dataProjection: 'EPSG:' + _this.srid || _this.mapview.srid,\n          featureProjection: 'EPSG:' + _this.mapview.srid\n        })\n    )\n  }\n  \n  function finish(feature) {\n\n    // Set the current interaction to null.\n    _this.mapview.interaction = null\n\n    // Reset the cursor style.\n    _this.mapview.Map.getTargetElement().style.cursor = 'default'    \n\n    // Remove snap interaction from mapview.\n    _this.snap && _this.mapview.interactions.snap(null)\n  \n    // Execute callback if defined as function.\n    typeof _this.callback === 'function' && _this.callback(feature)\n  \n    // Remove popup from mapview.\n    _this.mapview.popup(null)\n    \n    // Remove interaction from mapview.Map.\n    _this.mapview.Map.removeInteraction(_this.interaction)\n  \n    // Remove draw Layer from mapview.Map.\n    _this.mapview.Map.removeLayer(_this.Layer)\n  }\n}", "let _this;\n\nexport default function(params){\n  \n  // Finish the current interaction.\n  this.interaction?.finish()\n\n  // The callback method from the previous call might have assigned the highlight interaction.\n  this.interaction?.finish()\n\n  _this = Object.assign({\n\n    mapview: this,\n\n    type: 'modify',\n\n    finish,\n  \n    format: new ol.format.GeoJSON(),\n\n    source: new ol.source.Vector(),\n\n    Layer: new ol.layer.Vector({\n      zIndex: Infinity\n    }),\n  \n    vertices: [],\n\n    contextMenu: mapp.ui?.elements.contextMenu.modify.bind(this),\n  \n    getFeature,\n\n    Style: [\n      new ol.style.Style({\n        image: new ol.style.Circle({\n          stroke: new ol.style.Stroke({\n            color: '#3399CC',\n            width: 1.25\n          }),\n          radius: 5\n        }),\n        stroke: new ol.style.Stroke({\n          color: '#3399CC',\n          width: 1.25\n        })\n      }),\n      new ol.style.Style({\n        image: new ol.style.Circle({\n          radius: 5,\n          fill: new ol.style.Fill({\n            color: '#eee',\n          }),\n          stroke: new ol.style.Stroke({\n            color: '#3399CC',\n            width: 1.25\n          })\n        }),\n        geometry: mapp.utils.verticeGeoms\n      })\n    ],\n\n    deleteCondition: e => {\n\n      if (e.type === 'singleclick') {\n\n        const geom = _this.Feature.getGeometry()\n\n        const geomType = geom.getType()\n\n        if (geomType === 'Point') return;\n\n        const coords = geom.getCoordinates()\n\n        // Return on point or line with 2 vertices.\n        if (geomType === 'LineString' && coords.length < 3) return;\n\n        // Return on polygon with less than 3 vertices.\n        if (coords[0].length <= 4) return;\n     \n        // Set popup to remove vertex.\n        _this.mapview.popup({\n          coords: _this.Feature.getGeometry().getClosestPoint(e.coordinate),\n          content: mapp.utils.html.node`<ul>\n            <li\n              onclick=${() => {\n              _this.interaction.removePoint()\n              _this.vertices.push(_this.Feature.getGeometry().getClosestPoint(e.coordinate))\n            }}>${mapp.dictionary.delete_vertex}`\n        })\n      }\n    }\n\n  }, params)\n\n  // Set _this to be the current mapview interaction.\n  _this.mapview.interaction = _this\n\n  _this.mapview.Map.getTargetElement().style.cursor = 'crosshair'\n\n  _this.Feature && _this.source.addFeature(_this.Feature)\n   \n  // Set _this.Layer source.\n  _this.Layer.setSource(_this.source)\n\n  // Set _this.Layer style\n  _this.Layer.setStyle(_this.Style)\n  \n  // Add _this.Layer to mapview.\n  _this.mapview.Map.addLayer(_this.Layer)\n   \n  _this.interaction = new ol.interaction.Modify(_this)\n\n  // Will clear remove vertex popup.\n  _this.interaction.on('modifystart', e => {\n    _this.mapview.popup(null)\n  })\n  \n  _this.interaction.on('modifyend', e => {\n\n    _this.vertices.push(e.mapBrowserEvent.coordinate);\n\n    // Execute custom modifyend method.\n    if (_this.modifyend) return _this.modifyend(e, modify);\n\n    typeof _this.contextMenu === 'function' && setTimeout(_this.contextMenu, 400)\n  })\n  \n  // Add OL interaction to mapview.Map\n  _this.mapview.Map.addInteraction(_this.interaction)\n\n  _this.snap && _this.mapview.interactions.snap(_this)\n \n  function getFeature() {\n     \n    return JSON.parse(\n      _this.format.writeFeature(\n        _this.Feature,\n        { \n          dataProjection: 'EPSG:' + _this.srid || _this.mapview.srid,\n          featureProjection: 'EPSG:' + _this.mapview.srid\n        })\n    )\n  }\n  \n  function finish(feature) {\n\n    // Set the current interaction to null.\n    _this.mapview.interaction = null\n\n    // Reset the cursor style.\n    _this.mapview.Map.getTargetElement().style.cursor = 'default'\n\n    // Remove snap interaction from mapview.\n    _this.snap && _this.mapview.interactions.snap(null)\n  \n    // Execute callback if defined as function.\n    typeof _this.callback === 'function' && _this.callback(feature)\n  \n    // Remove popup from mapview.\n    _this.mapview.popup(null)\n    \n    // Remove interaction from mapview.Map.\n    _this.mapview.Map.removeInteraction(_this.interaction)\n  \n    // Remove draw Layer from mapview.Map.\n    _this.mapview.Map.removeLayer(_this.Layer)\n  }\n}", "export default function(params){\n\n  const mapview = this\n\n  mapview.interaction?.finish()\n\n  const zoom = {\n\n    finish: finish,\n\n    Layer: new ol.layer.Vector({\n      source: new ol.source.Vector()\n    })\n  }\n\n  mapview.interaction = zoom\n\n  zoom.callback = params.callback\n\n  zoom.Layer.getSource().clear()\n\n  mapview.Map.addLayer(zoom.Layer);\n\n  mapview.Map.getTargetElement().style.cursor = 'zoom-in';\n\n  zoom.interaction = new ol.interaction.Draw({\n    source: zoom.Layer.getSource(),\n    type: 'Circle',\n    geometryFunction: ol.interaction.Draw.createBox(),\n    style: new ol.style.Style({\n      stroke: new ol.style.Stroke({\n        color: '#ddd',\n        width: 1\n      }),\n      fill: new ol.style.Stroke({\n        color: '#fff9'\n      })\n    })\n  })\n\n  zoom.interaction.on('drawend', e => {\n\n    mapview.fitView(e.feature.getGeometry().getExtent())\n\n    finish()\n  })\n\n  mapview.Map.addInteraction(zoom.interaction)\n\n  function finish() {\n\n    delete mapview.interaction\n\n    if (zoom.callback) {\n      zoom.callback()\n      delete zoom.callback\n    }\n\n    mapview.Map.getTargetElement().style.cursor = 'auto';\n\n    mapview.Map.removeInteraction(zoom.interaction)\n\n    mapview.Map.removeLayer(zoom.Layer)\n\n    zoom.Layer.getSource().clear()\n  }\n}", "let _this;\n\nexport default function(interaction) {\n\n  // Remove snap interaction if defined.\n  // Called from draw or modify interaction finish method.\n  if (interaction === null) {\n    \n    _this.mapview.Map.removeInteraction(_this.snap.interaction)\n\n    // Remove loadend event MVT layer snapSource.\n    _this.layer.snapSource?.un('tileloadend', tileloadend);\n\n    // Remove vectorTileLayer associated with the MVT layer snapSource.\n    _this.mapview.Map.removeLayer(_this.snap.vectorTileLayer)\n\n    return;\n  }\n\n  // Assign mapview and interaction to be _this.\n  _this = Object.assign(interaction, {\n    snap: {\n      source: new ol.source.Vector()\n    }\n  })\n\n  // Only MVT layer have a snapSource.\n  if (_this.layer.snapSource) {\n\n    // Assign loadend event to MVT layer snapSource.\n    _this.layer.snapSource.on('tileloadend', tileloadend)\n\n    // An invisible VectorTile layer is required to trigger the loadend event.\n    _this.snap.vectorTileLayer = new ol.layer.VectorTile({\n      source: _this.layer.snapSource,\n      opacity: 0\n    })\n  \n    _this.mapview.Map.addLayer(_this.snap.vectorTileLayer)\n\n    // Refresh the snapSource in order to trigger the loadend event.\n    _this.layer.snapSource.refresh()\n\n  } else {\n\n    // Assign snapSource from the snapLayer's OL source.\n    _this.snap.source = _this.layer.L.getSource()\n  }\n\n  // Create and assign snap interaction.\n  _this.snap.interaction = new ol.interaction.Snap({\n    source: _this.snap.source\n  })\n\n  _this.mapview.Map.addInteraction(_this.snap.interaction)\n}\n\nfunction tileloadend(e){\n\n  // Assign features from tile to the snap source.\n  _this.snap.source.addFeatures(e.tile.getFeatures())\n}", "import addLayer from './addLayer.mjs'\n\nimport fitView from './fitView.mjs'\n\nimport getBounds from './getBounds.mjs'\n\nimport geoJSON from './geoJSON.mjs'\n\nimport infotip from './infotip.mjs'\n\nimport locate from './locate.mjs'\n\nimport popup from './popup.mjs'\n\nimport _highlight from './interactions/highlight.mjs'\n\nimport _draw from './interactions/draw.mjs'\n\nimport _modify from './interactions/modify.mjs'\n\nimport _zoom from './interactions/zoom.mjs'\n\nimport snap from './interactions/snap.mjs'\n\nexport default (mapview) => {\n\n  Object.assign(mapview, {\n    srid: mapview.locale.srid || '3857',\n    addLayer,\n    fitView,\n    geoJSON,\n    getBounds,\n    infotip,\n    locate,\n    metrics: {\n      distance: (geometry) => ol.sphere.getLength(\n        new ol.geom.LineString([geometry.getInteriorPoint().getCoordinates(), mapview.position])),\n      area: (geometry) => ol.sphere.getArea(geometry),\n      length: (geometry) => ol.sphere.getLength(geometry),\n    },\n    popup,\n    layers: {},\n    locations: {},\n    interactions: {\n      highlight: _highlight.bind(mapview),\n      draw: _draw.bind(mapview),\n      modify: _modify.bind(mapview),\n      zoom: _zoom.bind(mapview),\n      snap\n    }\n  })\n\n  // Get the initialZoom for the mapview.\n  const initialZoom = mapp.hooks?.current?.z\n    || mapview.locale.view?.z\n    || mapview.locale.minZoom\n    || 0\n\n  // Get the initialCenter for the mapview.\n  const initialCenter = ol.proj.fromLonLat([\n    parseFloat(mapp.hooks?.current?.lng\n      || mapview.locale.view?.lng\n      || 0),\n    parseFloat(mapp.hooks?.current?.lat\n      || mapview.locale.view?.lat\n      || 0),\n  ])\n\n  // WARN!\n  mapview.locale.bounds && console\n    .warn('locale.bounds have been renamed to locale.extent')\n\n  // Get the mapview extent from the locale.\n  const extent = mapview.locale.extent && ol.proj.transformExtent(\n    [\n      parseFloat(mapview.locale.extent.west || -180),\n      parseFloat(mapview.locale.extent.south || -90),\n      parseFloat(mapview.locale.extent.east || 180),\n      parseFloat(mapview.locale.extent.north || 90),\n    ],\n    `EPSG:4326`,\n    `EPSG:${mapview.srid}`)\n\n  // Map\n  mapview.Map = new ol.Map({\n    target: mapview.target,\n    interactions: ol.interaction.defaults.defaults({ \n      mouseWheelZoom: mapview.scrollWheelZoom || false,\n      pinchRotate: mapview.pinchRotate && {\n        threshold: 3\n      } || false\n    }),\n    moveTolerance: 5,\n    controls: mapview.controls || [], //[new ol.control.Zoom()]\n    view: new ol.View({ \n      projection: `EPSG:${mapview.srid}`,\n      zoom: initialZoom,\n      minZoom: mapview.locale.minZoom,\n      maxZoom: mapview.locale.maxZoom,\n      center: initialCenter,\n      extent: extent\n    })\n  })\n\n  // Update the Map size when the target element changes size.\n  // let resizeObserverTimeout\n  // new ResizeObserver(() => {\n  //   resizeObserverTimeout && clearTimeout(resizeObserverTimeout)\n  //   resizeObserverTimeout = setTimeout(()=>{\n  //     mapview.Map.updateSize()\n  //   }, 1000)\n  // }).observe(mapview.Map.getTargetElement())\n\n  // WARN!\n  mapview.locale.maskBounds && console\n    .warn('locale.maskBounds is set as mask:true in locale.extent')\n  \n  // Extent mask\n  if (mapview.locale.extent?.mask) {\n\n    // Set world exte\n\n    const world = [\n      [180, 90],\n      [180, -90],\n      [-180, -90],\n      [-180, 90],\n      [180, 90],\n    ]\n\n    // Set locale extent\n    const extent = [\n      [mapview.locale.extent.east, mapview.locale.extent.north],\n      [mapview.locale.extent.east, mapview.locale.extent.south],\n      [mapview.locale.extent.west, mapview.locale.extent.south],\n      [mapview.locale.extent.west, mapview.locale.extent.north],\n      [mapview.locale.extent.east, mapview.locale.extent.north],\n    ]\n\n    // Create a maskFeature from the word and locale extent.\n    const maskFeature = new ol.Feature({\n      geometry: new ol.geom\n\n        // Use world and locale extent as polygon rings.\n        // The second ring will be subtracted.\n        .Polygon([world, extent])\n        .transform(`EPSG:4326`, `EPSG:${mapview.srid}`)\n    })\n  \n    // Add masklayer with the maskFeature\n    // and infinite zIndex to mapview.Map\n    mapview.Map.addLayer(new ol.layer.Vector({\n      source: new ol.source.Vector({\n        features: [maskFeature]\n      }),\n      style: new ol.style.Style({\n        fill: new ol.style.Fill({\n          color: '#00000044'\n        })\n      }),\n      zIndex: Infinity\n    }))\n  }\n\n  // Scalebar\n  mapview.scalebar && mapview.Map.addControl(new ol.control.ScaleLine({\n    units: mapview.scalebar\n  }))\n\n  // Attribution\n  if (mapview.attribution) {\n\n    if (typeof mapview.attribution !== 'object') {\n      mapview.attribution = {}\n    }\n\n    mapview.attribution.target = mapview.attribution.target\n      || mapview.Map.getTargetElement()\n        .appendChild(mapp.utils.html.node`\n          <div class=\"attribution-links\">`)\n\n    mapview.attribution.check = () => {\n\n      const o = Object.assign({}, mapview.attribution.links || {})\n\n      // Iterate through layers to check whether attribution should be displayed.\n      Object.values(mapview.layers).forEach(layer => {\n        layer.display && layer.attribution && Object.assign(\n          o, layer.attribution)\n      })\n\n      // Render the layer attribution links into the placeholder.\n      mapp.utils.render(mapview.attribution.target,\n        mapp.utils.html`${Object.entries(o)\n          .map(entry => mapp.utils.html`\n              <a target=\"_blank\" href=\"${entry[1]}\">${entry[0]}`)}`)\n\n    }\n  }\n\n  // Events\n\n  // pointermove\n  mapview.Map.on('pointermove', e => {\n\n    // The geographic coordinate.\n    mapview.position = e.coordinate\n\n    // The pixel coordinate.\n    mapview.pointerLocation = {\n      x: e.originalEvent.clientX,\n      y: e.originalEvent.clientY\n    }\n  })\n\n  // mouseout\n  mapview.Map.getTargetElement().addEventListener('mouseout', () => {\n\n    mapview.infotip(null)\n\n    // Set position on and pointerLocation to null.\n    mapview.position = null\n    mapview.pointerLocation = {\n      x: null,\n      y: null\n    }\n  })\n\n  // changeEnd\n  mapview.Map.getTargetElement().addEventListener('changeEnd', () => {\n\n    // Update URL params if enabled on mapview\n    if (!mapview.hooks) return;\n\n    // Get center from Map.View\n    const center = ol.proj.transform(\n      mapview.Map.getView().getCenter(),\n      `EPSG:${mapview.srid}`,\n      `EPSG:4326`)\n\n    // Set lat, lng, z URL params.\n    mapp.hooks.set({\n      lat: Math.round((center[1] + Number.EPSILON) * 100000) / 100000,\n      lng: Math.round((center[0] + Number.EPSILON) * 100000) / 100000,\n      z: Math.round((mapview.Map.getView().getZoom() + Number.EPSILON) * 100) / 100\n    })\n  })\n\n  // Timer to debounce changeEnd event.\n  let changeEndTimer\n\n  // moveend to call changeEnd event.\n  mapview.Map.on('moveend', ()=>{\n    clearTimeout(changeEndTimer)\n\n    changeEndTimer = setTimeout(()=>{\n      mapview.Map.getTargetElement().dispatchEvent(new CustomEvent('changeEnd'))\n    }, 500)\n  })\n  \n  return mapview\n}", "import utils from './utils/_utils.mjs'\n\nimport hooks from './hooks.mjs'\n\nimport dictionaries from './dictionaries/_dictionaries.mjs'\n\nimport layer from './layer/_layer.mjs'\n\nimport location from './location/_location.mjs'\n\nimport Mapview from './mapview/_mapview.mjs'\n\nself.mapp = (function (mapp) {\n\n  hooks.parse();\n\n  Object.assign(mapp, {\n    version: '4.0.0',\n    hash: 'ee17e646dd0867fb10a93d2f3c2df9569031fba1',\n    language: hooks.current.language || 'en',\n  \n    dictionaries,\n  \n    dictionary: new Proxy({}, {\n      get: function(target, key, receiver){\n      \n          if (mapp.dictionaries[mapp.language][key]) {\n            return mapp.dictionaries[mapp.language][key];\n          }\n      \n          return mapp.dictionaries.en[key];\n      \n        }}),\n  \n    hooks,\n  \n    layer,\n  \n    location,\n  \n    Mapview,\n  \n    plugins: {},\n  \n    utils\n\n  })\n\n  return mapp;\n\n})({});"],
  "mappings": "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",
  "names": ["MapSet", "key", "value", "WeakMapSet", "empty", "elements", "attributes", "holes", "esm_default", "template", "prefix", "svg", "i", "_", "name", "attrs", "selfClosing", "ml", "hole", "ELEMENT_NODE", "nodeType", "remove", "firstChild", "lastChild", "range", "diffable", "node", "operation", "persistent", "fragment", "childNodes", "nodes", "isArray", "indexOf", "slice", "useForeign", "Foreign", "handler", "value", "args", "foreign", "aria", "node", "values", "key", "name", "getValue", "attribute", "oldValue", "orphan", "attributeNode", "newValue", "boolean", "data", "dataset", "event", "lower", "type", "info", "isArray", "ref", "setter", "text", "esm_default", "parentNode", "a", "b", "get", "before", "bLength", "aEnd", "bEnd", "aStart", "bStart", "map", "node", "i", "index", "sequence", "isArray", "prototype", "indexOf", "createDocumentFragment", "createElement", "createElementNS", "createTextNode", "createTreeWalker", "importNode", "target", "method", "createHTML", "html", "template", "xml", "createSVG", "svg", "content", "createContent", "text", "reducePath", "childNodes", "i", "diff", "comment", "oldNodes", "newNodes", "esm_default", "diffable", "handleAnything", "oldValue", "text", "nodes", "anyContent", "newValue", "createTextNode", "isArray", "value", "handleAttribute", "node", "name", "boolean", "setter", "event", "ref", "aria", "attribute", "handlers", "options", "type", "path", "createPath", "node", "path", "parentNode", "indexOf", "prefix", "cache", "WeakMapSet", "textOnly", "createCache", "createEntry", "type", "template", "content", "updates", "mapUpdates", "mapTemplate", "svg", "text", "esm_default", "createContent", "tw", "createTreeWalker", "nodes", "length", "i", "search", "fragment", "importNode", "handlers", "unroll", "info", "values", "unrollValues", "entry", "wire", "persistent", "stack", "hole", "Hole", "isArray", "tag", "type", "keyed", "WeakMapSet", "fixed", "cache", "template", "values", "unroll", "Hole", "ref", "id", "memo", "MapSet", "createCache", "render", "where", "what", "hole", "info", "wire", "html", "svg", "clone", "target", "map", "cloneTarget", "key", "promise", "convert", "moduleImport", "resolve", "mod", "convert_default", "value", "params", "copyToClipboard", "str", "textArea", "dataURLtoBlob", "dataURL", "parts", "contentType", "raw", "uInt8Array", "DEFAULT_PRECISION", "ENCODING_TABLE", "DECODING_TABLE", "FORMAT_VERSION", "ABSENT", "LEVEL", "ALTITUDE", "ELEVATION", "CUSTOM1", "CUSTOM2", "Num", "decode", "encoded", "decoder", "decodeUnsignedValues", "header", "decodeHeader", "factorDegree", "factorZ", "thirdDim", "lastLat", "lastLng", "lastZ", "res", "i", "deltaLat", "toSigned", "deltaLng", "decodeChar", "char", "charCode", "result", "shift", "resList", "value", "version", "encodedHeader", "headerNumber", "precision", "thirdDimPrecision", "val", "encode", "polyline", "multiplierDegree", "multiplierZ", "encodedHeaderList", "encodeHeader", "encodedCoords", "location", "lat", "encodeScaledValue", "lng", "z", "encodeUnsignedNumber", "numVal", "pos", "negative", "here_default", "geometryFunction", "coordinates", "layer", "params", "geometry", "origin", "_params", "response", "_coordinates", "p", "feature", "hexa_default", "hex", "transparency", "loadPlugins_default", "plugins", "resolveAll", "promises", "plugin", "resolve", "reject", "mod", "err", "mods", "mapboxGeometryFunction_default", "coordinates", "layer", "params", "geometry", "origin", "response", "feature", "getCurrentPosition_default", "callback", "options", "err", "mergeDeep", "target", "sources", "source", "isObject", "key", "item", "paramString_default", "params", "entry", "val", "promiseAll_default", "promises", "resolveAll", "rejectAll", "error", "queryParams_default", "_this", "field", "entry", "bounds", "center", "style_default", "style", "feature", "layer", "styleClone", "getOlStyle", "scale", "svgSymbols_exports", "__export", "circle", "diamond", "dot", "markerColor", "markerLetter", "semiCircle", "square", "target", "template", "triangle", "xmlSerializer", "memoizedIcons", "style", "lookup", "a", "b", "icon", "svg", "layer", "x", "val", "scale", "y", "points", "s", "feature", "params", "entry", "verticeGeoms_default", "feature", "geometry", "coords", "type", "coordinates", "mp", "requestMap", "xhr_default", "params", "resolve", "reject", "xhr", "requestHeader", "entry", "e", "areSetsEqual", "a", "b", "value", "compose", "fns", "arg", "acc", "fn", "olScript", "resolve", "script", "utils_default", "render", "html", "svg", "convert_default", "clone", "copyToClipboard", "dataURLtoBlob", "getCurrentPosition_default", "here_default", "hexa_default", "loadPlugins_default", "mapboxGeometryFunction_default", "mergeDeep", "paramString_default", "promiseAll_default", "queryParams_default", "style_default", "svgSymbols_exports", "verticeGeoms_default", "xhr_default", "hooks", "set", "parse", "remove", "removeAll", "push", "filter", "hooks_default", "match", "key", "value", "_hooks", "pushState", "val", "el", "me", "en_default", "de_default", "fr_default", "pl_default", "ja_default", "ko_default", "cn_default", "dictionaries_default", "en_default", "de_default", "fr_default", "pl_default", "ja_default", "ko_default", "cn_default", "promise", "maplibregl", "MaplibreGL", "resolve", "imports", "error", "mbtiles_default", "layer", "container", "frameState", "promise", "mapboxgl", "MapboxGL", "resolve", "imports", "error", "mapboxgl_default", "layer", "container", "frameState", "tiles_default", "layer", "url", "source", "mvt_default", "layer", "source", "tileUrlFunction", "tileCoord", "tableZ", "cluster_default", "layer", "loader", "tableZ", "extent", "e", "max_size", "f", "features", "i", "geojson_default", "layer", "loader", "response", "features", "f", "source", "grid_default", "layer", "loader", "tableZ", "extent", "e", "data", "dots", "record", "getMath", "arr", "idx", "type", "numbers", "n", "val", "i", "feature", "properties", "size", "promise", "googlemaps_default", "layer", "resolve", "container", "timeout", "zoom", "frameState", "center", "format_default", "mbtiles_default", "mapboxgl_default", "tiles_default", "mvt_default", "cluster_default", "geojson_default", "grid_default", "googlemaps_default", "decorate_default", "layer", "format_default", "show", "hide", "tableCurrent", "tableMax", "tableMin", "zoomToExtent", "key", "fn", "table", "zoom", "zoomKeys", "minZoomKey", "maxZoomKey", "val", "params", "response", "bounds", "coords", "hover_default", "layer", "feature", "key", "paramString", "response", "filter", "ni", "featureFilter_default", "filters", "feature", "key", "type", "Style_default", "layer", "feature", "lookupFeature", "f", "featureID", "highlightStyle", "categorized_default", "theme", "feature", "catValue", "catStyle", "entry", "distributed_default", "theme", "feature", "catStyle", "bbox", "intersects", "b", "set", "free", "graduated_default", "theme", "feature", "catValue", "i", "catStyle", "layer_default", "decorate_default", "hover_default", "featureFilter_default", "Style_default", "categorized_default", "distributed_default", "graduated_default", "decorate_default", "location", "flyTo", "remove", "trash", "update", "L", "fn", "newValues", "entry", "dependents", "response", "sourceVector", "layer", "source", "get_default", "location", "list", "table", "response", "infoj", "_entry", "entry", "nnearest_default", "params", "properties", "geom", "_coords", "coords", "response", "list", "li", "e", "location_default", "decorate_default", "get_default", "nnearest_default", "addLayer_default", "layers", "hooks", "_layer", "layer", "fitView_default", "extent", "opt_options", "getBounds_default", "srid", "extent", "extent_transformed", "geoJSON_default", "params", "geoJSON", "feature", "sourceVector", "layerVector", "infotip", "infotip_default", "content", "mapview", "position", "locate_default", "params", "pos", "coords", "popup", "popup_default", "params", "mapview", "_this", "highlight_default", "params", "finish", "clear", "highlight", "getLocation", "L", "layer", "pointerMove", "click", "shortCircuit", "e", "candidates", "F", "candidate", "key", "feature", "clicked", "_this", "draw_default", "params", "finish", "getFeature", "e", "moveEvent", "fn", "geometry", "onChange", "feature", "_this", "modify_default", "params", "finish", "getFeature", "e", "geom", "geomType", "coords", "feature", "zoom_default", "params", "mapview", "zoom", "finish", "e", "_this", "snap_default", "interaction", "tileloadend", "mapview_default", "mapview", "addLayer_default", "fitView_default", "geoJSON_default", "getBounds_default", "infotip_default", "locate_default", "geometry", "popup_default", "highlight_default", "draw_default", "modify_default", "zoom_default", "snap_default", "initialZoom", "initialCenter", "extent", "world", "maskFeature", "o", "layer", "entry", "e", "center", "changeEndTimer", "mapp", "hooks_default", "dictionaries_default", "target", "key", "receiver", "layer_default", "location_default", "mapview_default", "utils_default"]
}
