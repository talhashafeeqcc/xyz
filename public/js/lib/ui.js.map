{
  "version": 3,
  "sources": ["../../../lib/ui/layers/view.mjs", "../../../lib/ui/layers/listview.mjs", "../../../lib/ui/layers/filters.mjs", "../../../lib/ui/layers/panels/draw.mjs", "../../../lib/ui/layers/panels/filter.mjs", "../../../lib/ui/layers/panels/gazetteer.mjs", "../../../lib/ui/layers/panels/dataviews.mjs", "../../../lib/ui/layers/panels/reports.mjs", "../../../lib/ui/layers/panels/style.mjs", "../../../lib/ui/layers/legends/categorized.mjs", "../../../lib/ui/layers/legends/distributed.mjs", "../../../lib/ui/layers/legends/graduated.mjs", "../../../lib/ui/layers/legends/grid.mjs", "../../../lib/ui/layers/legends/basic.mjs", "../../../lib/ui/layers/_layers.mjs", "../../../lib/ui/locations/view.mjs", "../../../lib/ui/locations/listview.mjs", "../../../lib/ui/locations/infoj.mjs", "../../../lib/ui/locations/entries/boolean.mjs", "../../../lib/ui/locations/entries/dataview.mjs", "../../../lib/ui/locations/entries/date.mjs", "../../../lib/ui/locations/entries/defaults.mjs", "../../../lib/ui/locations/entries/documents.mjs", "../../../lib/ui/locations/entries/geometry.mjs", "../../../lib/ui/locations/entries/images.mjs", "../../../lib/ui/locations/entries/isoline.mjs", "../../../lib/ui/locations/entries/json.mjs", "../../../lib/ui/locations/entries/mvt_clone.mjs", "../../../lib/ui/locations/entries/numeric.mjs", "../../../lib/ui/locations/entries/pin.mjs", "../../../lib/ui/locations/entries/report.mjs", "../../../lib/ui/locations/entries/streetview.mjs", "../../../lib/ui/locations/entries/tab.mjs", "../../../lib/ui/locations/entries/text.mjs", "../../../lib/ui/locations/entries/textarea.mjs", "../../../lib/ui/locations/entries/time.mjs", "../../../lib/ui/locations/entries/_entries.mjs", "../../../lib/ui/locations/_locations.mjs", "../../../lib/ui/Dataview.mjs", "../../../lib/ui/Tabview.mjs", "../../../lib/ui/elements/card.mjs", "../../../lib/ui/elements/chkbox.mjs", "../../../lib/ui/elements/contextMenu.mjs", "../../../lib/ui/elements/drawer.mjs", "../../../lib/ui/elements/drawing.mjs", "../../../lib/ui/elements/dropdown.mjs", "../../../lib/ui/elements/dropdown_multi.mjs", "../../../lib/ui/elements/isoline_params_here.mjs", "../../../lib/ui/elements/isoline_params_mapbox.mjs", "../../../lib/ui/elements/legendIcon.mjs", "../../../lib/ui/elements/modal.mjs", "../../../lib/ui/elements/slider.mjs", "../../../lib/ui/elements/slider_ab.mjs", "../../../lib/ui/elements/toolbar_el.mjs", "../../../lib/ui/elements/_elements.mjs", "../../../lib/ui/utils/Chart.mjs", "../../../lib/ui/utils/Tabulator.mjs", "../../../lib/ui/utils/tabulatorUtils.mjs", "../../../lib/ui/utils/idleLogout.mjs", "../../../lib/ui/utils/imagePreview.mjs", "../../../lib/ui/utils/resizeHandler.mjs", "../../../lib/ui/utils/_utils.mjs", "../../../lib/ui/Gazetteer.mjs", "../../../lib/ui.mjs"],
  "sourcesContent": ["mapp.utils.merge(mapp.dictionaries, {\n  en: {\n    layer_zoom_to_extent: \"Zoom to filtered layer extent\",\n    layer_visibility: \"Toggle visibility\",\n  },\n  de: {\n    layer_zoom_to_extent: \"Zoom zum Ausma\u00DF des gefilterten Datensatzes\",\n    layer_visibility: \"Umschalten der Ansicht\",\n  },\n  cn: {\n    layer_zoom_to_extent: \"\u7F29\u653E\u81F3\u76F8\u5E94\u7B5B\u9009\u8303\u56F4\",\n    layer_visibility: \"\u5207\u6362\u53EF\u89C1\u6027\",\n  },\n  pl: {\n    layer_zoom_to_extent: \"Poka\u017C zasi\u0119g warstwy\",\n    layer_visibility: \"Widoczno\u015B\u0107\",\n  },\n  ko: {\n    layer_zoom_to_extent: \"\uD544\uD130\uB41C \uB808\uC774\uC5B4\uD06C\uAE30\uC5D0 \uC90C(zoom)\",\n    layer_visibility: \"\uD1A0\uAE00 \uAC00\uC2DC\uC131\",\n  },\n  fr: {\n    layer_zoom_to_extent: \"Zoom sur l'\u00E9tendue de la couche\",\n    layer_visibility: \"Changer la visiblit\u00E9\",\n  },\n  ja: {\n    layer_zoom_to_extent: \"\u30D5\u30A3\u30EB\u30BF\u30FC\u3055\u308C\u305F\u30EC\u30A4\u30E4\u30FC\u7BC4\u56F2\u3092\u30BA\u30FC\u30E0\u306B\",\n    layer_visibility: \"\u8868\u793A\u5207\u66FF\",\n  }\n})\n\nexport default (layer) => {\n\n  const fullScreen = layer.filter.zoomToExtent && mapp.utils.html`\n    <button\n      data-id=zoomToExtent\n      title=${mapp.dictionary.layer_zoom_to_extent}\n      class=\"mask-icon fullscreen\"\n      onclick=${async e=>{\n        \n        // response indicates whether locations were found.\n        let response = await layer.zoomToExtent()\n\n        // disable button if no locations were found.\n        e.target.disabled = !response\n      }}>` || ``\n \n  const toggleDisplay = mapp.utils.html.node`\n    <button\n      data-id=display-toggle\n      title=${mapp.dictionary.layer_visibility}\n      class=\"${`mask-icon toggle ${layer.display && 'on' || 'off'}`}\"\n      onclick=${e=>{\n        layer.display ? layer.hide() : layer.show()\n      }}>`\n\n  const header = mapp.utils.html`\n    <h2>${layer.name || layer.key}</h2>\n    ${fullScreen}\n    ${toggleDisplay}\n    <div class=\"mask-icon expander\"></div>`\n    \n  // Create content from layer view panels and plugins\n  const content = Object.keys(layer)\n    .map(key => mapp.ui.layers.panels[key] && mapp.ui.layers.panels[key](layer))\n    .filter(panel => typeof panel !== 'undefined')\n\n  if (layer.meta) {\n    const meta = mapp.utils.html.node`<p class=\"meta\">`\n    meta.innerHTML = layer.meta\n    content.unshift(meta)\n  }\n\n  layer.view = mapp.ui.elements.drawer({\n    data_id: `layer-drawer`,\n    class: 'layer-view raised',\n    header: header,\n    content: content\n  })\n\n  layer.showCallbacks.push(()=>{\n    toggleDisplay.classList.add(\"on\")\n  })\n\n  layer.hideCallbacks.push(()=>{\n    toggleDisplay.classList.remove(\"on\")\n  })\n\n  // The layer view drawer should be disabled if layer.tables are not available for the current zoom level.\n  layer.mapview.Map.getTargetElement().addEventListener('changeEnd', ()=>{\n    if (!layer.tables) return;\n    if (layer.tableCurrent() === null) return layer.view.classList.add(\"disabled\")\n    layer.view.classList.remove(\"disabled\")\n  })\n\n  // Adding the empty class to the layer view drawer element will hide the drawer toggle icon and prevent the expand action.\n  layer.view.children.length <= 1 && layer.view.classList.add('empty')\n}", "import view from './view.mjs'\n\nmapp.utils.merge(mapp.dictionaries, {\n  en: {\n    layer_group_hide_layers: \"Hide all layers in group\",\n  },\n  de: {\n    layer_group_hide_layers: \"Ausschalten aller Ebenen in Gruppe\",\n  },\n  cn: {\n    layer_group_hide_layers: \"\u9690\u85CF\u56FE\u5C42\",\n  },\n  pl: {\n    layer_group_hide_layers: \"Ukryj warstwy z tej grupy\",\n  },\n  ko: {\n    layer_group_hide_layers: \"\uADF8\uB8F9\uC5D0\uC11C \uB808\uC774\uC5B4 \uC228\uAE30\uAE30\",\n  },\n  fr: {\n    layer_group_hide_layers: \"Cacher les couches du groupe\",\n  },\n  ja: {\n    layer_group_hide_layers: \"\u30B0\u30EB\u30FC\u30D7\u304B\u3089\u30EC\u30A4\u30E4\u30FC\u3092\u96A0\u3059\",\n  }\n})\n\nexport default function (params){\n\n  if (!params.mapview) return\n\n  if (!params.target) return\n\n  const listview = {\n    node: params.target,\n    groups: {}\n  }\n\n  // Loop through the layers and add to layers list.\n  Object.values(params.mapview.layers).forEach(layer => add(layer))\n\n  // Loop through the layers and add to layers list.\n  function add(layer){\n\n    if (layer.hidden) return;\n\n    // Create the layer view.\n    view(layer)\n\n    if (!layer.group) {\n      listview.node.appendChild(layer.view)\n      listview.node.dispatchEvent(new CustomEvent('addLayerView', {\n        detail: layer\n      }))\n      return\n    }\n\n    // Create new layer group if group does not exist yet.\n    if (!listview.groups[layer.group]) createGroup(layer)\n\n    // Add layer to group.\n    listview.groups[layer.group].addLayer(layer)\n\n    listview.node.dispatchEvent(new CustomEvent('addLayerView', {\n      detail: layer\n    }))\n  }\n\n  function createGroup(layer) {\n\n    // Create group object.\n    const group = {\n      list: []\n    }\n  \n    // Assign layer group to listview object.\n    listview.groups[layer.group] = group\n\n    // Create hide all group layers button.\n    const hideLayers = mapp.utils.html.node`\n      <button\n        class=\"mask-icon on visibility-off\"\n        title=${mapp.dictionary.layer_group_hide_layers}\n        onclick=${e => {\n\n          e.target.style.visibility = 'hidden'\n\n          group.list\n            .filter(layer => layer.display)\n            .forEach(layer => layer.hide())\n\n        }}>`\n \n    group.meta = mapp.utils.html.node`<div class=\"meta\">`\n\n    group.drawer = mapp.ui.elements.drawer({\n      data_id: `layer-drawer`,\n      class: 'layer-group',\n      header: mapp.utils.html`\n        <h2>${layer.group}</h2>\n        ${hideLayers}\n        <div class=\"mask-icon expander\"></div>`,\n      content: group.meta\n    })\n\n    listview.node.appendChild(group.drawer)\n\n    // Check whether some layers group are visible and toggle visible button display accordingly.\n    group.chkVisibleLayer = () => {\n\n      hideLayers.style.visibility = group.list.some(layer => layer.display) ?\n        'visible' : 'hidden'\n    }\n\n    group.addLayer = (layer) => {\n\n      layer.group = group\n  \n      if (layer.groupmeta) {\n        const metaContent = group.meta.appendChild(mapp.utils.html.node`<div>`)\n        metaContent.innerHTML = layer.groupmeta\n      }\n  \n      group.list.push(layer)\n  \n      group.drawer.appendChild(layer.view)\n\n      group.chkVisibleLayer()\n\n      layer.showCallbacks.push(()=>group.chkVisibleLayer())\n\n      layer.hideCallbacks.push(()=>group.chkVisibleLayer())      \n    }\n  \n  }\n}", "export default {\n  like: filter_text,\n  match: filter_text,\n  numeric: filter_numeric,\n  integer: filter_numeric,\n  in: filter_in,\n  date: filter_date,\n  datetime: filter_date,\n  boolean: filter_boolean,\n  null: filter_null,\n}\n\nlet timeout;\n\nfunction applyFilter(layer, zoom) {\n  clearTimeout(timeout);\n\n  // enable zoomToExtent button.\n  let btn = layer.view.querySelector('[data-id=zoomToExtent]')\n  if (btn) btn.disabled = false;\n\n  // Debounce layer reload by 500\n  timeout = setTimeout(() => {\n    timeout = null;\n    layer.reload();\n    layer.mapview.Map.getTargetElement().dispatchEvent(new Event('changeEnd'))\n  }, 500);\n}\n\nfunction filter_text(layer, entry){\n  return mapp.utils.html.node`\n  <input\n    type=\"text\"\n    onkeyup=${(e) => {\n      if (!e.target.value.length) {\n\n        // Delete filter for empty input.\n        delete layer.filter.current[entry.filter.field]\n      } else {\n        layer.filter.current[entry.filter.field] = {\n          [entry.filter.type]: encodeURIComponent(`${entry.filter.leading_wildcard && '%' || ''}${e.target.value}`)\n        }\n      }\n      applyFilter(layer)\n    }}>`;\n}\n\nfunction filter_boolean(layer, entry) {\n\n  function booleanFilter(checked) {\n    layer.filter.current[entry.filter.field] = {\n      boolean: checked\n    }\n    layer.reload();\n    layer.mapview.Map.getTargetElement().dispatchEvent(new Event('changeEnd'))\n  }\n\n  booleanFilter(false)\n\n  return mapp.ui.elements.chkbox({\n    label: entry.label || entry.title || 'chkbox',\n    onchange: booleanFilter\n  })\n}\n\nfunction filter_null(layer, entry) {\n\n  function nullFilter(checked) {\n    layer.filter.current[entry.filter.field] = {\n      null: checked\n    }\n    layer.reload();\n    layer.mapview.Map.getTargetElement().dispatchEvent(new Event('changeEnd'))\n  }\n\n  nullFilter(false)\n\n  return mapp.ui.elements.chkbox({\n    label: entry.label || entry.title || 'chkbox',\n    onchange: nullFilter\n  })\n}\n\nasync function filter_numeric(layer, entry){\n\n  if (!entry.filter.max) {\n\n    let response = await mapp.utils.xhr(`${layer.mapview.host}/api/query?${mapp.utils.paramString({\n      template: 'field_max',\n      locale: layer.mapview.locale.key,\n      layer: layer.key,\n      table: layer.tableCurrent(),\n      field: entry.field,\n    })}`);\n\n    entry.filter.max = response.max\n  }\n\n  if (!entry.filter.min) {\n\n    let response = await mapp.utils.xhr(`${layer.mapview.host}/api/query?${mapp.utils.paramString({\n      template: 'field_min',\n      locale: layer.mapview.locale.key,\n      layer: layer.key,\n      table: layer.tableCurrent(),\n      field: entry.field,\n    })}`);\n\n    entry.filter.min = response.min\n  }\n\n  if (!entry.filter.step) {\n\n    entry.filter.step = entry.filter.type === 'integer' ? 1 : 0.01;\n  }\n\n\n  layer.filter.current[entry.field] = Object.assign(\n    {\n      gte: Number(entry.filter.min),\n      lte: Number(entry.filter.max)\n    },\n    layer.filter.current[entry.field]);\n\n  applyFilter(layer);\n\n  return mapp.ui.elements.slider_ab({\n    min: Number(entry.filter.min),\n    max: Number(entry.filter.max),\n    step: entry.filter.step,\n    label_a: 'Greater than',\n    val_a: Number(entry.filter.min),\n    callback_a: e => {\n      layer.filter.current[entry.field].gte = Number(e.target.value)\n      applyFilter(layer)\n    },\n    label_b: 'Lesser than',\n    val_b: Number(entry.filter.max),\n    callback_b: e => {\n      layer.filter.current[entry.field].lte = Number(e.target.value)\n      applyFilter(layer)\n    }\n\n  })\n\n}\n\nasync function filter_in(layer, entry) {\n\n  if (entry.filter.distinct) {\n\n    const response = await mapp.utils.xhr(`${layer.mapview.host}/api/query?` +\n      mapp.utils.paramString({\n        template: 'distinct_values',\n        dbs: layer.dbs,\n        table: layer.tableCurrent(),\n        field: entry.field\n      }))\n\n    entry.filter.in = response\n      .map(r=>r[entry.field])\n      .filter(f=>f !== null)\n  }\n\n  const chkSet = new Set(layer.filter?.current[entry.filter.field]?.in || []);\n\n  if (entry.filter.dropdown) {\n\n    return mapp.ui.elements.dropdown_multi({\n      placeholder: 'Select Multiple',\n      entries: entry.filter.in.map(val => ({\n        title: val,\n        option: val,\n        selected: chkSet.has(val)\n      })),\n      callback: async (e, options) => {\n        Object.assign(layer.filter.current, {\n          [entry.filter.field]:{\n            in: options\n          }\n        })\n        layer.reload()\n        layer.mapview.Map.getTargetElement().dispatchEvent(new Event('changeEnd'))\n      }\n    })\n  }\n\n  return entry.filter.in.map(val => mapp.ui.elements.chkbox({\n    val: val,\n    label: val,\n    checked: chkSet.has(val),\n    onchange: (checked, val) => {\n  \n      if (checked) {\n  \n        if (!layer.filter.current[entry.filter.field]) layer.filter.current[entry.filter.field] = {}\n  \n        if (!layer.filter.current[entry.filter.field].in) {\n          layer.filter.current[entry.filter.field].in = []\n        }\n  \n        // Add value to filter array.\n        layer.filter.current[entry.filter.field].in.push(encodeURIComponent(val));\n                  \n      } else {\n  \n        // Get index of value in filter array.\n        let idx = layer.filter.current[entry.filter.field]['in'].indexOf(encodeURIComponent(val));\n  \n        // Splice filter array on idx.\n        layer.filter.current[entry.filter.field].in.splice(idx, 1);\n  \n        if (!layer.filter.current[entry.filter.field].in.length) {\n          delete layer.filter.current[entry.filter.field].in\n        }\n  \n      }\n  \n      layer.reload()\n      layer.mapview.Map.getTargetElement().dispatchEvent(new Event('changeEnd'))\n  \n    }\n  }))\n}\n\nfunction filter_date(layer, entry) {\n\n  const inputAfter = mapp.utils.html.node`\n    <input\n      data-id=\"inputAfter\"\n      onchange=${onClose}\n      type=${entry.type === \"datetime\" && \"datetime-local\" || \"date\"}>`;\n\n  const inputBefore = mapp.utils.html.node`\n    <input\n      data-id=\"inputBefore\"\n      onchange=${onClose}\n      type=${entry.type === \"datetime\" && \"datetime-local\" || \"date\"}>`;\n\n  function onClose(e) {\n\n    if (e.target.dataset.id === 'inputAfter') {\n\n      layer.filter.current[entry.field] = Object.assign(\n        layer.filter.current[entry.field] || {},\n        {\n          gt: new Date(e.target.value).getTime() / 1000\n        })\n      \n    }\n\n    if (e.target.dataset.id === 'inputBefore') {\n\n      layer.filter.current[entry.field] = Object.assign(\n        layer.filter.current[entry.field] || {},\n        {\n          lt: new Date(e.target.value).getTime() / 1000\n        })\n      \n    }\n\n    layer.reload();\n    layer.mapview.Map.getTargetElement().dispatchEvent(new Event('changeEnd'))\n  }\n\n  return mapp.utils.html`\n    <div style=\"\n      display: grid;\n      grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));\n      grid-gap: 5px;\">\n      <label>Date after\n        ${inputAfter}</label>\n      <label>Date before\n        ${inputBefore}</label>`\n\n}", "mapp.utils.merge(mapp.dictionaries, {\n  en: {\n    layer_add_new_location: \"Add new locations\",\n  },\n  de: {\n    layer_add_new_location: \"Erstelle neue Lage\",\n  },\n  cn: {\n    layer_add_new_location: \"\u6570\u636E\u68C0\u89C6\",\n  },\n  pl: {\n    layer_add_new_location: \"Dodaj nowe miejsca\",\n  },\n  ko: {\n    layer_add_new_location: \"\uC0C8\uB85C\uC6B4 \uC704\uCE58 \uCD94\uAC00\",\n  },\n  fr: {\n    layer_add_new_location: \"Ajouter des nouveaux lieux\",\n  },\n  ja: {\n    layer_add_new_location: \"\u65B0\u3057\u3044\u30ED\u30B1\u30FC\u30B7\u30E7\u30F3\u3092\u8FFD\u52A0\",\n  }\n})\n\nexport default layer => {\n\n  const options = {\n    layer,\n    srid: layer.srid,\n    edit: layer.edit,\n    mapview: layer.mapview\n  };\n  \n  const cards = typeof layer.edit === 'object' && Object.keys(layer.edit)\n    .map(key => mapp.ui.elements.drawing[key] && mapp.ui.elements.drawing[key](options, draw))\n    .filter(node => !!node)\n\n  // Short circuit panel creation without cards.\n  if (!cards.length) return;\n\n  const panel = mapp.ui.elements.drawer({\n    data_id: `draw-drawer`,\n    class: 'raised',\n    header: mapp.utils.html`\n      <h3>${mapp.dictionary.layer_add_new_location}</h3>\n      <div class=\"mask-icon expander\"></div>`,\n    content: mapp.utils.html`\n      ${cards}`,\n  });\n\n  return panel;\n}\n\nfunction draw(e, options) {\n\n  const btn = e.target\n\n  if (btn.classList.contains('active')) {\n    btn.classList.remove('active')\n    options.mapview.interactions.highlight()\n    return;\n  }\n\n  btn.classList.add('active')\n  \n  options.layer.show()\n\n  options.layer.view.querySelector('.header').classList.add('edited', 'active')\n\n  options.callback = async feature => {\n\n    if (feature) {\n\n      const location = {\n        layer: options.layer,\n        new: true\n      }\n\n      location.id = await mapp.utils.xhr({\n        method: 'POST',\n        url: `${location.layer.mapview.host}/api/location/new?` +\n          mapp.utils.paramString({\n            locale: location.layer.mapview.locale.key,\n            layer: location.layer.key,\n            table: location.layer.tableCurrent()\n          }),\n        body: JSON.stringify({\n          [location.layer.geom]: feature.geometry\n        })\n      })\n    \n      options.layer.reload()\n                              \n      mapp.location.get(location)\n    }\n\n    options.layer.view.querySelector('.header').classList.remove('edited', 'active')\n\n    if (btn.classList.contains('active')) {\n      btn.classList.remove('active')\n      options.mapview.interactions.highlight()\n    }\n  }\n\n  options.mapview.interactions.draw(options)\n}", "mapp.utils.merge(mapp.dictionaries, {\n  en: {\n    layer_filter_header: \"Filter\",\n    layer_filter_select: \"Select filter from list\",\n  },\n  de: {\n    layer_filter_header: \"Filter\",\n    layer_filter_select: \"Filter Auswahl\",\n  },\n  cn: {\n    layer_filter_header: \"\u7B5B\u9009\",\n    layer_filter_select: \"\u4ECE\u5217\u8868\u7B5B\u9009\",\n  },\n  pl: {\n    layer_filter_header: \"Filtruj\",\n    layer_filter_select: \"Wybierz filtr z listy\",\n  },\n  ko: {\n    layer_filter_header: \"\uD544\uD130\",\n    layer_filter_select: \"\uB9AC\uC2A4\uD2B8\uB85C \uBD80\uD130 \uD544\uD130 \uC120\uD0DD\",\n  },\n  fr: {\n    layer_filter_header: \"Filtres\",\n    layer_filter_select: \"Choisir un filtre dans la liste\",\n  },\n  ja: {\n    layer_filter_header: \"\u30D5\u30A3\u30EB\u30BF\u30FC\",\n    layer_filter_select: \"\u30EA\u30B9\u30C8\u304B\u3089\u30D5\u30A3\u30EB\u30BF\u30FC\u3092\u9078\u629E\",\n  }\n})\n\nexport default layer => {\n\n  if (!layer.infoj?.some((entry) => entry.filter)) return;\n\n  layer.filter.list = layer.infoj\n    .filter(entry => entry.filter)\n    .filter(entry => !layer.filter?.exclude?.includes(entry.field))\n    .map(entry => {\n      entry.title = entry.filter.title || entry.title || entry.field\n      return entry\n    })\n\n  const dropdown = mapp.ui.elements.dropdown({\n    data_id: `${layer.key}-filter-dropdown`,\n    placeholder: mapp.dictionary.layer_filter_select,\n    entries: layer.filter.list,\n    callback: async (e, entry) => {\n      \n      // Display clear all button.\n      layer.filter.view.querySelector(\"[data-id=clearall]\").style.display = 'block';\n\n      if (entry.filter.card) return;\n\n      entry.filter.field = entry.filter.field || entry.field\n\n      entry.filter.remove = () => {\n        delete layer.filter.current[entry.filter.field];\n        delete entry.filter.card\n        layer.reload();\n\n        // enable zoomToExtent button.\n        let btn = layer.view.querySelector('[data-id=zoomToExtent]')\n        if (btn) btn.disabled = false;\n    \n        // Only show the clearall filter button when filter cards are displayed as children to the filter view.\n        layer.filter.view.querySelector(\"[data-id=clearall]\").style.display = layer.filter.view.children.length === 3 ? 'none' : 'block';\n      };\n\n      if (!mapp.ui.layers.filters[entry.filter.type]) return;\n\n      // If not implicit in the filter object the field will be assigned from the entry.\n      entry.filter.field = entry.filter.field || entry.field\n\n      const input = await mapp.ui.layers.filters[entry.filter.type](layer, entry);\n\n      entry.filter.card = layer.filter.view.appendChild(mapp.ui.elements.card({\n        header: entry.filter.title || entry.title,\n        close: entry.filter.remove,\n        content: input\n      })).title\n    }\n  })\n\n  const clearAll = mapp.utils.html`\n    <button\n      data-id=clearall\n      class=\"primary-colour\"\n      style=\"display: none; margin-bottom: 5px;\"\n      onclick=${e => {\n\n        layer.filter.list\n          .filter((entry) => entry.filter.card)\n          .forEach(entry => {\n            entry.filter.card.querySelector(\"[data-id=close]\").click()\n          })\n\n        // enable zoomToExtent button.\n        let btn = layer.view.querySelector('[data-id=zoomToExtent]')\n        if (btn) btn.disabled = false;\n\n        layer.reload()\n\n      }}>${mapp.dictionary.layer_filter_clear_all}`\n\n  layer.filter.view = mapp.ui.elements.drawer({\n    data_id: `filter-drawer`,\n    class: 'raised',\n    header: mapp.utils.html`\n      <h3>${mapp.dictionary.layer_filter_header}</h3>\n      <div class=\"mask-icon expander\"></div>`,\n    content: mapp.utils.html`\n      ${dropdown}\n      ${clearAll}`\n  })\n\n  return layer.filter.view\n}", "export default layer => {\n\n  const gazetteer = mapp.utils.html.node`\n  <div class=\"dropdown active\">\n    <input id=\"gazetteerInput\" type=\"text\" placeholder=${layer.gazetteer.placeholder || 'Search'}>\n    <ul></ul>`\n\n  mapp.ui.Gazetteer(Object.assign({\n    mapview: layer.mapview,\n    target: gazetteer,\n    layer: layer.key\n  }, layer.gazetteer));\n  \n  return gazetteer\n}", "mapp.utils.merge(mapp.dictionaries, {\n  en: {\n    layer_dataview_header: \"Data Views\",\n  },\n  de: {\n    layer_dataview_header: \"Datenansichten\",\n  },\n  cn: {\n    layer_dataview_header: \"\u6570\u636E\u68C0\u89C6\",\n  },\n  pl: {\n    layer_dataview_header: \"Widoki danych\",\n  },\n  ko: {\n    layer_dataview_header: \"\uB370\uC774\uD130 \uBCF4\uAE30\",\n  },\n  fr: {\n    layer_dataview_header: \"Vues des donn\u00E9es\",\n  },\n  ja: {\n    layer_dataview_header: \"\u30C7\u30FC\u30BF\u30D3\u30E5\u30FC\",\n  }\n})\n\nexport default layer => {\n  \n  // Create chkbox controls for each dataview entry.\n  const dataviewChkboxes = Object.entries(layer.dataviews).map(entry => {\n\n    if (typeof entry[1] !== 'object') return;\n\n    // Assign layer and key to the dataview entry object.\n    const dataview = Object.assign(entry[1], {\n      key: entry[0],\n      layer,\n      host: layer.mapview.host\n    })\n\n    // Find tabview element from data-id attribute.\n    const tabview = document.querySelector(`[data-id=${dataview.target}]`)\n\n    // Return if the named tabview is not found in document.\n    if (!tabview) return;\n\n    // Assign target html element for dataview.\n    dataview.target = mapp.utils.html.node`<div class=\"dataview-target\">`\n\n    // Create dataview from entry.\n    layer.display && dataview.display && createTabAndShow()\n\n    function createTabAndShow() {\n\n      if (dataview.show) return dataview.show()\n\n      mapp.ui.Dataview(dataview)\n        .then(() => dataview.show())\n\n      // Pass dataview entry as detail to the tabview.\n      // The dataview entry becomes a tab.\n      tabview.dispatchEvent(new CustomEvent('addTab', {\n        detail: dataview\n      }))\n    }\n\n    layer.showCallbacks.push(()=>{\n      dataview.display && createTabAndShow()\n    })\n\n    // Return the chkbox control.\n    return mapp.ui.elements.chkbox({\n      label: dataview.title || dataview.key,\n      checked: !!dataview.display,\n      onchange: (checked) => {\n  \n        dataview.display = checked\n\n        // Show or remove tab according to the checked/display value.\n        dataview.display ?\n          createTabAndShow() :\n          dataview.remove()\n    \n      }\n    })\n\n  })\n\n  if (layer.dataviews.hide) return;\n\n  // Create a drawer with the dataview chkbox controls.\n  const drawer = mapp.ui.elements.drawer({\n    data_id: `dataviews-drawer`,\n    class: 'raised',\n    header: mapp.utils.html`\n      <h3>${mapp.dictionary.layer_dataview_header}</h3>\n      <div class=\"mask-icon expander\"></div>`,\n    content: mapp.utils.html`${dataviewChkboxes}`\n  })\n\n  return drawer\n}", "export default layer => {\n\n  // Create chkbox controls for each dataview entry.\n  const reportLinks = Object.keys(layer.reports).map(key => {\n\n    const report = layer.reports[key]\n  \n    report.key = key\n  \n    report.host = layer.mapview.host\n  \n    const href = `${report.host}/view?${mapp.utils.paramString({\n      template: report.template,\n      locale: layer.mapview.locale.key,\n      lat: mapp.hooks.current?.lat,\n      lng: mapp.hooks.current?.lng,\n      z: mapp.hooks.current?.z,\n    })}`;\n  \n    return mapp.utils.html`\n      <a\n        class=\"link-with-img\"\n        target=\"_blank\"\n        href=\"${href}\">\n        <div class=\"mask-icon event-note\"></div>\n        <span>${report.title || report.key}`;\n  \n  });\n  \n  // Create a drawer with the dataview chkbox controls.\n  const drawer = mapp.ui.elements.drawer({\n    data_id: `reports-drawer`,\n    class: 'raised',\n    header: mapp.utils.html`\n      <h3>Reports</h3>\n      <div class=\"mask-icon expander\"></div>`,\n    content: mapp.utils.html`${reportLinks}`\n  })\n  \n  return drawer\n}", "mapp.utils.merge(mapp.dictionaries, {\n  en: {\n    layer_style_header: \"Style\",\n    layer_style_select_theme: \"Select thematic style\",\n    layer_style_display_labels: \"Display labels\",\n    layer_style_switch_caption: \"Click on labels to switch visibility or \",\n    layer_style_switch_all: \"switch all\",\n    layer_grid_legend_ratio: \"Display colour as a ratio to the size\",\n    layer_style_cluster: \"Multiple locations\",\n  },\n  de: {\n    layer_style_header: \"Stil\",\n    layer_style_select_theme: \"Auswahl eines thematischen Stiles\",\n    layer_style_display_labels: \"Umschalten der Label Ansicht\",\n    layer_style_switch_caption: \"Auswahl der Label schaltet Ansicht um oder \",\n    layer_style_switch_all: \"Alle ausw\u00E4hlen\",\n    layer_grid_legend_ratio: \"Farbe im Verh\u00E4ltnis zur Gr\u00F6\u00DFe\",\n    layer_style_cluster: \"Mehrere Lagen\",\n  },\n  cn: {\n    layer_style_header: \"\u98CE\u683C\u6837\u5F0F\",\n    layer_style_select_theme: \"\u9009\u62E9\u4E3B\u9898\u98CE\u683C\",\n    layer_style_display_labels: \"\u663E\u793A\u6807\u7B7E\",\n    layer_style_switch_caption: \"\u5355\u51FB\u56FE\u6807\u4EE5\u5207\u6362\u53EF\u89C1\u6027 \",\n    layer_style_switch_all: \"\u5168\u90E8\u5207\u6362\",\n    layer_grid_legend_ratio: \"\u663E\u793A\u989C\u8272\u4E0E\u5C3A\u5BF8\u6BD4\u4F8B\",\n    layer_style_cluster: \"\u591A\u4E2A\u5730\u70B9\",\n  },\n  pl: {\n    layer_style_header: \"Styl\",\n    layer_style_select_theme: \"Wybierz styl tematyczny\",\n    layer_style_display_labels: \"Poka\u017C etykiety\",\n    layer_style_switch_caption: \"Kliknij etykiety aby zmieni\u0107 widoczno\u015B\u0107 albo \",\n    layer_style_switch_all: \"zmie\u0144 wszystkie\",\n    layer_grid_legend_ratio: \"Poka\u017C kolor w proporcji do rozmiaru\",\n    layer_style_cluster: \"Wi\u0119cej miejsc\",\n  },\n  ko: {\n    layer_style_header: \"\uC2A4\uD0C0\uC77C\",\n    layer_style_select_theme: \"\uC8FC\uC81C\uBCC4 \uC2A4\uD0C0\uC77C \uC120\uD0DD\",\n    layer_style_display_labels: \"\uB77C\uBCA8 \uD45C\uC2DC\",\n    layer_style_switch_caption: \"\uAC00\uC2DC\uC131 \uBCC0\uACBD\uC744 \uC704\uD574 \uB77C\uBCA8 \uD074\uB9AD \uB610\uB294 \",\n    layer_style_switch_all: \"\uBAA8\uB450 \uBCC0\uACBD\",\n    layer_grid_legend_ratio: \"\uD06C\uAE30\uBE44\uC728\uC5D0 \uB530\uB978 \uC0C9\uC0C1 \uD45C\uC2DC\",\n    layer_style_cluster: \"\uBCF5\uC218 \uC704\uCE58\",\n  },\n  fr: {\n    layer_style_header: \"Style\",\n    layer_style_select_theme: \"Choisir un th\u00E8me dans la liste\",\n    layer_style_display_labels: \"Afficher les \u00E9tiquettes\",\n    layer_style_switch_caption: \"Cliquer sur l'etiquette pour changer la visiblit\u00E9 ou \",\n    layer_style_switch_all: \"changer tout\",\n    layer_grid_legend_ratio: \"Rapport de coleur et de taille\",\n    layer_style_cluster: \"Plusieurs lieux\",\n  },\n  ja: {\n    layer_style_header: \"\u30B9\u30BF\u30A4\u30EB\",\n    layer_style_select_theme: \"\u30C6\u30FC\u30DE\u30B9\u30BF\u30A4\u30EB\u3092\u9078\u629E\",\n    layer_style_display_labels: \"\u30E9\u30D9\u30EB\u3092\u8868\u793A\",\n    layer_style_switch_caption: \"\u8868\u793A\u5207\u66FF\u3048\u306B\u306F\u5404\u30E9\u30D9\u30EB\u3092\u30AF\u30EA\u30C3\u30AF\u3059\u308B\u304B \",\n    layer_style_switch_all: \"\u5168\u8868\u793A\u6216\u3044\u306F\u5168\u975E\u8868\u793A\",\n    layer_grid_legend_ratio: \"\u8272\u306F\u30B5\u30A4\u30BA\u306E\u6BD4\u7387\u3067\u8868\u793A\",\n    layer_style_cluster: \"\u591A\u6570\u306E\u30ED\u30B1\u30FC\u30B7\u30E7\u30F3\",\n  }\n})\n\nexport default layer => {\n\n  if (layer.style.hidden) return;\n\n  const content = []\n\n  if (layer.style.opacitySlider) {\n\n    content.push(mapp.ui.elements.slider({\n      label: 'Change layer opacity:',\n      min: 0,\n      max: 100,\n      val: parseInt(layer.L.getOpacity()*100),\n      callback: e => {\n        layer.L.setOpacity(parseFloat(e.target.value/100))\n      }\n    }))\n  }\n\n  if (layer.style.scaleSlider) {\n\n    content.push(mapp.ui.elements.slider({\n      label: 'Change icon scale:',\n      min: layer.style.scaleSlider.min,\n      max: layer.style.scaleSlider.max,\n      step: layer.style.scaleSlider.step,\n      val: layer.style.default.icon.scale,\n      callback: e => {\n        layer.style.default.icon.scale = e.target.value\n        layer.L.changed()\n      }\n    }))\n  }\n  \n  // Add toggle for label layer.\n  if (layer.style.label) {\n\n    const labelCheckbox = mapp.ui.elements.chkbox({\n      data_id: 'labelCheckbox',\n      label: layer.style.label.title || mapp.dictionary.layer_style_display_labels,\n      checked: !!layer.style.label.display,\n      onchange: (checked) => {\n        layer.style.label.display = checked\n        layer.L.setStyle(layer.L.getStyle())\n      }\n    })\n\n    if (layer.style.label.minZoom || layer.style.label.maxZoom) {\n      layer.mapview.Map.getTargetElement().addEventListener(\"changeEnd\", () => {\n        const z = layer.mapview.Map.getView().getZoom();\n\n        const chkBox = layer.view.querySelector(\"[data-id=labelCheckbox]\")\n\n        if (z <= layer.style.label.minZoom || z >= layer.style.label.maxZoom) {\n          return chkBox.classList.add(\"disabled\");\n        }\n\n        chkBox.classList.remove(\"disabled\");\n      });\n    }\n\n    content.push(labelCheckbox)\n  }\n\n  // Add theme control\n  if (layer.style.themes && Object.keys(layer.style.themes).length > 1) {\n    content.push(mapp.utils.html`\n      <div>${mapp.dictionary.layer_style_select_theme}</div>\n        ${mapp.ui.elements.dropdown({\n          entries: Object.keys(layer.style.themes).map(key =>({\n            title:  layer.style.themes[key].title || key,\n            option: key\n          })),\n          callback: (e, entry) => {\n\n            // Set layer style theme from dropdown option.\n            layer.style.theme = layer.style.themes[entry.option]\n\n            // Clear the legend container.\n            layer.style.legend.innerHTML = ''\n            \n            // Render legend into drawer.\n            mapp.ui.layers.legends[layer.style.theme.type] && mapp.utils.render(\n              layer.style.legend.parentElement,\n              mapp.ui.layers.legends[layer.style.theme.type](layer))\n\n            layer.reload()\n          }\n        })}`)\n  }\n\n  if (layer.style.theme?.title && !layer.style.themes) {\n    content.push(mapp.utils.html`\n      <h3>${layer.style.theme.title}</h3>`)\n  }\n\n  function modalButton(){\n    return mapp.utils.html`\n      <button\n        style=\"height: 1.5em; width: 1.5em; float: right; margin-top: 5px;\"\n        class=\"mask-icon open-in-new\"\n        title=\"Open in Modal\"\n        onclick=${e=>{\n          let btn = e.target\n\n          btn.style.display = 'none'\n\n          mapp.ui.elements.modal({\n            target: layer.mapview.Map.getTargetElement(),\n            content: layer.style.legend.parentElement,\n            close: () => {\n              layer.style.drawer.append(layer.style.legend.parentElement)\n              btn.style.display = 'block'\n            }\n          })\n          \n        }}>`\n  }\n\n  mapp.ui.layers.legends[layer.style.theme?.type] && content.push(mapp.utils.html`\n    ${layer.style.allowModal && modalButton() || undefined}\n    <div class=\"legend\">\n      ${mapp.ui.layers.legends[layer.style.theme.type](layer)}`)\n\n  if (!content.length) return;\n\n  layer.style.drawer = mapp.ui.elements.drawer({\n    data_id: `style-drawer`,\n    class: 'raised',\n    header: mapp.utils.html`\n      <h3>${mapp.dictionary.layer_style_header}</h3>\n      <div class=\"mask-icon expander\"></div>`,\n    content: content\n  })\n\n  return layer.style.drawer\n}", "export default layer => {\n\n  const theme = layer.style.theme\n\n  const grid = []\n\n  // Switch all control\n  layer.filter && grid.push(mapp.utils.html`\n    <div\n      class=\"switch-all\"\n      style=\"grid-column: 1/3;\">\n      ${mapp.dictionary.layer_style_switch_caption}\n      <button\n        class=\"primary-colour bold\"\n        onclick=${e => {\n          e.target.closest('.legend').querySelectorAll('.switch').forEach(_switch => _switch.click())\n\n          // theme flag is set in styles or theme.\n          (layer.style.filter || theme.filter)\n            ? layer.L.changed()\n            : layer.reload()\n            \n        }}>${mapp.dictionary.layer_style_switch_all}</button>.`)\n\n  Object.entries(theme.cat).forEach(cat => {\n\n    // Assemble cat_style from defaults and cat style.\n    const cat_style = Object.assign(\n      {},\n      layer.style.default,\n      (cat[1].style && cat[1].style.icon || cat[1].style) || cat[1])\n\n    // Cat icon.\n    let icon = mapp.utils.html`\n      <div\n        style=\"height: 24px; width: 24px; grid-column: 1;\">\n        ${mapp.ui.elements.legendIcon(\n          Object.assign({ width: 24, height: 24 }, cat_style)\n        )}`;\n\n    // Cat label with filter function.\n    let label = mapp.utils.html`\n      <div\n        class=${`label ${layer.filter && 'switch' ||''} ${\n          layer.filter?.current[theme.field]?.ni?.indexOf(cat[0]) === 0 ? 'disabled' : ''\n        }`}\n        style=\"grid-column: 2;\"\n        onclick=${e => {\n\n          if (!layer.filter) return;\n\n          e.target.classList.toggle('disabled')\n\n          // Add cat value to current NI (not in) field filter.\n          if (e.target.classList.contains('disabled')) {\n\n            // Create empty field filter object if non exists.\n            if (!layer.filter.current[theme.field]) {\n              layer.filter.current[theme.field] = {}\n            }\n\n            // Create empty NI filter array for field if non exists.\n            if (!layer.filter.current[theme.field].ni) {\n              layer.filter.current[theme.field].ni = []\n            }\n\n            // Push cat value into the NI filter array.\n            layer.filter\n              .current[theme.field].ni\n              .push(cat[1].keys || cat[0])\n           \n            // Flatten the filter in case of arrays filter.\n            layer.filter\n              .current[theme.field].ni = layer.filter.current[theme.field].ni.flat()\n\n          // Remove cat value from current NI field filter.\n          } else {\n\n            if (Array.isArray(cat[1].keys)) {\n\n              cat[1].keys.forEach(key => {\n\n                // Splice key out of the NI array.\n                layer.filter\n                  .current[theme.field].ni\n                  .splice(layer.filter.current[theme.field].ni.indexOf(key), 1)\n\n              })\n\n            } else {\n\n              // Splice value out of the NI array.\n              layer.filter\n                .current[theme.field].ni\n                .splice(layer.filter.current[theme.field].ni.indexOf(cat[0]), 1)\n\n            }\n \n            // Delete current field filter if NI array is empty.\n            if (!layer.filter.current[theme.field].ni.length) {\n              delete layer.filter.current[theme.field]\n            }\n          }\n\n          // theme flag is set in styles or theme.\n          (layer.style.filter || theme.filter)\n            ? layer.L.changed()\n            : layer.reload()\n\n        }}>${cat[1].label || cat[0]}`\n\n    // Push icon and label into legend grid.\n    grid.push(mapp.utils.html`\n    <div \n      data-id=${cat[0]}\n      class=\"contents\">\n      ${icon}${label}`)\n  })\n\n  // Attach row for cluster locations.\n  if (layer.style.cluster) {\n  \n    // Create cluster icon.\n    let icon = mapp.utils.html`\n      <div\n        style=\"height: 40px; width: 40px;\">\n        ${mapp.ui.elements.legendIcon(Object.assign({\n          width: 40,\n          height: 40\n        }, layer.style.default, layer.style.cluster))}`\n   \n    // Create cluster label.\n    let label = mapp.utils.html`\n      <div\n        class=\"label\">\n        ${mapp.dictionary.layer_style_cluster}`\n\n    // Push icon and label into legend grid.\n    grid.push(mapp.utils.html`\n      <div \n        data-id=\"cluster\"\n        class=\"contents\">\n        ${icon}${label}`)\n  }\n\n  layer.style.legend = mapp.utils.html.node`<div class=\"grid\">${grid}`\n\n  return layer.style.legend\n}", "export default layer => {\n  layer.style.legend = mapp.utils.html.node`<div>`\n\n  return layer.style.legend\n}", "export default layer => {\n\n  const theme = layer.style.theme\n\n  const grid = []\n\n  theme.cat_arr.forEach(cat => {\n\n    // Assemble cat_style from defaults and cat style.\n    const cat_style = Object.assign(\n      {},\n      layer.style.default,\n      (cat.style && cat.style.icon || cat.style) || cat)\n\n    // Cat icon.\n    let icon = mapp.utils.html`\n      <div\n        style=\"height: 24px; width: 24px; grid-column: 1;\">\n        ${mapp.ui.elements.legendIcon(\n          Object.assign({ width: 24, height: 24 }, cat_style)\n        )}`;\n\n    // Cat label.\n    let label = mapp.utils.html`\n      <div class=\"label\" style=\"grid-column: 2;\">${cat.label || cat.value}`\n\n    // Push icon and label into legend grid.\n    grid.push(mapp.utils.html`\n      <div \n        data-id=${cat.value}\n        class=\"contents\">\n        ${icon}${label}`)\n\n  })\n\n  layer.style.legend = mapp.utils.html.node`<div class=\"grid\">${grid}`\n\n  return layer.style.legend\n}", "export default layer => {\n\n  const grid = []\n\n  grid.push(mapp.ui.elements.dropdown({\n    entries: Object.entries(layer.grid_fields).map(e=>({\n      title: e[0],\n      options: e[1]\n    })),\n    callback: (e, entry) => {\n      layer.grid_size = entry.options\n      layer.reload()\n    }\n  }))\n\n  const n = layer.style.range.length\n\n  const xmlSerializer = new XMLSerializer()\n\n  const centreBit = mapp.utils.html`\n  <div\n    class=\"grid\"\n    style=${`grid-template-columns: repeat(${n}, 1fr); grid-template-rows: 20px 20px 20px 20px;`}>\n    <div data-id=\"size-labels\" class=\"contents\">\n      <span data-id=\"size-min\" style=\"grid-row:1;grid-column:1;\">min</span>\n      <span data-id=\"size-avg\" style=${`grid-row:1;grid-column:${Math.ceil(n/2)};text-align:center;`}>avg</span>\n      <span data-id=\"size-max\" style=${`grid-row:1;grid-column:${n};text-align:end;`}>max</span>\n    </div>\n    <div data-id=\"size-icons\" class=\"contents\">\n      ${layer.style.range.map((colour, i)=>{\n\n        let icon = mapp.utils.svg.node`<svg height=50 width=50>\n          <circle\n            fill='#777'\n            cx=27\n            cy=27\n            r='${(23/n)*(i+1)}'/>\n          <circle\n            fill='#999'\n            cx=25\n            cy=25\n            r='${(23/n)*(i+1)}'/>`\n\n        let backgroundImage = `data:image/svg+xml,${encodeURIComponent(xmlSerializer.serializeToString(icon))}`\n\n        const inlineStyle = `\n          grid-row:2;\n          grid-column:${i+1};\n          background-position: center;\n          background-repeat: no-repeat;\n          background-size: contain;\n          width: 100%;\n          height: 100%;\n          background-image: url(${backgroundImage});`\n\n        return mapp.utils.html`<div style=${inlineStyle}>`\n\n      })}\n    </div>\n    <div data-id=\"colour-icons\" class=\"contents\">\n      ${layer.style.range.map((colour, i)=>mapp.utils.html`\n        <div style=${`grid-row:3;grid-column:${i+1};background-color:${colour};width:100%;height:100%;`}>\n      `)}\n    </div>\n    <div data-id=\"colour-labels\" class=\"contents\">\n      <span data-id=\"color-min\" style=\"grid-row:4;grid-column:1;\">min</span>\n      <span data-id=\"color-avg\" style=${`grid-row:4;grid-column:${Math.ceil(n/2)};text-align:center;`}>avg</span>\n      <span data-id=\"color-max\" style=${`grid-row:4;grid-column:${n};text-align:end;`}>max</span>\n    </div>\n  </div>`\n\n  grid.push(centreBit)\n\n  // Create grid_size dropdown.\n  grid.push(mapp.ui.elements.dropdown({\n    entries: Object.entries(layer.grid_fields).map(e=>({\n      title: e[0],\n      options: e[1]\n    })),\n    span: Object.keys(layer.grid_fields)[1],\n    callback: (e, entry) => {\n      layer.grid_color = entry.options\n      layer.reload()\n    }\n  }))\n\n  grid.push(mapp.ui.elements.chkbox({\n    label: mapp.dictionary.layer_grid_legend_ratio,\n    onchange: (checked) => {\n      layer.grid_ratio = checked\n      layer.reload()    \n    }}))\n\n  layer.style.legend = mapp.utils.html.node`\n    <div class=\"legend\">${grid}`\n\n  layer.style.legend.addEventListener('update', () => {\n      layer.style.legend.querySelector('[data-id=size-min]').textContent = layer.sizeMin.toLocaleString('en-GB', { maximumFractionDigits: 0 });\n      layer.style.legend.querySelector('[data-id=size-avg]').textContent = layer.sizeAvg.toLocaleString('en-GB', { maximumFractionDigits: 0 });\n      layer.style.legend.querySelector('[data-id=size-max]').textContent = layer.sizeMax.toLocaleString('en-GB', { maximumFractionDigits: 0 });\n\n      if (layer.grid_ratio) {\n\n        layer.style.legend.querySelector('[data-id=color-min]').textContent = layer.colorMin.toLocaleString('en-GB', { maximumFractionDigits: 0, style: 'percent' });\n        layer.style.legend.querySelector('[data-id=color-avg]').textContent = layer.colorAvg.toLocaleString('en-GB', { maximumFractionDigits: 0, style: 'percent' });\n        layer.style.legend.querySelector('[data-id=color-max]').textContent = layer.colorMax.toLocaleString('en-GB', { maximumFractionDigits: 0, style: 'percent' });\n\n      } else {\n\n        layer.style.legend.querySelector('[data-id=color-min]').textContent = layer.colorMin.toLocaleString('en-GB', { maximumFractionDigits: 0 });\n        layer.style.legend.querySelector('[data-id=color-avg]').textContent = layer.colorAvg.toLocaleString('en-GB', { maximumFractionDigits: 0 });\n        layer.style.legend.querySelector('[data-id=color-max]').textContent = layer.colorMax.toLocaleString('en-GB', { maximumFractionDigits: 0 });\n\n      }\n  })\n\n  return layer.style.legend\n}", "export default layer => {\n\n  const grid = []\n\n  let icon = mapp.utils.html`\n  <div\n    style=\"height: 24px; width: 24px;\">\n    ${mapp.ui.elements.legendIcon(\n      Object.assign({ width: 24, height: 24 }, Object.assign({}, layer.style.default, layer.style.theme.style))\n    )}`;\n\n  grid.push(mapp.utils.html`\n    <div \n      class=\"contents\">\n      ${icon}<div class=\"label\">${layer.style.theme.label}`)\n\n  layer.style.legend = mapp.utils.html.node`<div class=\"grid\">${grid}`\n\n  return layer.style.legend\n}", "import view from './view.mjs'\n\nimport listview from './listview.mjs'\n\nimport filters from './filters.mjs'\n\n// Panels\n\nimport edit from './panels/draw.mjs'\n\nimport filter from './panels/filter.mjs'\n\nimport gazetteer from './panels/gazetteer.mjs'\n\nimport dataviews from './panels/dataviews.mjs'\n\nimport reports from './panels/reports.mjs'\n\nimport style from './panels/style.mjs'\n\n// Styles\n\nimport categorized from './legends/categorized.mjs'\n\nimport distributed from './legends/distributed.mjs'\n\nimport graduated from './legends/graduated.mjs'\n\nimport grid from './legends/grid.mjs'\n\nimport basic from './legends/basic.mjs'\n\nexport default {\n  view,\n  listview,\n  filters,\n  panels: {\n    edit,\n    style,\n    filter,\n    gazetteer,\n    reports,\n    dataviews\n  },\n  legends: {\n    categorized,\n    distributed,\n    graduated,\n    grid,\n    basic,\n  },\n  styles: {\n    categorized: layer => {console.warn('Please use mapp.layers.legends instead of mapp.layers.styles'); return categorized(layer)},\n    graduated: layer => {console.warn('Please use mapp.layers.legends instead of mapp.layers.styles'); return graduated(layer)},\n    grid: layer => {console.warn('Please use mapp.layers.legends instead of mapp.layers.styles'); return grid(layer)},\n    basic: layer => {console.warn('Please use mapp.layers.legends instead of mapp.layers.styles'); return basic(layer)},\n  }\n}", "mapp.utils.merge(mapp.dictionaries, {\n  en: {\n    location_zoom: \"Zoom map to feature bounds\",\n    location_save: \"Save changes to cloud\",\n    location_remove: \"Remove feature from selection\",\n    location_delete: \"Delete location\",\n  },\n  de: {\n    location_zoom: \"Ansicht den Lagen Geometrien anpassen\",\n    location_save: \"Speichern der Daten\u00E4nderungen\",\n    location_remove: \"Lagen Auswahl aufheben\",\n    location_delete: \"L\u00F6schen der Lage\",\n  },\n  cn: {\n    location_zoom: \"\u7F29\u653E\u5730\u56FE\u81F3\u76EE\u6807\u8303\u56F4\",\n    location_save: \"\u5C06\u66F4\u6539\u4FDD\u5B58\u81F3\u4E91\",\n    location_remove: \"\u5220\u9664\u6240\u9009\u76EE\u6807\u8981\u7D20\",\n    location_delete: \"\u5220\u9664\u5730\u70B9\",\n  },\n  pl: {\n    location_zoom: \"Poka\u017C zasi\u0119g miejsca\",\n    location_save: \"Zapisz zmiany\",\n    location_remove: \"Odznacz miejsce\",\n    location_delete: \"Usu\u0144 miejsce\",\n  },\n  ko: {\n    location_zoom: \"\uD55C\uACC4\uB97C \uD3EC\uD568\uD55C \uC90C \uC9C0\uB3C4\",\n    location_save: \"\uBCC0\uACBD\uC0AC\uD56D \uD06C\uB77C\uC6B0\uB4DC \uC800\uC7A5\",\n    location_remove: \"\uC120\uD0DD\uC5D0\uC11C \uD2B9\uC9D5 \uC81C\uAC70\",\n    location_delete: \"\uC704\uCE58 \uC0AD\uC81C\",\n  },\n  fr: {\n    location_zoom: \"Zoom sur le lieu\",\n    location_save: \"Enregistrer les modifications\",\n    location_remove: \"Le d\u00E9s\u00E9lectionner\",\n    location_delete: \"Supprimer le lieu\",\n  },\n  ja: {\n    location_zoom: \"\u30D5\u30A3\u30FC\u30C1\u30E3\u7BC4\u56F2\u306B\u306F\u30DE\u30C3\u30D7\u3092\u30BA\u30FC\u30E0\",\n    location_save: \"\u30AF\u30E9\u30A6\u30C9\u306B\u5909\u66F4\u3092\u4FDD\u5B58\",\n    location_remove: \"\u9078\u629E\u304B\u3089\u30D5\u30A3\u30FC\u30C1\u30E3\u30FC\uFF08\u6A5F\u80FD\uFF09\u3092\u524A\u9664\",\n    location_delete: \"\u30ED\u30B1\u30FC\u30B7\u30E7\u30F3\u3092\u524A\u9664\",\n  }\n})\n\nexport default location => {\n\n  location.removeCallbacks?.push(function(){\n    location.view.remove()\n  })\n\n  location.updateCallbacks?.push(function(){\n    location.view.dispatchEvent(new Event('updateInfo'))\n  })\n\n  // Header with expander icon. \n  const header = [\n    mapp.utils.html`<h2>${location.record.symbol}`,\n    mapp.utils.html`<div class=\"mask-icon expander\">`\n  ]\n\n  // Zoom to location bounds.\n  location.infoj.some(\n    entry => (entry.type === 'pin' || entry.type === 'geometry')\n      && entry.value) && header.push(mapp.utils.html`\n    <button\n      title = ${mapp.dictionary.location_zoom}\n      class = \"mask-icon search\"\n      onclick = ${e => {\n        location.flyTo()\n      }}>`)\n\n  // Edit icon.\n  if (location.layer?.toggleLocationViewEdits) {\n\n    // Remove edit from infoj entries\n    function removeEdits(){\n\n      location.infoj.forEach(entry => {\n\n        // Remove newValue\n        delete entry.newValue\n\n        if (!entry.edit) return;\n  \n        entry._edit = entry.edit\n        delete entry.edit\n      })\n    }\n\n    // New locations should be editable.\n    !location.new && removeEdits()\n\n    // After location update...\n    location.updateCallbacks.push(()=>{\n\n      // Remove on class from toggle.\n      editToggle.classList.remove('on')\n      removeEdits()\n      infoj.remove()\n      infoj = mapp.ui.locations.infoj(location)\n      location.view.appendChild(infoj)\n    })\n\n    const editToggle = mapp.utils.html.node`\n      <button\n        title = \"Enable edits\"\n        class = ${`mask-icon build ${location.new && 'on' ||''}`}\n        onclick = ${e => {\n\n          // Edits are on\n          if (e.target.classList.contains('on')) {\n\n            // Remove on class from button.\n            e.target.classList.remove('on')\n\n            // Remove edits from infoj.\n            removeEdits()\n\n          } else {\n\n            // Add on class to button.\n            e.target.classList.add('on')\n            \n            // Restore edit in infoj entries\n            location.infoj.forEach(entry => {\n\n              if (!entry._edit) return;\n\n              entry.edit = entry._edit\n              delete entry._edit\n            })\n\n          }\n\n          infoj.remove()\n        \n          infoj = mapp.ui.locations.infoj(location)\n      \n          location.view.appendChild(infoj)\n        }}>`\n\n    header.push(editToggle)\n  }\n\n  // Update icon.\n  header.push(mapp.utils.html`\n    <button\n      title = ${mapp.dictionary.location_save}\n      class = \"mask-icon cloud-upload\"\n      style = \"display: none;\"\n      onclick = ${e => {\n        location.view.classList.add('disabled')\n        location.update()\n      }}>`)\n\n  // Trash icon.\n  location.layer?.edit?.delete && header.push(mapp.utils.html`\n    <button\n      title = ${mapp.dictionary.location_delete}\n      class = \"mask-icon trash\"\n      onclick = ${e => {\n        location.trash()\n      }}>`)\n\n  // Clear selection.\n  header.push(mapp.utils.html`\n    <button\n      title = ${mapp.dictionary.location_remove}\n      class = \"mask-icon close no\"\n      onclick = ${e => {\n        location.remove()\n        // location.layer.mapview.Map.updateSize()\n      }}>`)\n\n  location.view = mapp.ui.elements.drawer({\n    class: 'location-view raised expanded',\n    header: header\n  })\n\n  let infoj = location.view.appendChild(mapp.ui.locations.infoj(location))\n\n  //location.view.dispatchEvent(new CustomEvent('appendInfoj'))\n\n  location.view.querySelector('.header').style.borderBottom = `3px solid ${location.record.colour}`\n\n  // Add listener for custom valChange event.\n  location.view.addEventListener('valChange', e => {\n\n    // entry object is provided as event detail.\n    if (e.detail.value != e.detail.newValue) {\n\n      // New value is different from current value.\n      e.detail.node.classList.add('val-changed')\n      \n    } else {\n\n      // New value is the same as current value.\n      delete e.detail.newValue\n      e.detail.node.classList.remove('val-changed')      \n    }\n\n    // Hide upload button if no other field in the infoj has a newValue.\n    location.view.querySelector('.cloud-upload')\n      .style.display = location.infoj\n        .some(entry => typeof entry.newValue !== 'undefined')\n          && 'inline-block' || 'none';\n\n  })\n\n  location.view.addEventListener('updateInfo', ()=>{\n\n    infoj.remove()\n\n    location.view.querySelector('.cloud-upload').style.display = 'none'\n\n    location.view.classList.remove('disabled')\n\n    infoj = mapp.ui.locations.infoj(location)\n\n    location.view.appendChild(infoj)\n  })\n}", "mapp.utils.merge(mapp.dictionaries, {\n  en: {\n    location_clear_all: \"Clear locations\",\n  },\n  de: {\n    location_clear_all: \"Entferne Auswahl\"\n  },\n  cn: {\n    location_clear_all: \"\uBAA8\uB4E0 \uC704\uCE58 \uC81C\uAC70\",\n  },\n  pl: {\n    location_clear_all: \"Wyczy\u015B\u0107 selekcje\",\n  },\n  ko: {\n    location_clear_all: \"\u6E05\u9664\u6240\u6709\u5730\u70B9\",\n  },\n  fr: {\n    location_clear_all: \"Des\u00E9lectionner tous les lieux.\",\n  },\n  ja: {\n    location_clear_all: \"\u5168\u30ED\u30B1\u30FC\u30B7\u30E7\u30F3\u3092\u30AF\u30EA\u30A2\",\n  }\n})\n\nconst list = [\n  {\n    symbol: 'A',\n    colour: '#2E6F9E'\n  },\n  {\n    symbol: 'B',\n    colour: '#EC602D'\n  },\n  {\n    symbol: 'C',\n    colour: '#5B8C5A'\n  },\n  {\n    symbol: 'D',\n    colour: '#B84444'\n  },\n  {\n    symbol: 'E',\n    colour: '#514E7E'\n  },\n  {\n    symbol: 'F',\n    colour: '#E7C547'\n  },\n  {\n    symbol: 'G',\n    colour: '#368F8B'\n  },\n  {\n    symbol: 'H',\n    colour: '#841C47'\n  },\n  {\n    symbol: 'I',\n    colour: '#61A2D1'\n  },\n  {\n    symbol: 'J',\n    colour: '#37327F'\n  }\n]\n\nexport default params => {\n\n  if (!params.mapview) return\n\n  if (!params.target) return\n\n  const listview = {\n    node: params.target,\n    mapview: params.mapview\n  }\n\n  const clearAll = listview.node.appendChild(mapp.utils.html.node`\n    <button \n      style=\"display: none; width: 100%; text-align: right;\"\n      class=\"tab-display bold primary-colour text-shadow\"\n      onclick=${e => {\n        Object.values(listview.mapview.locations)\n          .forEach(location => location.remove())\n      }}>\n      ${mapp.dictionary.location_clear_all}`)\n\n  params.mapview.locations = new Proxy(params.mapview.locations, {\n    set: function(target, key, location){\n\n      // Find a free record for location.\n      const record = list.find(record => !record.hook)\n\n      // Set record hook from location.\n      record.hook = location.hook\n\n      // Assign record to the location.\n      location.record = record\n\n      // Set style from record.\n      location.style = {\n        strokeColor: record.colour,\n        fillColor: record.colour,\n        fillOpacity: 0.1\n      };\n\n      // Create OL Style object.\n      location.Style = mapp.utils.style([\n        {\n          strokeColor: \"#000\",\n          strokeOpacity: 0.1,\n          strokeWidth: 8,\n        },\n        {\n          strokeColor: \"#000\",\n          strokeOpacity: 0.1,\n          strokeWidth: 6,\n        },\n        {\n          strokeColor: \"#000\",\n          strokeOpacity: 0.1,\n          strokeWidth: 4,\n        },\n        {\n          strokeColor: location.style.strokeColor || \"#000\",\n          strokeWidth: 2,\n          fillColor: location.style.fillColor\n          || location.style.strokeColor || \"#fff\",\n          fillOpacity: location.style.fillOpacity || 0.2,\n        }\n      ]);\n\n      // Create OL Style object for pin icon.\n      location.pinStyle = mapp.utils.style({\n        icon: {\n          type: 'markerLetter',\n          letter: record.symbol,\n          color: location.style.strokeColor,\n          scale: 3,\n          anchor: [0.5, 1]\n        }\n      })\n\n      Reflect.set(...arguments)\n\n      // Create location view.\n      mapp.ui.locations.view(location)\n\n      // Collapse all location view drawer in list.\n      Object.values(listview.node.children).forEach(el => el.classList.remove('expanded'))\n\n      // New location view should be inserted after clearAll but before first current location view.\n      listview.node.insertBefore(location.view, clearAll.nextSibling)\n\n      // Send event after the location view has been added to the DOM.\n      location.view.dispatchEvent(new Event('addLocationView'))\n\n      // Show the clear all button.\n      clearAll.style.display = 'block'\n\n      // Click locations tab header.\n      document.querySelector(\"[data-id=locations]\").click()\n\n      // Hide locations tab if no gazetteer input present.\n      document.querySelector(\"[data-id=locations]\").style.display = 'block'\n\n      return true\n    },\n    deleteProperty: function (target, hook) {\n      Reflect.deleteProperty(...arguments)\n\n      let record = list.find(record => record.hook === hook)\n      record && delete record.hook\n\n      setTimeout(() => {\n\n        // clearAll should not be shown without locations to clear\n        if (!document.querySelectorAll('#locations > .location-view').length) {\n          \n          // Activate the layers panel\n          document.querySelector(\"[data-id=layers]\").click()\n\n          clearAll.style.display = 'none'\n\n          let gazInput = document.querySelector('#locations #gazetteerInput')\n\n          if (gazInput) {\n\n            // Clear the gazetteer input value.\n            gazInput.value = '';\n          } else {\n\n            // Hide locations tab if no gazetteer input present.\n            document.querySelector(\"[data-id=locations]\").style.display = 'none'\n          }\n        }\n        \n      }, 300)\n\n      return true\n    },\n  })\n\n  return listview\n}", "export default (location, infoj) => {\n\n  if (!location.infoj) return\n\n  // Create a grid view div.\n  const listview = mapp.utils.html.node`<div class=\"location-view-grid\">`\n\n  // Create object to hold view groups.\n  const groups = {}\n\n  // Iterate through info fields and add to info table.\n  for (const entry of infoj || location.infoj) {\n\n    // The location view entries should not be processed if the view is disabled.\n    if (location.view && location.view.classList.contains('disabled')) break;\n\n    // Location view elements will appended to the entry.listview element.\n    entry.listview = listview\n\n    // The default entry type is text.\n    entry.type = entry.type || 'text'\n\n    // Lookup for json value field entry\n    if (entry.objectAssignFromField) {\n\n      let fieldEntry = entry.location.infoj.find(_entry => _entry.field === entry.objectAssignFromField)\n\n      fieldEntry && Object.assign(entry, fieldEntry.value)\n    }\n\n    if (entry.objectMergeFromField) {\n\n      let fieldEntry = entry.location.infoj.find(_entry => _entry.field === entry.objectMergeFromField)\n\n      fieldEntry && mapp.utils.merge(entry, fieldEntry.value)\n    }    \n\n    // Skip entry.\n    if (entry.skipEntry) continue;\n\n    // Skip entries which are falsy if flagged.\n    if (entry.skipFalsyValue\n      && !entry.value\n      && !entry.edit) continue;\n\n    // Skip entries which are undefined if flagged.\n    if (entry.skipUndefinedValue\n      && typeof entry.value === 'undefined'\n      && !entry.edit) continue;\n\n    // Skip entries which are null if flagged.\n    if (entry.skipNullValue\n      && entry.value === null\n      && !entry.edit) continue;\n\n    if (entry.nullValue\n      && entry.value === null\n      && !entry.defaults\n      && !entry.edit) entry.value = entry.nullValue;\n\n    // Groups must be checked first since it should be possible to next any type of location view element in a group.\n    if (entry.group) {\n\n      // Create new group\n      if (!groups[entry.group]) {\n\n        groups[entry.group] = entry.listview.appendChild(\n          mapp.ui.elements.drawer({\n            class: `group ${entry.expanded && 'expanded' || ''}`,\n            header: mapp.utils.html`\n              <h3>${entry.group}</h3>\n              <div class=\"mask-icon expander\"></div>`,\n          }))\n      }\n\n      // The group will replace the entry listview to which elements will be appended.\n      entry.listview = groups[entry.group]\n    }\n\n    entry.node = entry.listview.appendChild(mapp.utils.html.node`\n      <div\n        data-type=${entry.type}\n        class=${`contents ${entry.type} ${entry.class || ''} ${entry.inline && 'inline' || ''}`}>`)\n\n    if (entry.title) {\n\n      entry.node.append(mapp.utils.html.node`\n        <div\n          class=\"label\"\n          style=\"${`${entry.css_title || ''}`}\"\n          title=\"${entry.tooltip || null}\">${entry.title}`)\n    }\n\n    // Check whether entry has a value\n    if (entry.value === null || typeof entry.value === 'undefined') {\n\n      // Assign the default value if set.\n      entry.value = entry.default || entry.value\n    }\n\n    // Check whether query returns data.\n    if (entry.queryCheck) {\n\n      // Stringify paramString from object.\n      const paramString = mapp.utils.paramString(mapp.utils.queryParams(entry))\n\n      // Run the entry query.\n      mapp.utils\n        .xhr(`${entry.host || entry.location.layer.mapview.host}/api/query?${paramString}`)\n        .then(response => {\n          \n          if (response === null) {\n            \n            // Entries without response in the queryCheck should not be displayed and disabled.\n            delete entry.display\n            entry.disabled = true\n          } else {\n\n            // Assign response to entry data.\n            // Prevents dataviews to query again the same data.\n            entry.data = response;\n          };\n\n          // Create element to be appended into empty entry.node\n          const el = mapp.ui.locations.entries[entry.type]?.(entry)\n\n          el && entry.node.append(el)\n        })\n\n      continue;\n    }\n\n    // Create element to be appended into empty entry.node\n    const el = mapp.ui.locations.entries[entry.type]?.(entry)\n\n    // Break this for loop!\n    if (el === 'break') break;\n\n    el && entry.node.append(el)\n  }\n\n  return listview\n}", "export default entry => {\n\n  const chkbox = mapp.ui.elements.chkbox({\n    label: entry.label || entry.title,\n    checked: entry.value,\n    disabled: !entry.edit,\n    onchange: (checked) => {\n\n      entry.newValue = checked\n      entry.location.view?.dispatchEvent(\n        new CustomEvent('valChange', {\n          detail: entry\n        }))\n  \n    }\n  })\n\n  const node = mapp.utils.html.node`${chkbox}`\n\n  return node\n}", "export default entry => {\n\n  // Dataview methods require the layer and host to be defined on the entry.\n  entry.layer = entry.location.layer\n  entry.host = entry.host || entry.location.layer.mapview.host\n\n  // An entry which depend on another entry field will not be displayed if that field value is falsy.\n  if (entry.dependents && entry.dependents.some(\n      dependant => entry.location.infoj.some(\n        _entry => (!_entry.value && _entry.field === dependant)\n      ))) delete entry.display;\n\n  // Dataview has already been created. e.g. after the location (view) is updated.\n  if (entry.update) {\n\n    // Update dataview if displayed.\n    entry.display && entry.update()\n\n    // Return elements to location view.\n    return mapp.utils.html.node`\n      ${entry.chkbox || ''}\n      ${entry.locationViewTarget || ''}`\n  }\n\n  // Dataview will be rendered into target identified by ID.\n  if (typeof entry.target === 'string' && document.getElementById(entry.target)) {\n\n    // Assign element by ID as target.\n    entry.target = document.getElementById(entry.target)\n  \n    // Create and update the dataview.\n    mapp.ui.Dataview(entry).then(() => entry.update())\n  \n    return;\n  }\n\n  // Find tabview element from data-id attribute.\n  entry.tabview = entry.tabview || typeof entry.target === 'string'\n    && document.querySelector(`[data-id=${entry.target}]`)\n\n  // Dataview will be rendered into a tabview panel.\n  if (entry.tabview) {\n\n    // Assign target html element for dataview.\n    entry.target = mapp.utils.html.node`<div class=\"dataview-target\">`\n\n    // Dataview should be displayed.\n    entry.display && createTabAndShow(entry)\n  };\n\n  // Dataview will be rendered into location view.\n  if (typeof entry.target === 'string') {\n      \n    entry.locationViewTarget = mapp.utils.html.node`\n      <div\n        class=\"${`location ${entry.class}`}\">`\n  \n    entry.target = entry.locationViewTarget\n\n    entry.display && mapp.ui.Dataview(entry).then(() => entry.update())\n  }\n\n  // A checkbox will only be created if the label key value is provided.\n  entry.chkbox = entry.label && mapp.ui.elements.chkbox({\n    label: entry.label,\n    disabled: entry.disabled,\n    checked: !!entry.display,\n    onchange: (checked) => {\n\n      entry.display = checked\n\n      // Dataview is location view.\n      if (entry.locationViewTarget) {\n\n        // Hide dataview\n        if (!entry.display) {\n          entry.locationViewTarget.style.display = 'none'\n          return;\n        }\n\n        entry.locationViewTarget.style.display = 'block'\n        \n        // Location view has already been created.\n        typeof entry.update === 'function' && entry.update()\n\n        // Create location view.\n        typeof entry.update !== 'function' && mapp.ui.Dataview(entry).then(() => {\n\n          // Run update query if data has not already been asigned.\n          typeof entry.data === 'object'\n            ? entry.setData(entry.data)\n            : entry.update()\n        })\n\n        return;\n      }\n\n      // Dataview is in tabview\n      entry.display ? createTabAndShow(entry) : entry.remove()\n    }\n  })\n\n  // Return elements to location view.\n  return mapp.utils.html.node`\n    ${entry.chkbox || ''}\n    ${entry.locationViewTarget || ''}`\n}\n\nfunction createTabAndShow(entry) {\n\n  // The show method indicates that the tab has already been created.\n  if (entry.show) return entry.show()\n\n  // Dataview creation must be complete for methods to be available.\n  mapp.ui.Dataview(entry).then(() => {\n\n    // Assign border style based on the location view record (from list)\n    entry.tab_style = `border-bottom: 3px solid ${entry.location.style.strokeColor}`\n\n    // Create tab after dataview creation is complete.\n    entry.tabview.dispatchEvent(new CustomEvent('addTab', {\n      detail: entry\n    }))\n\n    // Show the tab if display is true.\n    entry.display && entry.show()\n  })\n}", "export default entry => {\n\n  let val\n\n  if (entry.edit) {\n\n    val = mapp.utils.html.node`\n      <input\n        type=${entry.type === \"datetime\" && \"datetime-local\" || \"date\"}\n        value=${entry.value &&\n          (entry.type === \"datetime\" && new Date(entry.value * 1000).toISOString().split('Z')[0]\n            || new Date(entry.value * 1000).toISOString().split('T')[0])}\n        onchange=${e => {\n\n          entry.newValue = new Date(e.target.value).getTime() / 1000\n\n          entry.location.view?.dispatchEvent(\n            new CustomEvent('valChange', {\n              detail: entry\n            })\n          )\n\n        }}>`;\n        \n  } else {\n\n    val = entry.value && new Date(entry.value * 1000).toLocaleString(entry.locale, entry.options)\n  }\n\n  const node = mapp.utils.html.node`\n    <div\n      class=\"val\"\n      style=\"${`${entry.css_val || ''}`}\">\n      ${val}`\n\n  return node\n}", "export default entry => {\n\n  let val = entry.value\n\n  if (!val) {\n\n    val = entry.defaults === 'user' && mapp.user?.email || entry.nullValue\n\n    if (val) {\n \n      mapp.utils.xhr({\n        method: \"POST\",\n        url: `${entry.location.layer.mapview.host}/api/location/update?` +\n          mapp.utils.paramString({\n            locale: entry.location.layer.mapview.locale.key,\n            layer: entry.location.layer.key,\n            table: entry.location.layer.table,\n            id: entry.location.id,\n          }),\n        body: JSON.stringify({\n          [entry.field]: val\n        }),\n      });\n\n    }\n  }\n\n  const node = mapp.utils.html.node`\n    <div\n      class=\"val\"\n      style=\"${`${entry.css_val || ''}`}\">\n      ${entry.prefix}${val}${entry.suffix}`\n\n  return node\n}", "export default entry => {\n\n  const docs = entry.value.map(doc => mapp.utils.html`\n\t\t<div class=\"link-with-img\">\n      ${(entry.edit) && mapp.utils.html.node`\n        <button\n          class=\"mask-icon trash no\"\n          data-name=${doc.replace(/.*\\//, '').replace(/\\.([\\w-]{3})/, '')}\n          data-href=${doc}\n          onclick=${e => removeDocument(e)}>\n        </button>`}\t\t\n        <a target=\"_blank\"\n          href=${doc}>${doc.replace(/.*\\//, '').replace(/\\.([\\w-]{3})/, '')}`)\n\n  const upLoadBtn = mapp.utils.html.node`\n    <div class=\"mask-icon cloud-upload\">\n      <input\n        style=\"opacity: 0; width: 3em; height: 3em;\"\n        type=\"file\"\n        accept=\".txt,.pdf,.doc,.docx,.xls,.xlsx,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document;\"\n        onchange=${upload}>`\n\n  entry.edit && docs.push(upLoadBtn)\n\n  if (!docs.length) return;\n\n  const docs_list = mapp.utils.html.node`<div>${docs}`\n\n  return docs_list;\n\n  async function upload(e) {\n\n    entry.location.view?.classList.add('disabled')\n\n    const reader = new FileReader()\n      \n    const file = e.target.files[0]\n  \n    if (!file) return;\n\n    reader.onload = async readerOnload => {\n\n      const response = await mapp.utils.xhr({\n        method: 'POST',\n        requestHeader: {\n          'Content-Type': 'application/octet-stream'\n        },\n        url: `${entry.location.layer.mapview.host}/api/provider/cloudinary?${mapp.utils.paramString({\n          public_id: file.name,\n          resource_type: 'raw'\n        })}`,\n        body: readerOnload.target.result\n      })\n      \n      const secure_url = response.secure_url;\n      const public_id = response.public_id.replace(/.*\\//, '').replace(/\\.([\\w-]{3})/, '');\n\n      await mapp.utils.xhr(`${entry.location.layer.mapview.host}/api/query?` +\n        mapp.utils.paramString({\n          template: 'set_field_array',\n          locale: entry.location.layer.mapview.locale.key,\n          layer: entry.location.layer.key,\n          table: entry.location.table,\n          qID: entry.location.layer.qID,\n          id: entry.location.id,\n          action: 'append',\n          field: entry.field,\n          value: secure_url,\n        }))\n      \n      const newDoc = mapp.utils.html.node`\n        <div class=\"link-with-img\">\n          <button\n            class=\"mask-icon trash no\"\n            data-name=${public_id}\n            data-href=${secure_url}\n            onclick=${e => removeDocument(e)}>\n          </button>\n          <a target=\"_blank\"\n            href=${secure_url}>${public_id}`\n\n      docs_list.insertBefore(newDoc, upLoadBtn)\n\n      entry.location.view?.classList.remove('disabled')\n    }\n\n    reader.readAsDataURL(file)\n\n    e.target.value = ''\n  }\n\n\tasync function removeDocument(e) {\n\n\t\tif (!confirm('Remove document link?')) return;\n\n\t\tconst doc = e.target;\n\n    mapp.utils.xhr(`${entry.location.layer.mapview.host}/api/provider/cloudinary?${mapp.utils.paramString({\n      destroy: true,\n      public_id: doc.dataset.name\n    })}`)\n\n    await mapp.utils.xhr(`${entry.location.layer.mapview.host}/api/query?` +\n      mapp.utils.paramString({\n        template: 'set_field_array',\n        locale: entry.location.layer.mapview.locale.key,\n        layer: entry.location.layer.key,\n        table: entry.location.table,\n        qID: entry.location.layer.qID,\n        id: entry.location.id,\n        action: 'remove',\n        field: entry.field,\n        value: doc.dataset.href\n      }))    \n    \n    doc.parentNode.remove()\n  } \n}", "export default entry => {\n\n  entry.value = typeof entry.value === 'string' && JSON.parse(entry.value)\n    || entry.value\n\n  // Turn off display with no geometry to display.\n  entry.display = (entry.display && entry.value)\n\n  // Return if entry has no geometry value and is not editable.\n  if (!entry.value && !entry.edit) return;\n\n  // Assign Style if not already assigned.\n  entry.Style = entry.Style\n  \n    // Create OL style object from style object.\n    || typeof entry.style === 'object' && mapp.utils\n        .style(Object.assign({}, entry.location?.style || {}, entry.style))\n\n    // Assign style from location.\n    || entry.location.Style\n\n  // Assign method to show geometry in mapview.\n  entry.show = show\n\n  // Create checkbox to control geometry display.\n  const chkbox = mapp.ui.elements.chkbox({\n    label: entry.label || 'Geometry',\n    data_id: `${entry.field}-chkbox`,\n    checked: !!entry.display,\n    disabled: !entry.value,\n    onchange: (checked) => {\n      \n      // Show geometry of checked.\n      if (checked) {\n        entry.show()\n\n      } else {\n        \n        // Remove the geometry layer from map.\n        entry.display = false\n        entry.L && entry.location.layer.mapview.Map.removeLayer(entry.L)\n      }\n    }\n  })\n\n  // Show geometry if entry is set to display.\n  entry.display && entry.show()\n\n  // Options for edit and modifying methods.\n  const options = {\n    entry,\n    layer: entry.location.layer,\n    srid: entry.srid || entry.location.layer.srid,\n    edit: entry.edit,\n    mapview: entry.location.layer.mapview,\n  };\n\n  // Push elements for drawing methods into list.\n  const list = typeof entry.edit === 'object' && Object.keys(entry.edit)\n    .map(key => mapp.ui.elements.drawing[key] && mapp.ui.elements.drawing[key](options, draw))\n    .filter(node => !!node)\n\n  // Push modify button into list.\n  if (entry.edit?.geometry) {\n\n    let modifyBtn = mapp.utils.html.node`\n      <button\n        class=\"flat bold wide primary-colour\"\n        onclick=${e=>modify(e, options)}>\n        Modify Geometry`\n\n    if (entry.edit?.modifyBtnOnly) {\n      return modifyBtn\n    }\n\n    list.push(modifyBtn)\n  }\n\n  // Push modify button into list.\n  entry.value && entry.edit?.delete && list.push(mapp.utils.html`\n    <button\n      class=\"flat wide no-colour\"\n      onclick=${() => {\n\n        if (entry.display) {\n          remove()\n          return;\n        }\n\n        entry.show()\n\n        // Allow for geometries to be shown before confirming the deletion.\n        setTimeout(remove, 500)\n\n        function remove(){\n\n          // Return if user does not confirm deletion.\n          if (!confirm('Delete Geometry?')) return;\n\n          // Set newValue to null in order update location field in database.\n          entry.newValue = null\n\n          // Must be removed prior to database update / re-render.\n          if (entry.L) {\n            entry.location.layer.mapview.Map.removeLayer(entry.L)\n            delete entry.L\n          }\n          \n          // Re-renders location view after database update.\n          options.entry.location.update()\n        }\n\n      }}>Delete Geometry`)\n\n  const icon = entry.style && mapp.utils.html`\n    ${mapp.ui.elements.legendIcon(\n      Object.assign({ width: 24, height: 24 }, entry.style)\n    )}`;\n\n  if (list) {\n\n    // Return drawer with list elements to entry node.\n    return mapp.ui.elements.drawer({\n      data_id: `draw-drawer`,\n      header: mapp.utils.html`\n        ${chkbox}\n        <div class=\"mask-icon expander\"></div>\n        ${icon}`,\n      content: mapp.utils.html`\n        ${list}`,\n    })\n\n  }\n\n  // Return checkbox only if list is empty.\n  return mapp.utils.html.node`<div class=\"flex-spacer\">${chkbox}${icon}`\n}\n\n// Method to toggle the entry's geometry display.\nfunction show() {\n\n  this.display = true\n\n  const chkbox = this.location\n    .view?.querySelector(`[data-id=${this.field}-chkbox] input`)\n  \n  if (chkbox) chkbox.checked = true\n    \n  if (this.L) {\n\n    // Remove existing layer to prevent assertion error.\n    this.location.layer.mapview.Map.removeLayer(this.L)\n    delete this.L\n  }\n\n  // Create new geometry layer from entry value\n  this.L = this.location.layer.mapview.geoJSON({\n    zIndex: this.zIndex || 99,\n    geometry: this.value,\n    Style: this.Style,\n    dataProjection: this.srid || this.location?.layer?.srid\n  })\n\n  // Removes layer from mapview when location is removed.\n  this.location.Layers.push(this.L)\n}\n\n// Method for button element to call draw interaction with options.\nfunction draw(e, options) {\n\n  // Get button from event target.\n  const btn = e.target\n\n  // Check whether to cancel interaction.\n  if (btn.classList.contains('active')) {\n    btn.classList.remove('active')\n\n    // Begin highlight interaction on mapview.\n    // Cancels current interaction.\n    options.mapview.interactions.highlight()\n    return;\n  }\n\n  btn.classList.add('active')\n\n  // Tick display checkbox if not already set.\n  !options.entry.display && options.entry.show()\n\n  // Remove existing entry geometry layer.\n  options.entry.L\n    && options.entry.location.layer.mapview.Map.removeLayer(options.entry.L)\n\n  options.mapview.interactions.draw({\n    type: options.type,\n    geometryFunction: options.geometryFunction,\n    tooltip: options.tooltip,\n    srid: options.srid,\n    callback: feature => {\n\n      // Reset interaction and button\n      btn.classList.remove('active')\n      options.mapview.interactions.highlight()\n\n      // The callback returns a feature as geojson.\n      if (feature) {\n\n        // Assign feature geometry as new value.\n        options.entry.newValue = feature.geometry\n        options.entry.location.update()\n        return;\n      }\n\n      // Add original layer back with no new feature geometry returned from draw interaction.\n      options.entry.L\n        && options.entry.location.layer.mapview.Map.addLayer(options.entry.L)\n\n    }\n  })\n}\n\n// Method for button element to call modify interaction with options.\nfunction modify(e, options) {\n\n  const btn = e.target\n\n  // Check whether to cancel interaction.\n  if (btn.classList.contains('active')) {\n    btn.classList.remove('active')\n\n    // Begin highlight interaction on mapview.\n    // Cancels current interaction.\n    options.mapview.interactions.highlight()\n    return;\n  }\n\n  btn.classList.add('active')\n\n  // Tick display checkbox if not already set.\n  !options.entry.display && options.entry.show()\n\n  // Remove existing entry geometry layer.\n  options.entry.location.layer.mapview.Map.removeLayer(options.entry.L)\n\n  const feature = options.entry.L.getSource().getFeatures()[0]\n\n  options.mapview.interactions.modify({\n    Feature: feature.clone(),\n    layer: options.entry.location.layer,\n    snap: options.entry.edit.snap,\n    srid: options.entry.srid || options.entry.location.layer.srid,\n    callback: feature => {\n\n      // Reset interaction and button\n      btn.classList.remove('active')\n      options.mapview.interactions.highlight()\n\n      // The callback returns a feature as geojson.\n      if (feature) {\n\n        // Assign feature geometry as new value.\n        options.entry.newValue = feature.geometry\n        options.entry.location.update()\n        return;\n      }\n\n      // Add original layer back with no new feature geometry returned from draw interaction.\n      options.entry.location.layer.mapview.Map.addLayer(options.entry.L)\n    }\n  })\n}", "export default entry => {\n\n  const images = entry.value.map(image => mapp.utils.html`\n    <div>\n      <img src=${image}\n        onclick=${mapp.ui.utils.imagePreview}>\n        ${(entry.edit) && mapp.utils.html.node`\n          <button\n            class=\"mask-icon trash no\"\n            data-name=${image.replace(/.*\\//, '').replace(/\\.([\\w-]{3})/, '')}\n            data-src=${image}\n            onclick=${e => removeDocument(e)}>`\n          }`)\n\n  const upLoadBtn = mapp.utils.html.node`\n    <div class=\"mask-icon add-photo pos-center\">\n      <input\n        type=\"file\"\n        accept=\"image/*;capture=camera\"\n        onchange=${upload}>`\n\n  entry.edit && images.push(upLoadBtn)\n\n  if (!images.length) return;\n\n  const images_grid = mapp.utils.html.node`\n    <div\n      class=\"images-grid\">${images}`\n\n  return images_grid;\n\n  async function upload(e) {\n\n    entry.location.view?.classList.add('disabled')\n\n    const reader = new FileReader()\n      \n    const file = e.target.files[0]\n  \n    if (!file) return;\n\n    reader.onload = readerOnload => {\n\n      const img = new Image()\n      \n      img.onload = async () => {\n        \n        let\n          canvas = mapp.utils.html.node`<canvas>`,\n          max_size = 1024,\n          width = img.width,\n          height = img.height\n\n        // resize\n        if (width > height && width > max_size) {\n          height *= max_size / width\n          width = max_size\n\n        } else if (height > max_size) {\n          width *= max_size / height\n          height = max_size\n        }\n\n        canvas.width = width\n        canvas.height = height\n\n        canvas.getContext('2d').drawImage(img, 0, 0, width, height)\n\n        const dataURL = canvas.toDataURL('image/jpeg', 0.5)\n\n        const response = await mapp.utils.xhr({\n          method: 'POST',\n          requestHeader: {\n            'Content-Type': 'application/octet-stream'\n          },\n          url: `${entry.location.layer.mapview.host}/api/provider/cloudinary?${mapp.utils.paramString({\n            public_id: file.name.replace(/.*\\//, '').replace(/\\.([\\w-]{3})/, ''),\n            resource_type: 'image'\n          })}`,\n          body: mapp.utils.dataURLtoBlob(dataURL)\n        })\n\n        await mapp.utils.xhr(`${entry.location.layer.mapview.host}/api/query?` +\n          mapp.utils.paramString({\n            template: 'set_field_array',\n            locale: entry.location.layer.mapview.locale.key,\n            layer: entry.location.layer.key,\n            table: entry.location.table,\n            qID: entry.location.layer.qID,\n            id: entry.location.id,\n            action: 'append',\n            field: entry.field,\n            value:  response.secure_url,\n          }))\n\n        const newImg = mapp.utils.html.node`\n          <div>\n            <img\n              src=${response.secure_url}\n              onclick=${mapp.ui.utils.imagePreview}>\n              <button\n                class=\"mask-icon trash no\"\n                data-name=${response.public_id}\n                data-src=${response.secure_url}\n                onclick=${e => removeDocument(e)}>`\n  \n        images_grid.insertBefore(newImg, upLoadBtn)\n\n        entry.location.view?.classList.remove('disabled')\n      }\n\n      img.src = readerOnload.target.result\n    }\n\n    reader.readAsDataURL(file)\n\n    e.target.value = ''\n  }\n\n  async function removeDocument(e) {\n\n    if (!confirm('Remove image?')) return;\n\n    const img = e.target;\n\n    mapp.utils.xhr(`${entry.location.layer.mapview.host}/api/provider/cloudinary?${mapp.utils.paramString({\n      destroy: true,\n      public_id: img.dataset.name\n    })}`)\n\n    await mapp.utils.xhr(`${entry.location.layer.mapview.host}/api/query?` +\n      mapp.utils.paramString({\n        template: 'set_field_array',\n        locale: entry.location.layer.mapview.locale.key,\n        layer: entry.location.layer.key,\n        table: entry.location.table,\n        qID: entry.location.layer.qID,\n        id: entry.location.id,\n        action: 'remove',\n        field: entry.field,\n        value: img.dataset.src\n      }))      \n\n    img.parentNode.remove()\n  }\n}", "const typeMethods = {\n  isoline_here,\n  isoline_mapbox\n}\n\nexport default entry => {\n\n  entry.value = typeof entry.value === 'string'\n    && JSON.parse(entry.value)\n      || entry.value\n\n  // Assign Style if not already assigned.\n  entry.Style = entry.Style\n  \n    // Create OL style object from style object.\n    || typeof entry.style === 'object' && mapp.utils.style(entry.style)\n\n    // Assign style from location.\n    || entry.location.Style\n\n  const chkbox = mapp.ui.elements.chkbox({\n    label: entry.label || 'Isoline',\n    checked: !!entry.display,\n    onchange: (checked) => {\n\n      // Show geometry of checked.\n      if (checked) {\n        entry.show()\n\n      } else {\n        \n        // Remove the geometry layer from map.\n        entry.display = false\n        entry.L && entry.location.layer.mapview.Map.removeLayer(entry.L)\n      }\n    }\n  })\n\n  entry.show = show\n\n  // entry.show() returns true if location.update() is called.\n  if (entry.display && entry.show()) return 'break';\n\n  const icon = entry.style && mapp.utils.html`\n    ${mapp.ui.elements.legendIcon(\n      Object.assign({ width: 24, height: 24 }, entry.style)\n    )}`;\n\n  return mapp.utils.html.node`<div class=\"flex-spacer\">${chkbox}${icon}`\n}\n\nfunction show() {\n\n  this.display = true\n\n  if (this.L) {\n\n    // Remove existing layer to prevent assertion error.\n    this.location.layer.mapview.Map.removeLayer(this.L)\n\n    // Add existing geometry layer to mapview\n    this.location.layer.mapview.Map.addLayer(this.L)\n    return;\n  }\n\n  if (this.value) {\n\n    this.L = this.location.layer.mapview.geoJSON({\n      zIndex: this.zIndex,\n      geometry: this.value,\n      Style: this.Style,\n      dataProjection: '4326'\n    })\n\n    this.location.Layers.push(this.L)\n    return;\n  }\n\n  const pin = this.location.infoj.find(lookup => lookup.type === 'pin')\n\n  this.params.latlng = ol.proj.transform(pin.value,\n    `EPSG:${pin.srid || '3857'}`,\n    'EPSG:4326')\n\n  this.location.view?.classList.add('disabled')\n\n  typeMethods[this.type](this)\n\n  return true;\n}\n\nfunction isoline_mapbox(entry) {\n\n  // Assign entry params to defaults\n  const params = Object.assign({\n    profile: 'driving',\n    minutes: 10\n  }, entry.params)\n\n  mapp.utils\n    .xhr(`https://api.mapbox.com/isochrone/v1/mapbox/`\n      +`${params.profile}/${params.latlng[0]},${params.latlng[1]}?`\n      +`${mapp.utils.paramString({\n        contours_minutes: params.minutes,\n        polygons: true,\n        access_token: params.access_token\n      })}`)\n    .then(async response => {\n\n      if (!entry.location.remove) return;\n\n      if (!response.features) return;\n\n      // Assign feature geometry as new value.\n      entry.newValue = response.features[0].geometry\n\n      // Update the location in the database.\n      // The location view will be updated through callback after the update method.\n      entry.location.update()\n    })\n\n}\n\nfunction isoline_here(entry) {\n\n  // Assign entry params to defaults\n  const params = Object.assign({\n    'range[type]': 'time',\n    minutes: 10,\n    reverseDirection: false,\n    transportMode: 'car',\n    optimizeFor: 'balanced'\n  }, entry.params)\n\n  if(!params['range[values]']) params['range[values]'] = params.minutes * 60\n  delete params.minutes\n\n  params.origin = `${params.latlng[1]},${params.latlng[0]}`\n  delete params.latlng\n\n  mapp.utils\n    .xhr(`${entry.location.layer.mapview.host}/api/proxy?url=`\n      +`${encodeURIComponent(`https://isoline.router.hereapi.com/v8/isolines?`\n      +`${mapp.utils.paramString(params)}&{HERE}`)}`)\n    .then(response => {\n\n      if (!entry.location.remove) return;\n\n      if (!response.isolines) {\n        console.log(response)\n        return alert('Failed to process request')\n      }\n\n      const _coordinates = mapp.utils.here.decodeIsoline(response.isolines[0].polygons[0].outer)\n\n      _coordinates.polyline.forEach(p => p.reverse())\n\n      _coordinates.polyline.push(_coordinates.polyline[0])\n\n      // Assign feature geometry as new value.\n      entry.newValue = {\n        type: 'Polygon',\n        coordinates: [_coordinates.polyline]\n      }\n\n      // Update the location in the database.\n      // The location view will be updated through callback after the update method.\n      entry.location.update()\n    })\n\n}", "export default entry => {\n\n  if (entry.query) {\n\n    mapp.utils.xhr(`${entry.location.layer.mapview.host}/api/query/${entry.query}`)\n      .then(response => {\n        mapp.utils.render(\n          entry.node.querySelector('.val'),\n          mapp.utils.html`<pre><code>${JSON.stringify(response[entry.params.field], null, 2)}`)\n      })\n\n  }\n\n  let val = mapp.utils.html`\n    <pre><code>${JSON.stringify(entry.value, null, 2)}`\n\n  if (entry.edit) {\n\n    val = mapp.utils.html`\n    <textarea\n      style=\"auto; min-height: 50px;\"\n      onfocus=${e => {\n        e.target.style.height = e.target.scrollHeight + 'px';\n      }}\n      onfocusout=${e => {\n        e.target.style.height = 'auto';\n      }}\n      oninput=${e => {\n\n        entry.json = (() => {\n          try {\n            return JSON.parse(e.target.value)\n          } catch (e) {\n            return false \n          }\n        })();\n\n        e.target.style.border = entry.json ? 'none' : '1px solid red';\n      }}\n      onkeyup=${e => {\n        entry.newValue = typeof entry.json !== 'object' ? entry.value : entry.json;\n        entry.location.view?.dispatchEvent(\n          new CustomEvent('valChange', {\n            detail: entry\n          }))\n      }}\n      onkeydown=${e => setTimeout(() => {\n        e.target.style.height = 'auto';\n        e.target.style.height = e.target.scrollHeight + 'px';\n      }, 100)}>${JSON.stringify(entry.value, null, 2)}`\n  }\n\n  const node = mapp.utils.html.node`\n    <div\n      class=\"val\"\n      style=\"${`${entry.css_val || ''}`}\">${val}`\n\n  return node\n}", "export default entry => {\n\n  // Assign mapview to entry to provide shortened lookup.\n  entry.mapview = entry.location.layer.mapview\n\n  // Assign the mvt layer to be cloned from mapview layers.\n  entry.Layer = entry.mapview.layers[entry.layer]\n\n  // The entry must have a style object.\n  entry.style = entry.style || {}\n\n  // The entry style must have a default style.\n  // The entry default style will be assigned to the mvt layer default style.\n  entry.style.default = Object.assign(entry.Layer.style.default, entry.style.default || {})\n\n  if (entry.style.themes) {\n\n    // Assign the first theme in themes object as theme.\n    entry.style.theme = entry.style.themes[Object.keys(entry.style.themes)[0]]\n  }\n\n  // Assign method to show the clone layer.\n  entry.show = async () => {\n\n    entry.display = true;\n\n    // The OL clone layer already exists.\n    if (entry.L) {\n\n      if (entry.view) entry.view.style.display = 'block'\n\n      // Add clone layer to mapview Map.\n      entry.mapview.Map.addLayer(entry.L)\n\n      // Add clone layer to mvt layer clones.\n      entry.Layer.clones.add(entry.L)\n      return;\n    }\n\n    // Create clone VectorTile layer.\n    entry.L = new ol.layer.VectorTile({\n      source: entry.Layer.L.getSource(),\n      renderBuffer: 200,\n      zIndex: entry.zIndex,\n\n      // Assign style from entry.style\n      style: mapp.layer.Style(entry)\n    });\n\n    // Create the style panel.\n    entry.view = mapp.ui.layers.panels.style(entry)\n    entry.node.append(entry.view)\n\n    // Create query paramString from the entry object.\n    const paramString = mapp.utils.paramString(mapp.utils.queryParams(entry))\n\n    // Query the featureLookup.\n    entry.featureLookup = await mapp.utils.xhr(`${entry.host || entry.mapview.host}/api/query?${paramString}`)\n\n    // Add the clone layer to the mvt layer clones.\n    entry.Layer.clones.add(entry.L)\n\n    // Add the clone layer to the mapview.Map.\n    entry.mapview.Map.addLayer(entry.L)\n\n    // Add a location.removeCallback to remove the clone from mapview.Map as well as the mvt layer clones.\n    entry.location.removeCallbacks.push(() => {\n      entry.mapview.Map.removeLayer(entry.L)\n      entry.Layer.clones.delete(entry.L)\n    })\n  }\n\n  // Assign method to hide the clone layer.\n  entry.hide = async () => {\n\n    entry.display = false\n\n    // Hide the style drawer.\n    if (entry.view) entry.view.style.display = 'none'\n\n    // Remove the geometry layer from map.\n    entry.mapview.Map.removeLayer(entry.L)\n\n    // Remove the clone from the mvt layer clones.\n    entry.Layer.clones.delete(entry.L)\n  }\n\n  entry.reload = () => entry.L?.changed()\n\n  // Create checkbox to control geometry display.\n  const chkbox = mapp.ui.elements.chkbox({\n    label: entry.label || 'MVT Clone',\n    data_id: `${entry.field}-chkbox`,\n    checked: !!entry.display,\n    onchange: (checked) => checked ? entry.show() : entry.hide()\n  })\n\n  // Show geometry if entry is set to display.\n  entry.display && entry.show()\n\n  // Create a node consistent of the chkbox and the style drawer.\n  const node = mapp.utils.html.node`<div>${chkbox}`\n\n  // Disable chkbox if layer is out of zoom range\n  function chkZoom() {\n\n    // The mvt layer can be displayed at all zoom levels.\n    if (!entry.Layer.tables) return;\n\n    // Create a set of the layers assigned to the mapview.Map.\n    let mapLayers = new Set(entry.mapview.Map.getAllLayers())\n\n    // The clone layer cannot be displayed.\n    if (entry.Layer.tableCurrent() === null) {\n\n      // Disable checkbox.\n      node.querySelector('input').disabled = true\n\n      // Hide style drawer if present.\n      if (entry.view) entry.view.style.display = 'none'\n\n      // Remove clone layer if present in set but should not be displayed.\n      !entry.display && mapLayers.has(entry.L) && entry.mapview.Map.removeLayer(entry.L)\n\n      return;\n    }\n\n    // Enable checkbox.\n    node.querySelector('input').disabled = false\n\n    // Display style drawer if present.\n    if (entry.view) entry.view.style.display = 'block'\n    \n    // Add clone layer to map if it should be displayed but not present in set.\n    entry.display && !mapLayers.has(entry.L) && entry.mapview.Map.addLayer(entry.L)\n  }\n  chkZoom()\n\n  // Add zoom level check to mapview changeEnd event.\n  entry.mapview.Map.getTargetElement().addEventListener('changeEnd', chkZoom)\n\n  // Remove zoom level check from mapview changeEnd event.\n  entry.location.removeCallbacks.push(()=>{\n\n    let mapLayers = new Set(entry.mapview.Map.getAllLayers())\n\n    // Remove layer from map when location is removed.\n    entry.L && !mapLayers.has(entry.L) && entry.mapview.Map.removeLayer(entry.L)\n\n    entry.mapview.Map.getTargetElement().removeEventListener('changeEnd', chkZoom)\n  })\n\n  // Return the node to the location view.\n  return node\n}", "export default entry => {\n\n  let val = !isNaN(entry.value) && entry.type === 'integer' ?\n    parseInt(entry.value).toLocaleString('en-GB', { maximumFractionDigits: 0 }) :\n    parseFloat(entry.value).toLocaleString('en-GB', { maximumFractionDigits: 2 })\n\n  if (entry.edit) {\n\n    if (entry.edit.range) {\n\n      val = mapp.ui.elements.slider({\n        min: entry.edit.range.min,\n        max: entry.edit.range.max,\n        val: entry.value,\n        callback: e => {\n          val.value = parseFloat(e.target.value)\n          entry.newValue = val.value\n          entry.location.view?.dispatchEvent(\n            new CustomEvent('valChange', {\n              detail: entry\n            })\n          )\n        }\n      })\n\n    } else {\n\n      val = mapp.utils.html.node`\n      <input\n        type=\"number\"\n        value=\"${entry.value || ''}\"\n        onkeyup=${e => {\n\n          // Prevent a float value being sent to an integer field.\n          if (entry.type === 'integer') {\n            e.target.value = parseInt(e.target.value)\n          }\n\n          entry.newValue = e.target.value\n          entry.location.view?.dispatchEvent(\n            new CustomEvent('valChange', {\n              detail: entry\n            })\n          )\n        }}>`\n    }\n  }\n\n  const node = mapp.utils.html.node`\n    <div\n      class=\"val\"\n      style=\"${`${entry.css_val || ''}`}\">\n      ${entry.prefix}${val}${entry.suffix}`\n\n  return node\n}", "export default entry => {\n\n  entry.srid = entry.srid || entry.location.layer.srid\n\n  // Remove existing pin layer\n  entry.location.layer.mapview.Map.removeLayer(entry.L)\n\n  entry.L = entry.location.layer.mapview.geoJSON({\n    zIndex: Infinity,\n    geometry: {\n      type: 'Point',\n      coordinates: entry.value,\n    },\n    dataProjection: entry.srid,\n    Style: entry.style && mapp.utils.style(entry.style) || entry.Style || entry.location.pinStyle\n  })\n\n  // entry.location.removeCallbacks?.push(function(){\n  //   entry.location.layer.mapview.Map.removeLayer(entry.L)\n  // })\n\n  entry.location.Layers.push(entry.L)\n\n  const chkbox = mapp.ui.elements.chkbox({\n    label: entry.label || 'Pin',\n    checked: true,//!!entry.display,\n    onchange: (checked) => {\n      entry.display = checked\n      checked ?\n        entry.location.layer.mapview.Map.addLayer(entry.L) :\n        entry.location.layer.mapview.Map.removeLayer(entry.L);\n    }\n  })\n\n  const node = mapp.utils.html.node`${chkbox}`\n\n  return node\n}", "export default entry => {\n\n  if (!entry.report.template) return\n\n  const href = `${entry.location.layer.mapview.host}/view/`+\n  `${entry.report.template}?${mapp.utils.paramString(Object.assign({\n      id: entry.location.id,\n      layer: entry.location.layer.key,\n      locale: entry.location.layer.mapview.locale.key\n    }, entry.params || {}))}`\n\n  const node = mapp.utils.html.node`\n    <div class=\"link-with-img\">\n      <div\n        class=\"mask-icon wysiwyg\">\n      </div>\t\n      <a\n        target=\"_blank\"\n        href=${href}>${entry.report.label || 'Report'}`\n\n  return node\n}", "export default entry => {\n\n  const pin = entry.location.infoj.find(entry => entry.type === 'pin')\n\n  if (!pin || !pin.value) return;\n\n  const lnglat = ol.proj.toLonLat(\n    pin.value,\n    `EPSG:${pin.srid || entry.location.layer.mapview.srid}`,\n    'EPSG:4326')\n\n  const node = mapp.utils.html.node`\n    <a\n      target=\"_blank\"\n      href=${`https://www.google.com/maps?cbll=${lnglat[1]},${lnglat[0]}&layer=c`}>`\n\n  mapp.utils.xhr(`${entry.location.layer.mapview.host}/api/proxy?url=${encodeURIComponent(\n    `https://maps.googleapis.com/maps/api/streetview/metadata` +\n    `?location=${lnglat[1]},${lnglat[0]}`+\n    `&source=outdoor&{GOOGLE}`)}`)\n    .then(response => {\n\n      if (response.status !== 'OK') return;\n\n      const src = `${entry.location.layer.mapview.host}/api/proxy?url=${encodeURIComponent(\n        `https://maps.googleapis.com/maps/api/streetview` +\n        `?location=${lnglat[1]},${lnglat[0]}`+\n        `&source=outdoor&size=300x230&{GOOGLE}`)}`\n\n      node.append(mapp.utils.html.node`<img src=${src}>`)\n\n    })\n\n  return node\n}", "export default entry => {\n\n  const tabview = document.querySelector(`[data-id=${entry.target}]`)\n\n  // Assign border style based on the location view record (from list)\n  entry.tab_style = `border-bottom: 3px solid ${entry.location.style.strokeColor}`\n\n  // Create tabview after dataview creation is complete.\n  tabview.dispatchEvent(new CustomEvent('addTab', {\n    detail: entry\n  }))\n\n  // Show the tab if display is true.\n  entry.display && entry.show()\n\n  const chkbox = mapp.ui.elements.chkbox({\n    label: entry.label,\n    checked: !!entry.display,\n    onchange: (checked) => {\n\n      entry.display = checked\n\n      // Show or remove tab according to the checked/display value.\n      entry.display ?\n        entry.show() :\n        entry.remove()\n  \n    }\n  })\n  \n  return mapp.utils.html.node`${chkbox}`\n}", "export default entry => {\n\n  let node, val = entry.value;\n\n  if (entry.query) {\n\n    const params = mapp.utils.queryParams(entry)\n\n    const paramString = mapp.utils.paramString(params)\n\n    mapp.utils\n      .xhr(`${entry.host || entry.location.layer.mapview.host}/api/query?${paramString}`)\n      .then(response => {\n        node.innerHTML = Object.values(response)[0]\n      })\n\n  }\n\n  if (entry.edit) {\n\n    if (entry.edit.options) {\n\n      val = options(entry)\n    } else {\n\n      val = mapp.utils.html`\n      <input\n        type=\"text\"\n        value=\"${entry.value || ''}\"\n        onkeyup=${e => {\n          entry.newValue = e.target.value\n          entry.location.view?.dispatchEvent(\n            new CustomEvent('valChange', {\n              detail: entry\n            })\n          )\n        }}>`\n    }\n  }\n\n  node = mapp.utils.html.node`\n    <div\n      class=\"val\"\n      style=\"${`${entry.css_val || ''}`}\">\n      ${entry.prefix}${val}${entry.suffix}`\n\n  return node\n}\n\nfunction options(entry){\n\n  const chk = entry.edit.options.find(\n    option => typeof option === 'object' && Object.values(option)[0] === entry.value || option === entry.value\n  ) || entry.value\n\n  entry.value = chk \n    && typeof chk === 'object' \n    && Object.keys(chk)[0] || chk || entry.value || ' ';\n\n  const entries = entry.edit.options.map(option => ({\n    title: typeof option === 'string' && option || Object.keys(option)[0],\n    option: typeof option === 'string' && option || Object.values(option)[0]\n  }))\n\n  const dropdown = mapp.ui.elements.dropdown({\n    span: entry.value,\n    entries: entries,\n    callback: (e, _entry) => {\n      entry.newValue = _entry.option\n      entry.location.view?.dispatchEvent(\n        new CustomEvent('valChange', {\n          detail: entry,\n        })\n      );\n    },\n  });\n\n  return dropdown\n}", "export default entry => {\n\n  if (entry.query) {\n\n    mapp.utils.xhr(`${entry.location.layer.mapview.host}/api/query/${entry.query}`)\n      .then(response => {\n        entry.node.querySelector('.val').innerHTML = response[entry.params.field]\n      })\n\n  }\n\n  let val = entry.type !== 'html' ? entry.value : ''\n\n  if (entry.edit) {\n\n    val = mapp.utils.html`\n    <textarea\n      style=\"auto; min-height: 50px;\"\n      onfocus=${e => {\n        e.target.style.height = e.target.scrollHeight + 'px';\n      }}\n      onfocusout=${e => {\n        e.target.style.height = 'auto';\n      }}\n      onkeyup=${e => {\n        entry.newValue = e.target.value\n        entry.location.view?.dispatchEvent(\n          new CustomEvent('valChange', {\n            detail: entry\n          }))\n      }}\n      onkeydown=${e => setTimeout(() => {\n        e.target.style.height = 'auto';\n        e.target.style.height = e.target.scrollHeight + 'px';\n      }, 100)}>\n      ${entry.value || ''}`\n  }\n\n  const node = mapp.utils.html.node`\n  <div\n    class=\"val\"\n    style=\"${`${entry.css_val || ''}`}\">${val}`\n\n  if (!entry.edit && entry.type === 'html') {\n    node.innerHTML = entry.value || ''\n  }\n\n  return node\n}", "export default entry => {\n\n  let val\n\n  let stringVal = entry.value && entry.value.toString().replace('.',':')\n\n  stringVal = stringVal && stringVal.length < 3 && `${stringVal}:00` || stringVal\n\n  if (entry.edit) {\n\n    val = mapp.utils.html.node`\n      <input\n        type=\"time\"\n        value=${stringVal}\n        onchange=${e => {\n\n          entry.newValue = parseFloat(e.target.value.replace(':','.'))\n\n          entry.location.view?.dispatchEvent(\n            new CustomEvent('valChange', {\n              detail: entry\n            })\n          )\n\n        }}>`;\n        \n  } else {\n\n    val = stringVal\n  }\n\n  const node = mapp.utils.html.node`\n    <div\n      class=\"val\"\n      style=\"${`${entry.css_val || ''}`}\">\n      ${val}`\n\n  return node\n}", "import boolean from './boolean.mjs'\n\nimport dataview from './dataview.mjs'\n\nimport date from './date.mjs'\n\nimport defaults from './defaults.mjs'\n\nimport documents from './documents.mjs'\n\nimport geometry from './geometry.mjs'\n\nimport images from './images.mjs'\n\nimport isoline from './isoline.mjs'\n\nimport json from './json.mjs'\n\nimport mvt_clone from './mvt_clone.mjs'\n\nimport numeric from './numeric.mjs'\n\nimport pin from './pin.mjs'\n\nimport report from './report.mjs'\n\nimport streetview from './streetview.mjs'\n\nimport tab from './tab.mjs'\n\nimport text from './text.mjs'\n\nimport textarea from './textarea.mjs'\n\nimport time from './time.mjs'\n\nexport default {\n  key,\n  boolean,\n  dataview,\n  date,\n  datetime: date,\n  defaults,\n  documents,\n  geometry,\n  html: textarea,\n  images,\n  integer: numeric,\n  isoline_here: isoline,\n  isoline_mapbox: isoline,\n  json,\n  mvt_clone,\n  numeric,\n  pin,\n  report,\n  streetview,\n  tab,\n  text,\n  textarea,\n  time,\n}\n\nfunction key(entry) {\n\n  const node = mapp.utils.html.node`\n  <div class=\"layer-key\">\n    <span>\n      ${entry.location.layer.name}`\n\n  return node\n}", "import view from './view.mjs'\n\nimport listview from './listview.mjs'\n\nimport infoj from './infoj.mjs'\n\nimport entries from './entries/_entries.mjs'\n\nexport default {\n  view,\n  listview,\n  infoj,\n  entries\n}", "export default async (_this) => {\n\n  // The dataview target is defined as string.\n  if (typeof _this.target === 'string') {\n\n    // assign target element by ID.\n    _this.target = document.getElementById(_this.target)\n  }\n\n  // Dataviews must be rendered into a target element.\n  if (!_this.target) {\n\n    console.warn('Dataview creation requires a target key-value')\n    console.log(_this)\n    return;\n  }\n\n  // Update method for _this.\n  _this.update = async () => {\n\n    // Dataviews must not update without a query.\n    if (!_this.query) return;\n\n    // Compile params object from dataview entry.\n    const params = mapp.utils.queryParams(_this)\n\n    // Stringify paramString from object.\n    const paramString = mapp.utils.paramString(params)\n\n    // Query data as response from query.\n    const response = await mapp.utils\n      .xhr(`${_this.host || _this.location.layer.mapview.host}/api/query?${paramString}`)\n\n    if (response instanceof Error) return;\n\n    // The responseFunction must set the data to the dataview object.\n    if (typeof _this.responseFunction === 'function') {\n      _this.responseFunction(response);\n      return;\n    }\n   \n    typeof _this.setData === 'function' && _this.setData(response)\n  };\n\n  // Create a container to accomodate for a toolbar and dataview container.\n  // Target must already be HTMLElement\n  if (_this.toolbar && _this.target instanceof HTMLElement) {\n\n    // Target for the dataview\n    let target = mapp.utils.html.node`<div class=\"dataview-target\">`\n\n    let toolbar = typeof _this.toolbar === 'function'\n      && _this.toolbar()\n      || Object.keys(_this.toolbar).map(key => mapp.ui.elements.toolbar_el[key](_this))\n\n    // Append flex container target element and assign as panel to dataview entry.\n    // The panel will be assigned in a tabview.\n    _this.panel = _this.target.appendChild(mapp.utils.html.node`\n        <div class=\"flex-col\">\n          <div class=\"btn-row\">${toolbar}</div>\n          ${target}`)\n\n    // Assign dataview target as target.\n    _this.target = target\n  }\n\n  // Create a ChartJS dataview is chart is defined.\n  if (_this.chart) await Chart(_this);\n\n  // Columns in entry indicate missing table config.\n  if (typeof _this.columns !== 'undefined') {\n    console.warn('Table dataviews should be configured inside a tables object')\n\n    // Assign columns to table config.\n    _this.table = { columns: _this.columns }\n  }\n\n  // Create a Tabulator dataview if columns are defined.\n  if (_this.table) await Table(_this);\n\n  // Update the dataview on mapChange if set.\n  _this.mapChange && _this.layer && _this.layer.mapview.Map.getTargetElement()\n    .addEventListener('changeEnd', () => {\n\n      // Only update dataview if corresponding layer is visible.\n      if (_this.layer && !_this.layer.display) return;\n\n      // Only update dataview if _this.tab is active.\n      if (_this.tab && !_this.tab.classList.contains(\"active\")) return;\n\n      // Execute mapChange if defined as function or dataview update method.\n      typeof _this.mapChange === 'function'\n        && _this.mapChange()\n        || _this.update();\n    });\n\n  return _this;\n};\n\nasync function Chart(_this) {\n \n  // Charts most be rendered into a canvas type element.\n  const canvas = _this.target.appendChild(mapp.utils.html.node`<canvas>`);\n\n  // Await initialisation of ChartJS object.\n  _this.ChartJS = await mapp.ui.utils.Chart(canvas, mapp.utils.merge({\n    type: \"bar\",\n    options: {\n      plugins: {\n        legend: {\n          display: false\n        },\n        datalabels: {\n          display: false\n        }\n      }\n    }\n  }, _this.chart));\n\n  // Set chart data\n  _this.setData = (data) => {\n\n    if (_this.noDataMask && !data) {\n\n      // Remove display from target\n      _this.target.style.display = 'none'\n\n      // Set no data mask on dataview target\n      _this.mask = !_this.mask && _this.target.parentElement?.appendChild(mapp.utils.html.node`\n        <div class=\"dataview-mask\">No Data`)\n\n    } else {\n\n      // Remove existing dataview mask.\n      _this.mask && _this.mask.remove()\n      delete _this.mask\n\n      // Set dataview target to display as block.\n      _this.target.style.display = 'block'\n    }\n\n    // Create a dataset with empty data array if data is falsy.\n    if (!data) {\n      data = {\n        datasets: [\n          {\n            data: []\n          }\n        ]\n      }\n    }\n\n    // Set data in datasets array if no datasets are defined in data.\n    if (!data.datasets) {\n      data = {\n        datasets: [\n          {\n            data: data\n          }\n        ]\n      }\n    }\n\n    _this.data = data;\n\n    // Assign datasets from chart object to data.datasets.\n    _this.chart.datasets?.length &&\n      data.datasets.forEach((dataset, i) =>\n        Object.assign(dataset, _this.chart.datasets[i]));\n\n    // Get labels from chart if not defined in data.\n    data.labels = data.labels || _this.chart.labels\n\n    // Set data to chartjs object.\n    _this.ChartJS.data = data\n\n    // Update the chartjs object.\n    _this.ChartJS.update();\n  };\n\n}\n\nasync function Table(_this) {\n\n  // Check for custom column methods.\n  _this.table.columns.forEach(col => {\n\n    // Check for custom headerFilter matched in the ui utils.\n    if (typeof col.headerFilter === 'string' && mapp.ui.utils.tabulator.headerFilter[col.headerFilter]) {\n\n      // Assign custom headerFilter from ui utils.\n      col.headerFilter = mapp.ui.utils.tabulator.headerFilter[col.headerFilter](_this)\n    }\n  })\n\n  // Await initialisation of Tabulator object.\n  _this.Tabulator = await mapp.ui.utils\n    .Tabulator(_this.target, Object.assign({\n      //renderVertical: 'basic',\n      renderHorizontal: 'virtual',\n      selectable: false\n    }, _this.table));\n\n  // Table will not automatically redraw on resize.\n  if (_this.table.autoResize === false) {\n\n    let debounce = 0\n\n    // debounce resizeOberserver by 800.\n    _this.resizeObserver = new ResizeObserver(() => {\n\n      clearTimeout(debounce);\n      debounce = setTimeout(() => {\n        _this.target.offsetHeight > 9 && _this.Tabulator.redraw()\n      }, 800);\n    })\n  \n    _this.resizeObserver.observe(_this.target)\n  }\n\n  // Assign rowClick event on selectable table dataview.\n  _this.table.selectable && _this.Tabulator.on('rowClick', (e, row) => {\n\n    // The dataview rowSelect method may be used as callback to alter the seletable rowClick behaviour.\n    if (typeof _this.rowSelect === 'function') {\n      _this.rowSelect(e, row)\n      return;\n    }\n\n    const rowData = row.getData();\n\n    if (!_this.layer || !rowData[_this.layer.qID]) return;\n\n    mapp.location.get({\n      layer: _this.layer,\n      id: rowData[_this.layer.qID],\n    });\n\n    // Remove selection colour on row element.\n    row.deselect();\n  });\n\n  // Assign tabulator events from object.\n  typeof _this.events === 'object' && Object.entries(_this.events).forEach(event => {\n    \n    // Shortcircuit if events object value is not a function.\n    if (typeof event[1] !== 'function') return;\n\n    // Key is event name. Value is the event function.\n    _this.Tabulator.on(event[0], event[1])\n  })\n\n  // Set Tabulator data.\n  _this.setData = (data) => {\n\n    if (_this.noDataMask && !data) {\n\n      // Remove display from target\n      _this.target.style.display = 'none'\n\n      // Set no data mask on dataview target\n      _this.mask = !_this.mask && _this.target.parentElement?.appendChild(mapp.utils.html.node`\n        <div class=\"dataview-mask\">No Data`)\n\n    } else {\n\n      // Remove existing dataview mask.\n      _this.mask && _this.mask.remove()\n      delete _this.mask\n\n      // Set dataview target to display as block.\n      _this.target.style.display = 'block'\n    }\n\n    // Tabulator data must be an array.\n    data = (!data && []) || (data.length && data) || [data];\n\n    // Set data to the tabulator object\n    _this.Tabulator.setData(data);\n\n    // Assign data to the dataview object\n    _this.data = data;\n\n    typeof _this.setDataCallback === 'function'\n      && _this.setDataCallback(_this)\n  }\n\n}", "export default tabview => {\n\n  if (!tabview.node) return;\n\n  tabview.tabs = tabview.node.appendChild(mapp.utils.html.node`<div class=\"tabs\">`)\n\n  tabview.panel = tabview.node.appendChild(mapp.utils.html.node`<div class=\"panel\">`)\n\n  // Set data attribute ID from element ID.\n  tabview.id && tabview.node.setAttribute('data-id', tabview.id);\n\n  tabview.addTab = addTab\n\n  tabview.node.addEventListener('addTab', e => tabview.addTab(e.detail))\n\n  return tabview;\n}\n\n// add entry as tab to this tabview.\nfunction addTab(entry) {\n\n  const tabview = this\n\n  if (entry.location) {\n \n    // The tabview should be removed if the location is removed.\n    entry.location.removeCallbacks.push(()=>entry.remove())\n\n  } else if (entry.layer) {\n\n    // Show tab when layer is displayed.\n    entry.layer.showCallbacks.push(()=>{\n\n      // Entry must have display flag.\n      entry.display && entry.show()\n    })\n  \n    // Hide tab when layer is hidden.\n    entry.layer.hideCallbacks.push(()=>{\n      entry.remove()\n    })\n  }\n\n  entry.tab = mapp.utils.html.node`\n    <div class=\"tab\">\n      <button\n        .disabled=${entry.disabled}\n        class=\"header\"\n        style=\"${entry.tab_style || ''}\"\n        onclick=${showTab}>\n          ${entry.label || entry.title || entry.key || 'Tab'}`\n\n  // Append the tab to the tabview tabs\n  entry.show && tabview.tabs.append(entry.tab)          \n      \n  entry.panel = entry.panel || entry.target || mapp.utils.html.node`\n    <div class=\"${`panel ${entry.class || ''}`}\">`\n\n  entry.panel.addEventListener('activate', ()=>{\n    entry.update && entry.update()\n  })\n\n  entry.show = showTab\n\n  entry.remove = removeTab\n\n  function showTab (){\n\n    // Render entry.panel into tabview.panel\n    mapp.utils.render(tabview.panel, entry.panel)\n\n    // Remove the active class from all tabs.\n    tabview.tabs.childNodes.forEach(tab => tab.classList.remove('active'))\n\n    // Add the tab element to tabs container if the tab element has no parent yet.\n    !entry.tab.parentElement && tabview.tabs.append(entry.tab)\n\n    // Make the tab active by assigning class.\n    entry.tab.classList.add('active')\n\n    // The activate event should be delayed with a timeout.\n    // This prevents each tab to activate when multiple tabs are added in quick succession.\n    tabview.timer && window.clearTimeout(tabview.timer)\n\n    tabview.timer = window.setTimeout(()=>{\n      if (entry.panel instanceof HTMLElement) {\n        entry.panel.dispatchEvent(new CustomEvent('activate'))\n        return\n      }\n      entry.target instanceof HTMLElement\n        && entry.target.dispatchEvent(new CustomEvent('activate'))\n    }, 500)\n\n    tabview.showTab && tabview.showTab(entry)\n  }\n\n  function removeTab () {\n\n    // A tab without parent element cannot be in the tab bar.\n    if (!entry.tab.parentElement) return\n\n    // Find a sibling of the entry.\n    const sibling = entry.tab.nextElementSibling || entry.tab.previousElementSibling\n\n    // Remove the tab element from tab bar.\n    entry.tab.remove()\n\n    // Activate the sibling.\n    if (sibling) return sibling.querySelector('.header').click()\n\n    tabview.removeLastTab && tabview.removeLastTab()\n  }\n}", "export default (params) => mapp.utils.html.node`\n  <div \n    data-id=${params.data_id || 'card'}\n    class=\"drawer\">\n    <div class=\"header bold\">\n      <span>${params.header}</span>\n      <button\n        data-id=close\n        class=\"mask-icon close\"\n        onclick=${e => {\n          e.target.closest(\".drawer\").remove()\n          params.close && params.close(e)\n        }}>\n    </div>\n    ${params.content}`;", "export default (params) => mapp.utils.html.node`\n  <label \n    data-id=${params.data_id || 'chkbox'}\n    class=\"checkbox\">\n    <input\n      type=\"checkbox\"\n      .disabled=${!!params.disabled}\n      .checked=${!!params.checked}\n      onchange=${e=>{\n        params.onchange && params.onchange(e.target.checked, params.val)\n      }}>\n    </input>\n    <div></div>\n    <span>${params.label}`", "export default {\n  modify,\n  draw\n}\n\nmapp.utils.merge(mapp.dictionaries, {\n  en: {\n    remove_last_vertex: \"Remove last vertex\",\n  },\n  de: {\n    remove_last_vertex: \"Remove last vertex\",\n  },\n  cn: {\n    remove_last_vertex: \"\u5220\u9664\u6700\u540E\u4E00\u4E2A\u9876\u70B9\",\n  },\n  pl: {\n    remove_last_vertex: \"Usu\u0144 ostatni wierzcho\u0142ek\",\n  },\n  ko: {\n    remove_last_vertex: \"\uB9C8\uC9C0\uB9C9 \uC815\uC810(\uAF2D\uC9C0\uC810) \uC81C\uAC70\",\n  },\n  fr: {\n    remove_last_vertex: \"Effacer le dernier point\",\n  },\n  ja: {\n    remove_last_vertex: \"\u6700\u5F8C\u306E\u30D0\u30FC\u30C6\u30C3\u30AF\u30B9\u3092\u524A\u9664\",\n  }\n})\n\nfunction modify(e) {\n\n  e && e.preventDefault()\n   \n  const menu = []\n  \n  // Show save option in contextmenu\n  menu.push(mapp.utils.html`\n    <li\n      onclick=${() => this.interaction.finish(this.interaction.getFeature())}>\n      ${mapp.dictionary.save}`)\n\n  // Add cancel option to contextmenu.\n  menu.push(mapp.utils.html`\n    <li\n      onclick=${()=>this.interaction.finish()}>\n      ${mapp.dictionary.cancel}`)\n\n  // Set context menu popup on last vertex.\n  this.popup({\n    coords: this.interaction.vertices[this.interaction.vertices.length-1],\n    content: mapp.utils.html.node`<ul>${menu}`,\n  })\n}\n\nfunction draw() {\n\n  if (this.interaction.vertices.length === 0) return;\n  \n  const menu = []\n  \n  menu.push(mapp.utils.html`\n  <li\n    onclick=${()=>this.interaction.finish(this.interaction.getFeature())}>\n      ${mapp.dictionary.save}`)\n\n  menu.push(mapp.utils.html`\n    <li\n      onclick=${()=>this.interaction.finish()}>\n      ${mapp.dictionary.cancel}`)\n\n  this.popup({\n    coords: this.interaction.vertices[this.interaction.vertices.length - 1],\n    content: mapp.utils.html.node`<ul>${menu}`,\n    autoPan: true\n  })\n}", "export default (params) => mapp.utils.html.node`\n  <div \n    data-id=${params.data_id || 'drawer'}\n    class=${`drawer expandable ${params.class || ''}`}>\n    <div\n      class=\"header\"\n      onclick=${(e) => {\n     \n        if (e.target.parentElement.classList.contains('empty')) return;\n      \n        // If expanded? Remove expanded from closest expandable and return.\n        if (e.target.parentElement.classList.contains('expanded')) {\n          return e.target.parentElement.classList.remove('expanded');\n        }\n      \n        // Accordion: Remove expanded from all siblings of closest expandable.\n        if (params.accordion) {\n          [...e.target.parentElement.parentElement.children].forEach(sibling => {\n            sibling.classList.remove('expanded');\n          });\n        }\n      \n        // Add expanded class to closest expandable.\n        e.target.parentElement.classList.add('expanded');\n      }}>\n      ${params.header}\n    </div>\n    ${params.content}`;", "export default {\n  point,\n  locator,\n  polygon,\n  circle,\n  line,\n  isoline_here,\n  isoline_mapbox,\n  rectangle\n}\n\nmapp.utils.merge(mapp.dictionaries, {\n  en: {\n    draw_point: \"Point\",\n    draw_position: \"Current Position\",\n    draw_polygon: \"Polygon\",\n    draw_rectangle: \"Rectangle\",\n    draw_circle: \"Circle\",\n    draw_line: \"Line\",\n    create: \"Create\"\n  },\n  de: {\n    draw_point: \"Punkt\",\n    draw_polygon: \"Polygon\",\n    draw_rectangle: \"Rechteck\",\n    draw_circle: \"Kreis\",\n    draw_line: \"Linie\",\n    create: \"Erstellen\"\n  },\n  cn: {\n    draw_point: \"\u70B9\",\n    draw_polygon: \"\u591A\u8FB9\u5F62\",\n    draw_rectangle: \"\u957F\u65B9\u5F62\",\n    draw_circle: \"\u5708\",\n    draw_line: \"\u7EBF\",\n  },\n  pl: {\n    draw_point: \"Punkt\",\n    draw_polygon: \"Poligon\",\n    draw_rectangle: \"Prostok\u0105t\",\n    draw_circle: \"Okrag\",\n    draw_line: \"Linia\",\n  },\n  ko: {\n    draw_point: \"\uC810\",\n    draw_polygon: \"\uB2E4\uAC01\uD615\",\n    draw_rectangle: \"\uC9C1\uC0AC\uAC01\uD615\",\n    draw_circle: \"\uC6D0\",\n    draw_line: \"\uC120\",\n  },\n  fr: {\n    draw_point: \"Point\",\n    draw_polygon: \"Polygone\",\n    draw_rectangle: \"Rectangle\",\n    draw_circle: \"Cercle\",\n    draw_line: \"Ligne\",\n  },\n  ja: {\n    draw_point: \"\u30DD\u30A4\u30F3\u30C8\",\n    draw_polygon: \"\u30DD\u30EA\u30B4\u30F3\",\n    draw_rectangle: \"\u9577\u65B9\u5F62\",\n    draw_circle: \"\u4E38\",\n    draw_line: \"\u7DDA\",\n  }\n})\n\nfunction point(_options, draw) {\n\n  const options = Object.assign({}, _options, {\n    type: 'Point',\n  })\n  \n  return mapp.utils.html.node`\n    <button\n      class=\"flat wide bold primary-colour\"\n      onclick=${e=>draw(e, options)}>\n      ${mapp.dictionary.draw_point}`\n}\n\nfunction locator(options) {\n  \n  return mapp.utils.html.node`\n    <button\n      class=\"flat wide bold primary-colour\"\n      onclick=${e=>{\n\n        mapp.utils.getCurrentPosition(async (pos) => {\n\n          const location = {\n            layer: options.layer,\n            new: true\n          }\n\n          const coords = ol.proj.transform(\n            [parseFloat(pos.coords.longitude), parseFloat(pos.coords.latitude)],\n            'EPSG:4326', `EPSG:${options.layer.srid}`)\n \n          location.id = await mapp.utils.xhr({\n            method: 'POST',\n            url: `${location.layer.mapview.host}/api/location/new?` +\n              mapp.utils.paramString({\n                locale: location.layer.mapview.locale.key,\n                layer: location.layer.key,\n                table: location.layer.tableCurrent()\n              }),\n            body: JSON.stringify({\n              [location.layer.geom]: {\n                type: 'Point',\n                coordinates: coords\n              }\n            })\n          })\n        \n          location.layer.reload()\n                                  \n          mapp.location.get(location)\n        })\n        \n        \n      }}>\n      ${mapp.dictionary.draw_position}`\n}\n\nfunction line(_options, draw) {\n\n  const options = Object.assign({}, _options, {\n    type: 'LineString',\n    snap: _options.edit.line.snap\n  })\n  \n  return mapp.utils.html.node`\n    <button\n      class=\"flat wide bold primary-colour\"\n      onclick=${e=>draw(e, options)}>\n      ${mapp.dictionary.draw_line}`\n}\n\nfunction polygon(_options, draw) {\n\n  const options = Object.assign({}, _options, {\n    type: 'Polygon',\n    snap: _options.edit.polygon.snap\n  })\n  \n  return mapp.utils.html.node`\n    <button\n      class=\"flat wide bold primary-colour\"\n      onclick=${e=>draw(e, options)}>\n      ${mapp.dictionary.draw_polygon}`\n}\n\nfunction circle(_options, draw) {\n  \n  _options.edit.circle = Object.assign({\n    units: 'meter',\n    radius: 100,\n    tooltip: {\n      metric: 'distance'\n    }\n  }, typeof _options.edit.circle === 'object' && _options.edit.circle || {})\n\n  // Methods to transform input radius.\n  const units = {\n    meter: v => v,\n    km: v => v * 1000,\n    miles: v => v * 1609.34,\n    meter2: v => Math.sqrt(v / Math.PI),\n    km2: v => Math.sqrt(v * 1000000 / Math.PI),\n  }\n\n  const unitsDropDown = mapp.utils.html.node`\n    <div style=\"display: grid; grid-template-columns: 100px 1fr; align-items: center;\">\n      <div style=\"grid-column: 1;\">Units</div>\n      <div style=\"grid-column: 2;\">\n        ${mapp.ui.elements.dropdown({\n          placeholder: _options.edit.circle.units,\n          entries: [\n            {\n              title: 'Meter',\n              option: 'meter',\n            },\n            {\n              title: 'KM',\n              option: 'km',\n            },\n            {\n              title: 'Miles',\n              option: 'miles',\n            },\n            {\n              title: 'Meter\u00B2',\n              option: 'meter2',\n            },\n            {\n              title: 'KM\u00B2',\n              option: 'km2',\n            },\n          ],\n          callback: (e, entry) => {\n            _options.edit.circle.units = entry.option;\n          }\n        })}`\n\n  const rangeSlider = mapp.ui.elements.slider({\n    label: 'Radius',\n    min: 1,\n    max: 1000,\n    val: _options.edit.circle.radius,\n    callback: e => {\n      _options.edit.circle.radius = parseInt(e.target.value)\n    }\n  })\n\n  const btn_centre = mapp.utils.html.node`\n    <button\n      class=\"raised wide bold primary-colour\"\n      onclick=${e => {\n        const options = Object.assign({}, _options, {\n          type: 'Point',\n          geometryFunction: (coordinates) => {\n      \n            const polygonCircular = new ol.geom.Polygon.circular(\n              ol.proj.toLonLat(coordinates),\n              units[_options.edit.circle.units](_options.edit.circle.radius),\n              64\n            );\n      \n            return polygonCircular.transform(\"EPSG:4326\", \"EPSG:3857\")\n          }\n        })\n\n        draw(e, options)\n      }}>Set Centre`\n\n  const btn_2p = mapp.utils.html.node`\n    <button\n      class=\"raised wide bold primary-colour\"\n      onclick=${e=>{\n        const options = Object.assign({}, _options, {\n          type: 'Circle',\n          geometryFunction: ol.interaction.Draw.createRegularPolygon(33),\n          tooltip: _options.edit.circle.tooltip\n        })\n\n        draw(e, options)\n      }}>Manual Circle`\n\n  const drawer = mapp.ui.elements.drawer({\n    header: mapp.utils.html`\n      <h3>Circle</h3>\n      <div class=\"mask-icon expander\"></div>`,\n    content: mapp.utils.html`<div class=\"panel flex-col\">\n      ${unitsDropDown}\n      ${rangeSlider}\n      ${btn_centre}\n      ${btn_2p}`\n  })\n\n  return drawer\n}\n\nfunction rectangle(_options, draw) {\n\n  const options = Object.assign({}, _options, {\n    type: 'Circle',\n    geometryFunction: ol.interaction.Draw.createBox(),\n    tooltip: _options.edit.rectangle.tooltip,\n  })\n  \n  return mapp.utils.html.node`\n    <button\n      class=\"flat wide bold primary-colour\"\n      onclick=${e=>draw(e, options)}>\n      ${mapp.dictionary.draw_rectangle}`\n}\n\nfunction isoline_here(_options, draw) {\n\n  const options = Object.assign({}, _options, {\n    type: 'Point',\n    geometryFunction: coordinates => mapp.utils.here.geometryFunction(coordinates, _options.layer, params),\n  })\n\n  if (typeof (options.edit.isoline_here) !== 'object') options.edit.isoline_here = {}\n\n  const defaults = {\n    'range[type]': 'time',\n    range: 10,\n    rangeMin: 5,\n    rangeMax: 60,\n    transportMode: 'car',\n    optimizeFor: 'balanced'\n  }\n\n  const params = Object.assign(options.edit.isoline_here, defaults)\n\n  const drawer = mapp.ui.elements.isoline_params_here(params)\n\n  drawer.append(mapp.utils.html.node`\n    <button\n      class=\"flat wide bold primary-colour\"\n      onclick=${e=>draw(e, options)}>\n      ${mapp.dictionary.create}`)\n\n  return drawer\n}\n\nfunction isoline_mapbox(_options, draw) {\n\n  const options = Object.assign({}, _options, {\n    type: 'Point',\n    geometryFunction: coordinates => mapp.utils.mapboxGeometryFunction(coordinates, _options.layer, params),\n  })\n\n  if (typeof (options.edit.isoline_mapbox) !== 'object') options.edit.isoline_mapbox = {}\n\n  const defaults = {\n    profile: 'driving',\n    minutes: 10,\n    minutesMin: 5,\n    minutesMax: 60\n  }\n\n  const params = Object.assign(options.edit.isoline_mapbox, defaults)\n\n  const drawer = mapp.ui.elements.isoline_params_mapbox(params)\n\n  drawer.append(mapp.utils.html.node`\n    <button\n      class=\"flat wide bold primary-colour\"\n      onclick=${e=>draw(e, options)}>\n      ${mapp.dictionary.create}`)\n\n  return drawer\n}", "export default (params) => mapp.utils.html`\n  <button \n    data-id=${params.data_id || 'dropdown'}\n    class=\"dropdown\">\n    <div class=\"head\"\n      onclick=${(e) => {\n\n        if (e.target.parentElement.classList.contains(\"active\")) {\n          e.target.parentElement.classList.remove(\"active\");\n          return;\n        }\n\n        document.querySelectorAll(\"button.dropdown\")\n          .forEach((el) => el.classList.remove(\"active\"));\n          \n        e.target.parentElement.classList.add(\"active\");\n\n      }}>\n      <span data-id=header-span>${params.span || params.placeholder || params.entries[0].title}</span>\n      <div class=\"icon\"></div>\n    </div>\n    <ul>${params.entries.map((entry) => mapp.utils.html.node`\n      <li onclick=${(e) => {\n\n        const btn = e.target.closest(\"button.dropdown\")\n        btn.classList.toggle(\"active\")   \n        btn.querySelector(\"[data-id=header-span]\").textContent = entry.title;\n\n        params.callback && params.callback(e, entry);\n      }}>${entry.title}`\n\n)}`;", "export default (params) => {\n\n  const selectedTitles = new Set()\n  const selectedOptions = new Set()\n\n  // Create array of li elements for dropdown.\n  const ul = params.entries.map((entry) => {\n    \n    // Create li element with click event.\n    const li = mapp.utils.html.node`<li onclick=${(e) => {\n\n      // Find the closest dropdown button.\n      const btn = e.target.closest(\"button.dropdown\")\n\n      // Will collapse the dropdown if current state is 'active'.\n      btn.classList.toggle('active')   \n\n      // Will show select background if add to classlist.\n      e.target.classList.toggle('selected')\n\n      // Add or remove title and option value from sets.\n      if (e.target.classList.contains('selected')) {\n        selectedTitles.add(entry.title)\n        selectedOptions.add(entry.option)\n      } else {\n        selectedTitles.delete(entry.title)\n        selectedOptions.delete(entry.option)\n      }\n           \n      // Set btn text to reflect selection or show placeholder.\n      btn.querySelector(\"[data-id=header-span]\")\n        .textContent = selectedTitles.size && Array.from(selectedTitles).join(', ')\n        || params.span || params.placeholder\n\n      // Execute callback method and pass array of current selection.\n      params.callback && params.callback(e, Array.from(selectedOptions));\n    }}>${entry.title}`\n\n    // The entry is already selected during creation of dropdown.\n    if (entry.selected) {\n      li.classList.add('selected')\n      selectedTitles.add(entry.title)\n      selectedOptions.add(entry.option)\n    }\n\n    return li})\n\n  return mapp.utils.html`\n    <button \n      data-id=${params.data_id || 'dropdown'}\n      class=\"dropdown\">\n      <div class=\"head\"\n        onclick=${(e) => {\n\n          // Collapse dropdown element and short circuit.\n          if (e.target.parentElement.classList.contains('active')) {\n            e.target.parentElement.classList.remove('active');\n            return;\n          }\n\n          // Collapse any expandxed dropdown elements in document.\n          document.querySelectorAll('button.dropdown')\n            .forEach((el) => el.classList.remove('active'));\n            \n          // Expand this dropdown element.\n          e.target.parentElement.classList.add('active');\n\n        }}>\n        <span data-id=header-span>${selectedTitles.size && Array.from(selectedTitles).join(', ')|| params.span || params.placeholder}</span>\n        <div class=\"icon\"></div>\n      </div>\n      <ul>${ul}`;\n}", "mapp.utils.merge(mapp.dictionaries, {\n  en: {\n    here_isoline: \"Travel Time\",\n    here_meta: \"Parameter for Travel Time catchments from HERE API\",\n    here_mode: \"Mode\",\n    here_mode_driving: \"Driving\",\n    here_mode_walking: \"Walking\",\n    here_range_minutes: \"Travel time in minutes\",\n    here_datetime_arrive: \"Arrive at\",\n    here_datetime_depart: \"Depart at\",\n    here_optimize_for: \"Optimize for\",\n    here_optimize_for_balanced: \"Balanced\",\n    here_optimize_for_quality: \"Quality\",\n    here_optimize_for_performance: \"Performance\",\n  },\n  de: {\n    here_isoline: \"Fahrzeit\",\n    here_meta: \"Parameter f\u00FCr Here API\",\n    here_mode: \"Modus\",\n    here_mode_driving: \"Kraftfahrzeug\",\n    here_mode_walking: \"zu Fu\u00DF\",\n    here_range_minutes: \"Fahrzeit in Minuten\",\n    here_datetime_arrive: \"Ankunft\",\n    here_datetime_depart: \"Abfahrt\",\n    here_optimize_for: \"Optimisierung\",\n    here_optimize_for_balanced: \"Ausgeglichen\",\n    here_optimize_for_quality: \"Qualit\u00E4t\",\n    here_optimize_for_performance: \"Leistung\",\n  },\n  cn: {\n    here_mode_driving: \"\u673A\u52A8\u8F66\u884C\",\n    here_mode_walking: \"\u6B65\u884C\",\n    here_range_minutes: \"\u4EE5\u5206\u949F\u8BA1\u4EA4\u901A\u65F6\u95F4 \",\n  },\n  pl: {\n    here_mode: \"\u015Arodek transportu\",\n    here_mode_driving: \"samochodem\",\n    here_mode_walking: \"piechot\u0105\",\n    here_range_minutes: \"Czas podr\u00F3\u017Cy w minutach\",\n    here_datetime_arrive: \"Rozpocznij\",\n    here_datetime_depart: \"Osi\u0105gnij cel\",\n    here_optimize_for: \"Optymalizacja\",\n    here_optimize_for_balanced: \"zr\u00F3wnowa\u017Cona\",\n    here_optimize_for_quality: \"jako\u015B\u0107\",\n    here_optimize_for_performance: \"wydajno\u015B\u0107\",\n  },\n  ko: {\n    here_mode_driving: \"\uC6B4\uC804\",\n    here_mode_walking: \"\uB3C4\uBCF4\",\n    here_range_minutes: \"\uC5EC\uD589\uC2DC\uAC04(\uBD84) \",\n  },\n  fr: {\n    here_mode: \"Type de transport\",\n    here_mode_driving: \"en voiture\",\n    here_mode_walking: \"\u00E0 pied\",\n    here_range_minutes: \"Temps du trajet en minutes\",\n    here_datetime_depart: \"Partir \u00E0\",\n    here_datetime_arrive: \"Arriver \u00E0\",\n    here_optimize_for: \"Optimiser\",\n    here_optimize_for_balanced: \"l'\u00E9quilibre\",\n    here_optimize_for_quality: \"la qualit\u00E9\",\n    here_optimize_for_performance: \"les performances\",\n  },\n  ja: {\n    here_mode_driving: \"\u30C9\u30E9\u30A4\u30D3\u30F3\u30B0\",\n    here_mode_walking: \"\u30A6\u30A9\u30FC\u30AD\u30F3\u30B0\",\n    here_range_minutes: \"\u79FB\u52D5\u6642\u9593 (\u5206) \",\n  }\n})\n\nexport default (params) => {\n  \n  const modeDropDown = mapp.utils.html.node`\n    <div style=\"display: grid; grid-template-columns: 100px 1fr; align-items: center;\">\n      <div style=\"grid-column: 1;\">${mapp.dictionary.here_mode}</div>\n      <div style=\"grid-column: 2;\">\n        ${mapp.ui.elements.dropdown({\n          entries: [\n            {\n              title: [mapp.dictionary.here_mode_driving],\n              option: \"car\",\n            },\n            {\n              title: [mapp.dictionary.here_mode_walking],\n              option: \"pedestrian\",\n            },\n          ],\n          callback: (e, entry) => {\n            params.transportMode = entry.option;\n          }\n        })}`\n\n  const optimisedForDropDown = mapp.utils.html.node`\n    <div style=\"display: grid; grid-template-columns: 100px 1fr; align-items: center;\">\n      <div style=\"grid-column: 1;\">${mapp.dictionary.here_optimize_for}</div>\n      <div style=\"grid-column: 2;\">\n        ${mapp.ui.elements.dropdown({\n          entries: [\n            {\n              title: [mapp.dictionary.here_optimize_for_balanced],\n              option: \"balanced\",\n            },\n            {\n              title: [mapp.dictionary.here_optimize_for_quality],\n              option: \"quality\",\n            },\n            {\n              title: [mapp.dictionary.here_optimize_for_performance],\n              option: \"performance\",\n            },\n          ],\n          callback: (e, entry) => {\n            params.optimizeFor = entry.option;\n          },\n        })}`       \n    \n  let date_picker_label = mapp.utils.html.node`\n    <span>${mapp.dictionary.here_datetime_depart}`\n\n  let dateSelect = mapp.utils.html.node`\n    <input\n      type=\"datetime-local\"\n      onchange=${e => {\n        const reverseDirectionChk = paramsDrawer.querySelector('[data-id=reverse_direction] > input')\n\n        if (e.target.value) {\n          \n          params.dateISO = new Date(e.target.value).toISOString()\n\n          // reverse direction not valid in combination with a dateISO param.\n          if (reverseDirectionChk) {\n            params.reverseDirection = false\n            reverseDirectionChk.checked = false\n            reverseDirectionChk.disabled = true\n          }\n\n        } else {\n\n          params.dateISO = undefined\n          if (reverseDirectionChk) reverseDirectionChk.disabled = false\n        }\n      }}>`;\n\n  const datePicker = mapp.utils.html.node`\n    <div>\n      ${date_picker_label}\n      ${dateSelect}`\n\n        \n  const rangeSlider = mapp.ui.elements.slider({\n    label: mapp.dictionary.here_range_minutes,\n    min: params.rangeMin,\n    max: params.rangeMax,\n    val: 10,\n    callback: e => {\n      params.range = parseInt(e.target.value)\n    }\n  })\n\n  const reverseDirectionChk = typeof params.reverseDirection !== 'undefined' && mapp.ui.elements.chkbox({\n    label: 'Reverse Direction Isoline',\n    data_id: 'reverse_direction',\n    checked: !!params.reverseDirection,\n    onchange: (checked) => {\n      date_picker_label.textContent = checked && mapp.dictionary.here_datetime_arrive || mapp.dictionary.here_datetime_depart\n      params.reverseDirection = checked      \n    }})\n\n  const paramsDrawer = mapp.ui.elements.drawer({\n    header: mapp.utils.html`\n      <h3>${mapp.dictionary.here_isoline}</h3>\n      <div class=\"mask-icon expander\"></div>`,\n    content: mapp.utils.html`<div class=\"panel\">\n      <p>${mapp.dictionary.here_meta}</p>\n      <div style=\"display: grid; grid-row-gap: 5px;\">\n        ${modeDropDown}\n        ${optimisedForDropDown}\n        ${datePicker}\n        ${reverseDirectionChk || ''}\n        ${rangeSlider}`\n  })\n\n  return paramsDrawer\n\n}", "mapp.utils.merge(mapp.dictionaries, {\n  en: {\n    mapbox_isoline: \"Travel Time\",\n    mapbox_meta: \"Parameter for Travel Time catchments from Mapbox API\",\n    mapbox_mode: \"Mode\",\n    mapbox_driving: \"Driving\",\n    mapbox_walking: \"Walking\",\n    mapbox_cycling: \"Cycling\",\n    mapbox_travel_time: \"Travel time in minutes\",\n  },\n  de: {\n    mapbox_isoline: \"Fahrzeit\",\n    mapbox_meta: \"Parameter f\u00FCr Mapbox API\",\n    mapbox_mode: \"Mode\",\n    mapbox_driving: \"Kraftfahrzeug\",\n    mapbox_walking: \"zu Fu\u00DF\",\n    mapbox_cycling: \"Fahrrad\",\n    mapbox_travel_time: \"Fahrzeit in Minuten\",\n  },\n  cn: {\n    mapbox_mode: \"\u6A21\u5F0F\",\n    mapbox_driving: \"\u673A\u52A8\u8F66\u884C\",\n    mapbox_walking: \"\u6B65\u884C\",\n    mapbox_cycling: \"\u9A91\u884C\",\n    mapbox_travel_time: \"\u4EE5\u5206\u949F\u8BA1\u4EA4\u901A\u65F6\u95F4\",\n  },\n  pl: {\n    mapbox_mode: \"Typ\",\n    mapbox_driving: \"Samochodem\",\n    mapbox_walking: \"Piechot\u0105\",\n    mapbox_cycling: \"Rowerem\",\n    mapbox_travel_time: \"Czas podr\u00F3\u017Cy w minutach\",\n  },\n  ko: {\n    mapbox_mode: \"\uBAA8\uB4DC\",\n    mapbox_driving: \"\uC6B4\uC804\",\n    mapbox_walking: \"\uB3C4\uBCF4\",\n    mapbox_cycling: \"\uC0AC\uC774\uD074\",\n    mapbox_travel_time: \"\uC5EC\uD589\uC2DC\uAC04(\uBD84)\",\n  },\n  fr: {\n    mapbox_mode: \"Mode\",\n    mapbox_driving: \"En voiture\",\n    mapbox_walking: \"\u00C0 pied\",\n    mapbox_cycling: \"\u00C0 velo\",\n    mapbox_travel_time: \"Temps du trajet en minutes \",\n  },\n  ja: {\n    mapbox_mode: \"\u30E2\u30FC\u30C9\",\n    mapbox_driving: \"\u30C9\u30E9\u30A4\u30D3\u30F3\u30B0\",\n    mapbox_walking: \"\u30A6\u30A9\u30FC\u30AD\u30F3\u30B0\",\n    mapbox_cycling: \"\u30B5\u30A4\u30AF\u30EA\u30F3\u30B0\",\n    mapbox_travel_time: \"\u79FB\u52D5\u6642\u9593 (\u5206)\",\n  }\n})\n\nexport default (params) => {\n  const modeDropDown = mapp.utils.html.node`\n    <div \n      style=\"display: grid; grid-template-columns: 100px 1fr; align-items: center;\">\n      <div style=\"grid-column: 1;\">${mapp.dictionary.mapbox_mode}</div>\n      <div style=\"grid-column: 2;\">\n        ${mapp.ui.elements.dropdown({\n          entries: [\n            {\n              title: [mapp.dictionary.mapbox_driving],\n              option: \"driving\",\n            },\n            {\n              title: [mapp.dictionary.mapbox_walking],\n              option: \"walking\",\n            },\n            {\n              title: [mapp.dictionary.mapbox_cycling],\n              option: \"cycling\",\n            },\n          ],\n          callback: (e, entry) => {\n            params.profile = entry.option;\n          },\n        })}`;\n\n  const minuteSlider = mapp.ui.elements.slider({\n    label: mapp.dictionary.mapbox_travel_time,\n    min: params.minutesMin,\n    max: params.minutesMax,\n    val: params.minutes,\n    callback: (e) => {\n      params.minutes = parseInt(e.target.value);\n    },\n  });\n\n  const paramsDrawer = mapp.ui.elements.drawer({\n    header: mapp.utils.html`\n      <h3>${mapp.dictionary.mapbox_isoline}</h3>\n      <div class=\"mask-icon expander\"></div>`,\n    content: mapp.utils.html`<div class=\"panel\">\n      <p>${mapp.dictionary.mapbox_meta}</p>\n      <div style=\"display: grid; grid-row-gap: 5px;\">\n        ${modeDropDown}\n        ${minuteSlider}`\n  });\n\n  return paramsDrawer;\n};", "const xmlSerializer = new XMLSerializer()\n\nexport default (params) => {\n\n  if (params.svg || params.type || params.layers) {\n\n    let backgroundImage = params.layers \n      && Array.isArray(params.layers)\n      && params.layers\n      .map(_l => `url(${_l.svg})`)\n      .reverse()\n      .join(',')\n      || `url(${params.svg || params.url || mapp.utils.svgSymbols[params.type](params)})`\n\n    let inlineStyle = `\n      background-position: center;\n      background-repeat: no-repeat;\n      background-size: contain;\n      width: ${(params.width + 'px') || '100%'};\n      height: ${(params.height + 'px') || '100%'};\n      background-image:${backgroundImage};`\n  \n    return mapp.utils.html`<div style=${inlineStyle}>`\n\n  }\n\n  if (!params.fillColor && params.strokeColor) {\n\n    let path = `\n      M 0,${params.height/2}\n      L ${params.width/2},${params.height/2}\n      ${params.width/2},${params.height/2}\n      ${params.width},${params.height/2}`\n\n    let icon = mapp.utils.svg.node`\n      <svg height=${params.height} width=${params.width}>\n        <path d=${path}\n          fill=\"none\"\n          stroke=${params.strokeColor}\n          stroke-width=${params.strokeWidth || 1}/>`\n\n    let backgroundImage = `data:image/svg+xml,${encodeURIComponent(xmlSerializer.serializeToString(icon))}`\n\n    let inlineStyle = `\n      background-position: center;\n      background-repeat: no-repeat;\n      background-size: contain;\n      width: ${params.width}px;\n      height: ${params.height}px;\n      background-image: url(${backgroundImage});`\n\n    return mapp.utils.html`<div style=${inlineStyle}>`\n  }\n\n  if (params.fillColor) {\n\n    let icon = mapp.utils.svg.node`\n      <svg height=${params.height} width=${params.width}>\n        <rect\n          x=${params.strokeWidth || 1}\n          y=${params.strokeWidth || 1}\n          rx=\"4px\"\n          ry=\"4px\"\n          stroke-linejoin=\"round\"\n          width=${params.width - 2 * (params.strokeWidth || 1)}\n          height=${params.height - 2 * (params.strokeWidth || 1)}\n          fill=${params.fillColor}\n          fill-opacity=${params.fillOpacity || 1}\n          stroke=${params.strokeColor}\n          stroke-width=${params.strokeWidth || 1}>`\n\n    let backgroundImage = `data:image/svg+xml,${encodeURIComponent(xmlSerializer.serializeToString(icon))}`\n\n    let inlineStyle = `\n      background-position: center;\n      background-repeat: no-repeat;\n      background-size: contain;\n      width: ${params.width}px;\n      height: ${params.height}px;\n      background-image: url(${backgroundImage});`\n\n    return mapp.utils.html`<div style=${inlineStyle}>`\n  }\n  \n}", "export default (params) => {\n\n  if (!(params.target instanceof HTMLElement)) return;\n\n  params.modal = params.target.appendChild(mapp.utils.html.node`\n    <div \n      style=\"top: 10px; right: 10px;\"\n      data-id=${params.data_id || 'modal'}\n      class=\"modal\">\n      <div class=\"header bold\">\n        <span>${params.header}</span>\n        <button\n          data-id=close\n          class=\"mask-icon close\"\n          onclick=${e => {\n      e.target.closest(\".modal\").remove()\n      params.close && params.close(e)\n    }}>\n      </div>\n      ${params.content}`)\n\n  params.modal.addEventListener(\"mousedown\", (e) => {\n    e.preventDefault();\n    params.modal.style.cursor = \"grabbing\";\n    window.addEventListener(\"mousemove\", shiftEvent);\n    window.addEventListener(\"mouseup\", stopShift);\n  });\n\n  params.modal.addEventListener(\"touchstart\", (e) => {\n    e.preventDefault();\n    params.modal.style.cursor = \"grabbing\";\n    window.addEventListener(\"touchmove\", shiftEvent);\n    window.addEventListener(\"touchend\", stopShift);\n  }, {\n    passive: true,\n  });\n\n  // Remove vertical resize events.\n  function stopShift() {\n    params.modal.style.cursor = \"grab\";\n    x = undefined;\n    y = undefined;\n    window.removeEventListener(\"mousemove\", shiftEvent);\n    window.removeEventListener(\"touchmove\", shiftEvent);\n    window.removeEventListener(\"mouseup\", stopShift);\n    window.removeEventListener(\"touchend\", stopShift);\n  }\n\n  let x, y;\n\n  function shiftEvent(e) {\n\n    const pageX = (e.touches && e.touches[0].pageX) || e.pageX;\n\n    const pageY = (e.touches && e.touches[0].pageY) || e.pageY;\n\n\n    if (!x || !y) {\n      x = pageX;\n      y = pageY;\n      return\n    }\n    \n    params.modal.style.right = parseInt(params.modal.style.right) + (x - pageX) + 'px'\n    params.modal.style.top = parseInt(params.modal.style.top) + (pageY - y) + 'px'\n\n    x = pageX;\n    y = pageY;\n  }\n\n}", "export default params => {\n\n  return mapp.utils.html.node`\n    <div\n      role=\"group\"\n      data-id=${params.data_id || 'slider'}\n      title=${params.title || ''}\n      class=\"input-range single\"\n      style=${`--min: ${params.min}; --max: ${params.max}; --a: ${params.val}; ${params.style || ''}`}>\n      <div class=\"label-row\">\n        <label>${params.label}</label>\n        <input id=\"a\"\n          type=\"number\"\n          min=${params.min}\n          max=${params.max}\n          step=${params.step || 1}\n          value=${params.val}\n          oninput=${onInput}></input>\n      </div>\n      <div class=\"track-bg\"></div>\n      <input id=\"a\"\n        type=\"range\"\n        min=${params.min}\n        max=${params.max}\n        step=${params.step || 1}\n        value=${params.val}\n        oninput=${onInput}>`\n\n  function onInput(e) {\n\n    let val = parseFloat(e.target.value)\n\n    if (isNaN(val) || val < params.min) val = params.min\n\n    const group = e.target.closest('.input-range')\n\n    if (val > params.max) {\n      group.style.setProperty(`--max`, val)\n      group.querySelectorAll('input').forEach(el => el.max = val)\n    }\n\n    group.style.setProperty(`--${e.target.id}`, val)\n\n    group.querySelectorAll('input')\n      .forEach(el => {\n        if (el.id != e.target.id) return;\n        if (el == e.target) return;\n        el.value = val\n      })\n\n    params.callback && params.callback(e)\n  }\n\n}", "export default params => {\n\n  const element = mapp.utils.html.node`\n    <div\n      role=\"group\"\n      class=\"input-range multi\"\n      style=${`\n        --min: ${params.min};\n        --max: ${params.max};\n        --a: ${params.val_a};\n        --b: ${params.val_b};`}>\n      <div \n        class=\"label-row\">\n        <label>${params.label_a || 'A'}\n          <input id=\"a\" type=\"number\"\n            value=${params.val_a}\n            min=${params.min}\n            max=${params.max}\n            style=\"--c: var(--a)\"\n            oninput=${onInput}></input>\n        </label>\n        <label>${params.label_b || 'B'}\n          <input id=\"b\" type=\"number\"\n            value=${params.val_b}\n            min=${params.min}\n            max=${params.max}\n            style=\"--c: var(--b)\"\n            oninput=${onInput}></input>\n        </label>\n      </div>\n      <div class=\"track-bg\"></div>\n      <input id=\"a\" type=\"range\"\n        min=${params.min}\n        max=${params.max}\n        step=${params.step || 1}\n        value=${params.val_a}\n        oninput=${onInput}/>\n      <input id=\"b\" type=\"range\"\n        min=${params.min}\n        max=${params.max}\n        step=${params.step || 1}\n        value=${params.val_b}\n        oninput=${onInput}/>`\n\n  function onInput(e) {\n\n    e.target.value = e.target.value > params.max ? params.max : e.target.value;\n\n    element.style.setProperty(`--${e.target.id}`, e.target.value)\n    \n    element.querySelectorAll('input')\n      .forEach(el => {\n        if (el.id != e.target.id) return;\n        if (el == e.target) return;\n        el.value = e.target.value\n      })\n\n    e.target.id === 'a'\n      && typeof params.callback_a === 'function'\n      && params.callback_a(e)\n\n    e.target.id === 'b'\n      && typeof params.callback_b === 'function'\n      && params.callback_b(e)      \n\n  }\n\n  return element\n}", "export default {\n  viewport,\n  download_json,\n  download_csv\n}\n\nfunction viewport(dataview) {\n\n  return mapp.utils.html`\n    <button\n      class=${`flat ${dataview.viewport && 'active' ||''}`}\n      onclick=${e => {\n        e.target.classList.toggle('active')\n        dataview.viewport = !dataview.viewport\n        dataview.update()\n      }}>Viewport`\n\n}\n\nfunction download_json(dataview) {\n\n  return mapp.utils.html`\n    <button\n      class=\"flat\"\n      onclick=${() => {\n        dataview.Tabulator.download('json', `${dataview.title || 'table'}.json`)\n      }}>Export as JSON`\n\n}\n\nfunction download_csv(dataview) {\n\n  return mapp.utils.html`\n    <button\n      class=\"flat\"\n      onclick=${() => {\n        dataview.Tabulator.download('csv', `${dataview.title || 'table'}.csv`)\n      }}>Download as CSV`\n\n}", "import card from './card.mjs'\n\nimport chkbox from './chkbox.mjs'\n\nimport contextMenu from './contextMenu.mjs'\n\nimport drawer from './drawer.mjs'\n\nimport drawing from './drawing.mjs'\n\nimport dropdown from './dropdown.mjs'\n\nimport dropdown_multi from './dropdown_multi.mjs'\n\nimport isoline_params_here from './isoline_params_here.mjs'\n\nimport isoline_params_mapbox from './isoline_params_mapbox.mjs'\n\nimport legendIcon from './legendIcon.mjs'\n\nimport modal from './modal.mjs'\n\nimport slider from './slider.mjs'\n\nimport slider_ab from './slider_ab.mjs'\n\nimport toolbar_el from './toolbar_el.mjs'\n\nexport default {\n  card,\n  chkbox,\n  contextMenu,\n  drawer,\n  drawing,\n  dropdown,\n  dropdown_multi,\n  isoline_params_here,\n  isoline_params_mapbox,\n  legendIcon,\n  modal,\n  slider,\n  slider_ab,\n  toolbar_el\n}", "let promise, Chart = null\n\nexport default async function(canvas, options) {\n\n  // Return Chart method if defined.\n  if (Chart) return new Chart(canvas, options);\n\n  // Create promise to load Chart library.\n  if (!promise) promise = new Promise(async resolve => {\n\n    // Assign from window if Chart library is loaded from link\n    if (window.Chart) {\n\n      Chart = window.Chart\n\n      resolve()\n  \n      return\n    }\n\n    // Import Chart and plugins.\n    Promise\n      .all([\n        import('https://cdn.skypack.dev/chart.js@3.9.1'),\n        import('https://cdn.skypack.dev/chartjs-plugin-datalabels@2.1.0'),\n        import('https://cdn.skypack.dev/chartjs-plugin-annotation@2.0.1')\n      ])\n      .then(imports => {\n\n        // Register imports\n        imports[0].Chart.register(...imports[0].registerables);\n  \n        imports[0].Chart.register(imports[1].default);\n\n        imports[0].Chart.register(imports[2].default);\n  \n        Chart = imports[0].Chart\n\n        resolve()\n      })\n      .catch(error => {\n        console.error(error.message)\n        alert('Failed to load Chart.js library. Please reload the browser.')\n      })\n  \n  })\n\n  await promise\n\n  return new Chart(canvas, options);\n}", "let promise, Tabulator = null\n\nexport default async function() {\n\n  // Return Chart method if defined.\n  if (Tabulator) return new Tabulator(...arguments);\n\n  // Create promise to load Chart library.\n  if (!promise) promise = new Promise(async resolve => {\n\n    // Assign from window if Chart library is loaded from link\n    if (window.Tabulator) {\n\n      Tabulator = window.Tabulator\n\n      resolve()\n  \n      return\n    }\n\n    // Import Chart and plugins.\n    Promise\n      .all([\n        import('https://cdn.skypack.dev/pin/tabulator-tables@v5.3.0-3P9dSwNRL29tgc0Vmk59/mode=imports,min/optimized/tabulator-tables.js')\n      ])\n      .then(imports => {\n  \n        Tabulator = imports[0].TabulatorFull\n\n        resolve()\n      })\n      .catch(error => {\n        console.error(error.message)\n        alert('Failed to load Tabulator library. Please reload the browser.')\n      })\n  \n  })\n\n  await promise\n\n  return new Tabulator(...arguments);\n}", "export default {\n  headerFilter: {\n    like,\n    numeric,\n    set\n  }\n}\n\nfunction like(_this) {\n  \n  return (cell, onRendered, success, cancel, headerFilterParams) => {\n\n    const field = cell.getColumn().getField()\n\n    function likeFilter(e) {\n\n      // Get filter for that field if exists\n      const filter = _this.Tabulator.getFilters().find(f => f.field === field && f.type == \"like\")\n\n      // Remove existing filter\n      if (filter) {\n        _this.Tabulator.removeFilter(...Object.values(filter))\n\n        // Remove layer filter\n        headerFilterParams.layer && delete _this.layer.filter.current[field]\n      }\n\n      if(e.target.value.length) _this.Tabulator.setFilter([\n        { field: field, type: \"like\", value: e.target.value }\n      ])\n\n      if (headerFilterParams.layer) {\n\n          e.target.value.length ? (_this.layer.filter.current[field] = {\n            [headerFilterParams.type]: encodeURIComponent(e.target.value) \n          }) : delete _this.layer.filter.current[field];\n          \n          _this.layer.reload();\n          \n      }\n\n      _this.update();\n\n    }\n\n    return mapp.utils.html.node`<span>\n      <input\n        type=\"text\"\n        placeholder=\"Filter\"\n        oninput=${likeFilter}\n        onblur=${likeFilter}>`\n\n  }\n}\n\nfunction numeric(_this) {\n\n  return (cell, onRendered, success, cancel, headerFilterParams) => {\n\n    // Select the field\n    const field = cell.getColumn().getField()\n\n    const inputMin = mapp.utils.html`\n      <input \n        type=\"number\" \n        placeholder=\"Min\" \n        onchange=${minEvent}\n        onblur=${minEvent}>`\n\n    function minEvent(e) {\n\n      // Get filter for that field if exists\n      const filter = _this.Tabulator.getFilters().find(f => f.field === field && f.type == \">=\")\n\n      // Remove existing filter\n      if (filter) {\n        _this.Tabulator.removeFilter(...Object.values(filter))\n\n        // Remove layer filter\n        headerFilterParams.layer && delete _this.layer.filter.current[field]\n      }\n\n      // Add filter for valid target value.\n      if (Number(e.target.value)) {\n        _this.Tabulator.addFilter(field, \">=\", Number(e.target.value))\n\n        // Set layer filter\n        if (headerFilterParams.layer) {\n          _this.layer.filter.current[field] = Object.assign(_this.layer.filter.current[field] || {}, {gte:Number(e.target.value)})\n          _this.layer.reload();\n          _this.update();  \n        }\n      }\n    }\n\n    const inputMax = mapp.utils.html`\n      <input \n        type=\"number\" \n        placeholder=\"Max\" \n        onchange=${maxEvent}\n        onblur=${maxEvent}>`\n\n    function maxEvent(e) {\n\n      // Get filter for that field if exists\n      const filter = _this.Tabulator.getFilters().find(f => f.field === field && f.type == \"<=\")\n\n      // Remove existing filter\n      if (filter) {\n        _this.Tabulator.removeFilter(...Object.values(filter))\n\n        // Remove layer filter\n        headerFilterParams.layer && delete _this.layer.filter.current[field]\n      }\n\n      // Add filter for valid target value.\n      if (Number(e.target.value)) {\n        _this.Tabulator.addFilter(field, \"<=\", Number(e.target.value))\n\n        // Set layer filter\n        if (headerFilterParams.layer) {\n          _this.layer.filter.current[field] = Object.assign(_this.layer.filter.current[field] || {}, { lte: Number(e.target.value) })\n          _this.layer.reload();\n          _this.update();\n        }\n      }\n    }\n\n    // flex container must be encapsulated since tabulator will strip attribute from most senior item returned.\n    return mapp.utils.html.node`\n      <div><div style=\"display: flex;\">${inputMin}${inputMax}`\n\n  }\n}\n\nfunction set(_this) {\n\n  return (cell, onRendered, success, cancel, headerFilterParams) => {\n\n     headerFilterParams.set = new Set()\n\n    function callback(cell, set) {\n\n      _this.filter[cell.getField()] = {}\n\n      if (set.size) _this.filter[cell.getField()].in = Array.from(set)\n                \n      if(headerFilterParams.maxRows && _this.Tabulator.getDataCount() > headerFilterParams.maxRows-1) return _this.update()\n\n      if(_this.Tabulator.getFilters().length) {\n        let filter = _this.Tabulator.getFilters().find(f => f.field == cell.getField() && f.type == \"in\")\n        if(filter) _this.Tabulator.removeFilter(filter.field, filter.type, filter.value)\n      }\n\n      if(set.size) _this.Tabulator.addFilter(cell.getField(), \"in\", Array.from(set)) \n\n      if(typeof(headerFilterParams.callback) === 'function') headerFilterParams.callback(cell, headerFilterParams.set)\n        \n    }\n\n    const select = mapp.utils.html.node`\n    <select style=\"border: 0; width: 100%; font-size: 11px;\"\n    onchange=${e => {\n\n      const val = e.target.value\n\n      headerFilterParams?.set.has(val)\n      && headerFilterParams.set.delete(val)\n      || headerFilterParams.set.add(val)\n            \n      for (let i=0; i<e.target.options.length; i++) {\n\n        e.target.options[i].style.backgroundColor = headerFilterParams.set\n        .has(e.target.options[i].value) && (headerFilterParams.selected || '#cae0b8') || '#ffffff'\n      }\n\n      callback(cell, headerFilterParams.set)\n\n      e.target.value = null\n\n    }}>${headerFilterParams.options.map(option => mapp.utils.html.node`\n      <option>${option}`)}`\n\n    select.value = null\n\n    if(headerFilterParams.multiple) select.multiple = true\n\n    return select\n  \n  }\n\n}\n\n\n\n", "const idle = {\n  idle: 600,\n}\n\nexport default params => {\n\n  Object.assign(idle, params)\n\n  if (idle.idle === 0) return;\n\n  // Define window events that reset the lock timeout.\n  window.onload = resetTimer;\n  window.onmousemove = resetTimer;\n  window.onmousedown = resetTimer;\n  window.ontouchstart = resetTimer;\n  window.onclick = resetTimer;\n  window.onkeypress = resetTimer;\n  resetTimer()\n  renewToken()\n}\n\n// Reset idle timeout\nfunction resetTimer() {\n\n  if (idle.locked) return\n\n  idle.timeout && clearTimeout(idle.timeout);\n\n  idle.timeout = setTimeout(lock, idle.idle * 1000)\n}\n\n// Lock interface\nfunction lock() {\n\n  idle.locked = true\n\n  // Do not renew cookie when interface is locked.\n  idle.renew && clearTimeout(idle.renew)\n\n  // Destroy cookie.\n  const xhr = new XMLHttpRequest()\n  xhr.open('GET', `${idle.host}/api/user/cookie?destroy=true`)\n\n  // Reload location once cookie has been removed.\n  xhr.onload = e => location.reload()\n  xhr.send()\n}\n\n// Renew cookie\nfunction renewToken() {\n\n  // Renew token after idle minus 20 seconds.\n  idle.renew = setTimeout(cookie, (idle.idle - 20) * 1000)\n\n  function cookie() {\n\n    const xhr = new XMLHttpRequest()\n    xhr.open('GET', `${idle.host}/api/user/cookie?renew=true`)\n    xhr.onload = e => {\n\n      // Lock interface if cookie renewal fails.\n      if (e.target.status === 401) return lock()\n\n      // Re-call method to renew token.\n      renewToken()\n    }\n\n    xhr.send()\n  }\n}", "export default e => {\n\n  document.body.append(mapp.utils.html.node`\n    <div class=\"interface-mask\">\n      <div class=\"bg-image\" style=${`background-image:url(${e.target.src})`}>\n      <button class=\"btn-close mask-icon close\"\n        onclick=${e => e.target.parentElement.parentElement.remove()}>`);\n\n}", "export default (params) => {\n\n  params.target.addEventListener(\"mousedown\", (e) => {\n    e.preventDefault();\n    document.body.style.cursor = \"grabbing\";\n    window.addEventListener(\"mousemove\", params.resizeEvent);\n    window.addEventListener(\"mouseup\", stopResize);\n  });\n\n  params.target.addEventListener(\n    \"touchstart\",\n    (e) => {\n      e.preventDefault();\n      window.addEventListener(\"touchmove\", params.resizeEvent);\n      window.addEventListener(\"touchend\", stopResize);\n    },\n    {\n      passive: true,\n    }\n  );\n\n  // Remove vertical resize events.\n  function stopResize() {\n    document.body.style.cursor = \"auto\";\n    window.removeEventListener(\"mousemove\", params.resizeEvent);\n    window.removeEventListener(\"touchmove\", params.resizeEvent);\n    window.removeEventListener(\"mouseup\", stopResize);\n    window.removeEventListener(\"touchend\", stopResize);\n  }\n}", "import Chart from './Chart.mjs'\n\nimport Tabulator from './Tabulator.mjs'\n\nimport tabulator from './tabulatorUtils.mjs'\n\nimport idleLogout from './idleLogout.mjs'\n\nimport imagePreview from './imagePreview.mjs'\n\nimport resizeHandler from './resizeHandler.mjs'\n\nexport default {\n  Chart,\n  Tabulator,\n  tabulator,\n  idleLogout,\n  imagePreview,\n  resizeHandler,\n}", "export default params => {\n\n  // Assign params to gazetteer object.\n  const gazetteer = Object.assign({\n\n    input: params.target.querySelector('input'),\n\n    result: params.target.querySelector('ul'),\n\n    getLocation,\n\n    sources: {\n      glx: glx,\n      mapbox: mapbox,\n      google: google\n    }\n\n  }, params);\n\n  gazetteer.input.placeholder = gazetteer.placeholder || '';\n\n  gazetteer.input.oninput = e => {\n\n    // Abort current query.\n    gazetteer.xhr && gazetteer.xhr.abort()\n\n    // Clear results\n    gazetteer.result.innerHTML = ''\n\n    // Only search if value has length.\n    e.target.value.length > 0 && search(e.target.value)\n  }\n\n  // Select first result on enter keypress\n  gazetteer.input.addEventListener('keydown', e => {\n    (e.keyCode || e.charCode) === 13\n      && gazetteer.result.querySelector('li').click()\n  })\n\n  function search(term){\n \n    // Get possible coordinates from input.\n    let ll = term.split(',').map(parseFloat)\n\n    // Check whether coordinates are float values.\n    if (ll.length === 2 && ll.every(n => !isNaN(n))) {\n\n      gazetteer.result.appendChild(mapp.utils.html.node`\n      <li \n        onclick=${e=>{\n\n          gazetteer.result.innerHTML = ''\n\n          gazetteer.getLocation({\n            label: `Latitude:${ll[0]}, Longitude:${ll[1]}`,\n            source: 'Coordinates',\n            lng: ll[1],\n            lat: ll[0]\n          })\n\n        }}><span>Latitutde:${ll[0]}, Longitude:${ll[1]}`)\n\n      // Do not search if coordinates are provided.\n      return;\n    }\n\n    // Abort current xhr and create new.\n    gazetteer.xhr = new XMLHttpRequest()\n  \n    // Send gazetteer query to backend.\n    gazetteer.xhr.open('GET', gazetteer.mapview.host + '/api/gazetteer?' +\n      mapp.utils.paramString({\n        locale: gazetteer.mapview.locale.key,\n        layer: gazetteer.layer,\n        q: encodeURIComponent(term),\n      }))\n  \n    gazetteer.xhr.setRequestHeader('Content-Type', 'application/json')\n    gazetteer.xhr.responseType = 'json'\n    gazetteer.xhr.onload = e => {\n  \n      if (e.target.status !== 200) return;\n          \n      // No results\n      if (e.target.response.length === 0) {\n        return gazetteer.result.appendChild(mapp.utils.html.node`\n          <li>${mapp.dictionary.no_results}`)\n      }\n  \n      // Add results from JSON to gazetteer.\n      Object.values(e.target.response).forEach(entry => {\n  \n        gazetteer.result.append(mapp.utils.html.node`\n          <li\n            onclick=${e=>{\n\n              gazetteer.result.innerHTML = ''\n\n              if (gazetteer.callback) return gazetteer.callback(entry)\n\n              gazetteer.sources[entry.source]({\n                label: entry.label,\n                id: entry.id,\n                source: entry.source,\n                layer: entry.layer,\n                table: entry.table,\n                marker: entry.marker,\n                callback: params.callback\n              })\n      \n            }}>\n            <span class=\"label\">${entry.title || (gazetteer.mapview.layers[entry.layer] && gazetteer.mapview.layers[entry.layer].name) || entry.layer || entry.source}</span>\n            <span>${entry.label}</span>`)\n\n      })\n  \n    }\n  \n    gazetteer.xhr.send()\n  }\n\n  function glx(record) {\n\n    gazetteer.getLocation({\n      layer: gazetteer.mapview.layers[record.layer],\n      table: record.table,\n      id: record.id\n    }, loc => mapp.location.get(loc).then(loc => loc && loc.flyTo())) \n  }\n  \n  function google(record) {\n\n    mapp\n      .utils\n        .xhr(`${gazetteer.mapview.host}/api/proxy?url=${encodeURIComponent(`https://maps.googleapis.com/maps/api/place/details/json?placeid=${record.id}&{GOOGLE}`)}`)\n          .then(response => {\n\n            gazetteer.getLocation({\n              label: record.label,\n              source: record.source,\n              lng: response.result.geometry.location.lng,\n              lat: response.result.geometry.location.lat\n            })\n          })\n  }\n\n  function mapbox(record) {\n\n    gazetteer.getLocation({\n      label: record.label,\n      source: record.source,\n      lng: record.marker[0],\n      lat: record.marker[1]\n    })\n  }\n\n  function getLocation(location, callback) {\n\n    if (typeof callback === 'function') {\n      callback(location)\n      return;\n    }\n\n    Object.assign(location, {\n      layer: {\n        mapview: gazetteer.mapview\n      },\n      Layers: [],\n      hook: location.label\n    })\n\n    const infoj = [\n      {\n        title: location.label,\n        value: location.source\n      },\n      {\n        type: 'pin',\n        value: [location.lng, location.lat],\n        srid: '4326',\n        class: 'display-none',\n        location\n      }\n    ]\n\n    gazetteer.streetview && infoj.push({ \n      type: \"streetview\",\n      location\n    })\n\n    mapp.location.decorate(Object.assign(location, { infoj }))\n\n    gazetteer.mapview.locations[location.hook] = location\n\n    if (gazetteer.zoom) {\n      let view = gazetteer.mapview.Map.getView()\n      view.setZoom(gazetteer.zoom)\n      view.setCenter(ol.proj.fromLonLat([location.lng, location.lat]))\n      \n    } else {\n      location.flyTo()\n    }\n  }\n}", "import layers from './ui/layers/_layers.mjs'\n\nimport locations from './ui/locations/_locations.mjs'\n\nimport Dataview from './ui/Dataview.mjs'\n\nimport Tabview from './ui/Tabview.mjs'\n\nimport elements from './ui/elements/_elements.mjs'\n\nimport utils from './ui/utils/_utils.mjs'\n\nimport Gazetteer from './ui/Gazetteer.mjs'\n\nself.ui = (function (mapp) {\n\n  mapp.ui = {\n    layers,\n    locations,\n    elements,\n    utils,\n    Gazetteer,\n    Dataview,\n    Tabview,\n  }\n\n})(mapp);"],
  "mappings": "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",
  "names": ["view_default", "layer", "fullScreen", "e", "response", "toggleDisplay", "header", "content", "key", "panel", "meta", "listview_default", "params", "listview", "layer", "add", "view_default", "createGroup", "group", "hideLayers", "e", "metaContent", "filters_default", "filter_text", "filter_numeric", "filter_in", "filter_date", "filter_boolean", "filter_null", "timeout", "applyFilter", "layer", "zoom", "btn", "entry", "e", "booleanFilter", "checked", "nullFilter", "response", "r", "f", "chkSet", "val", "options", "idx", "inputAfter", "onClose", "inputBefore", "draw_default", "layer", "options", "cards", "key", "draw", "node", "btn", "feature", "location", "filter_default", "layer", "entry", "dropdown", "e", "btn", "input", "clearAll", "gazetteer_default", "layer", "gazetteer", "dataviews_default", "layer", "dataviewChkboxes", "entry", "dataview", "tabview", "createTabAndShow", "checked", "reports_default", "layer", "reportLinks", "key", "report", "href", "style_default", "layer", "content", "e", "labelCheckbox", "checked", "z", "chkBox", "key", "entry", "modalButton", "btn", "categorized_default", "layer", "theme", "grid", "e", "_switch", "cat", "cat_style", "icon", "label", "key", "distributed_default", "layer", "graduated_default", "layer", "theme", "grid", "cat", "cat_style", "icon", "label", "grid_default", "layer", "grid", "e", "entry", "n", "xmlSerializer", "centreBit", "colour", "i", "icon", "backgroundImage", "inlineStyle", "checked", "basic_default", "layer", "grid", "icon", "layers_default", "view_default", "listview_default", "filters_default", "draw_default", "style_default", "filter_default", "gazetteer_default", "reports_default", "dataviews_default", "categorized_default", "distributed_default", "graduated_default", "grid_default", "basic_default", "layer", "view_default", "location", "header", "entry", "e", "removeEdits", "editToggle", "infoj", "list", "listview_default", "params", "listview", "clearAll", "e", "location", "target", "key", "record", "el", "hook", "gazInput", "infoj_default", "location", "infoj", "listview", "groups", "entry", "fieldEntry", "_entry", "paramString", "response", "el", "boolean_default", "entry", "chkbox", "checked", "dataview_default", "entry", "dependant", "_entry", "createTabAndShow", "checked", "date_default", "entry", "val", "e", "defaults_default", "entry", "val", "documents_default", "entry", "docs", "doc", "e", "removeDocument", "upLoadBtn", "upload", "docs_list", "reader", "file", "readerOnload", "response", "secure_url", "public_id", "newDoc", "geometry_default", "entry", "show", "chkbox", "checked", "options", "list", "key", "draw", "node", "modifyBtn", "e", "modify", "remove", "icon", "btn", "feature", "images_default", "entry", "images", "image", "e", "removeDocument", "upLoadBtn", "upload", "images_grid", "reader", "file", "readerOnload", "img", "canvas", "max_size", "width", "height", "dataURL", "response", "newImg", "typeMethods", "isoline_here", "isoline_mapbox", "isoline_default", "entry", "chkbox", "checked", "show", "icon", "pin", "lookup", "params", "response", "_coordinates", "p", "json_default", "entry", "response", "val", "e", "mvt_clone_default", "entry", "paramString", "chkbox", "checked", "node", "chkZoom", "mapLayers", "numeric_default", "entry", "val", "e", "pin_default", "entry", "chkbox", "checked", "report_default", "entry", "href", "streetview_default", "entry", "pin", "lnglat", "node", "response", "src", "tab_default", "entry", "tabview", "chkbox", "checked", "text_default", "entry", "node", "val", "params", "paramString", "response", "options", "e", "chk", "option", "entries", "_entry", "textarea_default", "entry", "response", "val", "e", "node", "time_default", "entry", "val", "stringVal", "e", "entries_default", "key", "boolean_default", "dataview_default", "date_default", "defaults_default", "documents_default", "geometry_default", "textarea_default", "images_default", "numeric_default", "isoline_default", "json_default", "mvt_clone_default", "pin_default", "report_default", "streetview_default", "tab_default", "text_default", "time_default", "entry", "locations_default", "view_default", "listview_default", "infoj_default", "entries_default", "Dataview_default", "_this", "params", "paramString", "response", "target", "toolbar", "key", "Chart", "Table", "canvas", "data", "dataset", "col", "debounce", "e", "row", "rowData", "event", "Tabview_default", "tabview", "addTab", "e", "entry", "showTab", "removeTab", "tab", "sibling", "card_default", "params", "e", "chkbox_default", "params", "e", "contextMenu_default", "modify", "draw", "menu", "drawer_default", "params", "e", "sibling", "drawing_default", "point", "locator", "polygon", "circle", "line", "isoline_here", "isoline_mapbox", "rectangle", "_options", "draw", "options", "e", "pos", "location", "coords", "units", "v", "unitsDropDown", "entry", "rangeSlider", "btn_centre", "coordinates", "btn_2p", "params", "defaults", "drawer", "dropdown_default", "params", "e", "el", "entry", "btn", "dropdown_multi_default", "params", "selectedTitles", "selectedOptions", "ul", "entry", "li", "e", "btn", "el", "isoline_params_here_default", "params", "modeDropDown", "e", "entry", "optimisedForDropDown", "date_picker_label", "dateSelect", "reverseDirectionChk", "paramsDrawer", "datePicker", "rangeSlider", "checked", "isoline_params_mapbox_default", "params", "modeDropDown", "e", "entry", "minuteSlider", "xmlSerializer", "legendIcon_default", "params", "backgroundImage", "_l", "inlineStyle", "path", "icon", "modal_default", "params", "e", "shiftEvent", "stopShift", "x", "y", "pageX", "pageY", "slider_default", "params", "onInput", "e", "val", "group", "el", "slider_ab_default", "params", "element", "onInput", "e", "el", "toolbar_el_default", "viewport", "download_json", "download_csv", "dataview", "e", "elements_default", "card_default", "chkbox_default", "contextMenu_default", "drawer_default", "drawing_default", "dropdown_default", "dropdown_multi_default", "isoline_params_here_default", "isoline_params_mapbox_default", "legendIcon_default", "modal_default", "slider_default", "slider_ab_default", "toolbar_el_default", "promise", "Chart", "Chart_default", "canvas", "options", "resolve", "imports", "error", "promise", "Tabulator", "Tabulator_default", "resolve", "imports", "error", "tabulatorUtils_default", "like", "numeric", "set", "_this", "cell", "onRendered", "success", "cancel", "headerFilterParams", "field", "likeFilter", "e", "filter", "f", "inputMin", "minEvent", "inputMax", "maxEvent", "callback", "select", "val", "i", "option", "idle", "idleLogout_default", "params", "resetTimer", "renewToken", "lock", "xhr", "e", "cookie", "imagePreview_default", "e", "resizeHandler_default", "params", "e", "stopResize", "utils_default", "Chart_default", "Tabulator_default", "tabulatorUtils_default", "idleLogout_default", "imagePreview_default", "resizeHandler_default", "Gazetteer_default", "params", "gazetteer", "getLocation", "glx", "mapbox", "google", "e", "search", "term", "ll", "n", "entry", "record", "loc", "response", "location", "callback", "infoj", "view", "mapp", "layers_default", "locations_default", "elements_default", "utils_default", "Gazetteer_default", "Dataview_default", "Tabview_default"]
}
